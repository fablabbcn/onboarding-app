"use strict";function preload(){for(var e="app/images/",t=0;t<limit;t++)imgs.push(loadGif(e+floor(random(1,10))+".gif"))}function centerCanvas(){cnv=createCanvas(windowWidth,windowHeight);var e=(windowWidth-width)/2,t=(windowHeight-height)/2;cnv.position(e,t)}function windowResized(){centerCanvas()}function setup(){centerCanvas();for(var e=0;e<limit;e++){var t=(floor(random(1,imgs.length))-1,imgs[e]);particles.push(new Particle(random(50,width-50),random(50,height-50),t))}}function draw(){background("#212B32");for(var e=0;e<limit;e++)particles[e].separate(particles),particles[e].update(),particles[e].display()}function Particle(e,t,r){this.pos=createVector(e,t),this.vel=createVector(random(-2,2),random(-2,2)),this.acc=createVector(0,-8),this.size=20,this.maxSpeed=.3,this.maxForce=1,this.theta=0,this.img=r,this.gifShow=!1,this.paused=!0,this.frozen=!0,this.itvl=floor(random(200,1e3)),this.spawn=function(){this.img.frame([])>100||this.img.frame([])<5?(1==this.gifShow&&(this.paused=!0),this.gifShow=!1):this.gifShow=!0,this.frozen&&frameCount%this.itvl==0&&(this.img.play(),this.frozen=!1)},this.update=function(){this.spawn(),this.vel.add(this.acc),this.vel.limit(this.maxSpeed),this.pos.add(this.vel),this.acc.set(0,0),this.border()},this.display=function(){this.theta+=this.vel.x*this.vel.mag()/20;push(),translate(this.pos.x,this.pos.y),rotate(this.theta),this.paused&&(this.paused=!1,this.frozen=!0,this.img.pause()),this.img.loaded()&&image(this.img,this.size/-1,this.size/-1,this.size,this.size),pop()},this.border=function(){this.pos.x<-this.size&&(this.pos.x=width+this.size),this.pos.y<-this.size&&(this.pos.y=height+this.size),this.pos.x>width+this.size&&(this.pos.x=-this.size),this.pos.y>height+this.size&&(this.pos.y=-this.size)},this.separate=function(e){for(var t=1.1*this.size,r=createVector(),n=0,a=0;a<e.length;a++){var o=p5.Vector.dist(this.pos,e[a].pos);if(o>0&&o<t){var i=p5.Vector.sub(this.pos,e[a].pos);i.normalize(),i.div(o),r.add(i),n++}}if(n>0){r.div(n),r.normalize(),r.mult(10*this.maxSpeed);var s=p5.Vector.sub(r,this.velocity);s.limit(this.maxforce),this.applyForce(s)}},this.applyForce=function(e){this.acc.add(e)}}/*
* Symbolset
* www.symbolset.com
* Copyright © 2013 Oak Studios LLC
*
* Upload this file to your web server
* and place this before the closing </body> tag.
* <script src="webfonts/ss-standard.js"></script>
*/
if(angular.module("app",["ui.router","ngMaterial","ngMessages","ngAnimate","ngGeolocation","uiGmapgoogle-maps","google.places","restangular","btford.socket-io"]).controller("formController",["$scope",function(e){e.formData={},console.log(e.formData),e.processForm=function(){alert("awesome!")}}]),angular.module("app").controller("wizardCtrl",["$scope","$location","$sce","$window","$timeout","SegueService","$rootScope","AnimationService","session","platform","Restangular","$state","$stateParams",function(e,t,r,n,a,o,i,s,l,u,c,p,h){function d(){s.leaving(!0),e.payload.progressShow="blue",a(function(){console.log(e.payload.index),t.path("/wizard/"+o.nextPage(e.payload.index,e.pre_made)),n.scrollTo(0,0),e.payload.progressShow=" "},500)}function f(){s.leaving(!1),e.payload.progressShow="blue",a(function(){e.segueControl="ready",console.log(e.payload.index),t.path("/wizard/"+o.previousPage(e.payload.index,e.pre_made)),n.scrollTo(0,0),e.payload.progressShow=" "},500)}function m(){if(console.log(e.payload.template),"wifi_enter"==e.payload.template||"sensorName"==e.payload.template||"account1"==e.payload.template||"login"==e.payload.template||"make1"==e.payload.template||"make2"==e.payload.template)return e.segueControl="error",void a(function(){e.payload.segueButton=e.payload.segueButtonError},250);if("handshake"!=e.payload.template&&"location_prep"!=e.payload.template){if("ap_final"==e.payload.url)return void console.log("final hit");e.segueControl="error",e.errorButton="show",i.$broadcast("blockedSegue"),a(function(){e.payload.segueButton=e.payload.segueButtonError},250)}}function g(){e.errorButton=""}e.spinnerControl="hide",e.submittedData={},e.submittedData.wifi={},e.submittedData.user={},e.submittedData.deviceData={device_token:l.device_token,description:"Making Sense Pilot #1",exposure:"outdoor",kit_id:11},console.log(e.submittedData.deviceData.user_tags_array),e.submittedData.deviceData.user_tags_array=["MakingSense","Barcelona","Plaça del sol","MS1"],e.onboarding_session=l.onboarding_session,e.pre_made=!1,e.modalClass="hidden",e.handShakeState=!1,e.handShakeRepeats=0,e.handShakeRetries=4,e.seque=function(){if(console.log(e.payload.template),"ready"==e.segueControl)switch(e.payload.template){case"handshake":0==e.handShakeState?i.$broadcast("handshake"):d();break;case"final":n.open("https://smartcitizen.me/kits/"+e.submittedData.deviceData.id,"_blank");break;case"sensorName":u.updateDevice(e.submittedData.deviceData).then(d);break;case"location_map":u.updateDevice(e.submittedData.deviceData).then(d);break;case"location_tags":u.updateDevice(e.submittedData.deviceData).then(d);break;default:d()}else m()},e.back=function(){"blocked"!=e.payload.backBlock&&(i.$broadcast("no"),f())},e.$on("forceSegue",function(t,r){console.log(r.target),s.leaving(!0),e.payload.progressShow="blue",a(function(){p.go(r.target,r.params),n.scrollTo(0,0),e.payload.progressShow=" "},500)}),e.$on("removeError",function(){g()}),e.no=function(){i.$broadcast("no")},e.yes=function(){e.modalBox="red";var t=o.modalBox(0,e.lang);e.modalContent=t,i.$broadcast("modal")},e.kitRegisterFailed=function(){e.modalBox="red";var t={title:"Uh oh",body:"It seems there was a problem while registering your kit! Sorry, you need to restart the process.",button:"Restart the process!",action:"restart"};e.modalContent=t,i.$broadcast("modal")},e.handshakeFailed=function(){e.modalBox="red";var t={title:"Uh oh",body:"It seems like your kit can't connect to the internet after several retries. Please, check your Wi-Fi router!",button:"Notify the team!",action:"email"};e.modalContent=t,i.$broadcast("modal")},e.serverFailed=function(){e.modalBox="red";var t={title:"Uh oh",body:"It seems we can't talk to the Smart Citizen platform. Please, check your internet connection!",button:"Retry",action:"retry"};e.modalContent=t,i.$broadcast("modal")},e.modalClick=function(){e.modalClass="out",a(function(){e.modalClass="hidden",i.$broadcast("modalClosed")},500)},e.modalButtonClick=function(){switch(e.modalContent.action){case"email":n.open("mailto:feedback-4873-IVVSumgXA4EEA4e7blwZvyE2sshIpRRK@feedback.doorbell.io?Subject=MakingSense Support ["+e.onboarding_session+"]","_blank");break;case"retry":e.seque;break;case"restart":p.go("wizard.landing");break;default:e.seque}},e.$on("modal",function(){e.modalClass="showing"}),c.setErrorInterceptor(function(t,r,n){return[204,422,403,404].indexOf(t.status)>-1?(console.warn(t),!0):(console.error(t),e.serverFailed(),!1)})}]),angular.module("app").controller("stateCtlr",["$scope","$rootScope","scopePayload","AnimationService","$stateParams",function(e,t,r,n,a){function o(){s(),e.morphControl=["closed"],"selectparts2"==e.$parent.payload.template?(e.selectionButtons=["","","",""],e.partButtons=[!1,!1,!1,!1]):(e.selectionButtons=["","","",""],e.partButtons=[!1,!1,!1,!1]),e.infoImages=["app/images/info1.png","app/images/info1.png","app/images/info1.png","app/images/info1.png","app/images/info1.png","app/images/info1.png","app/images/info1.png","app/images/info1.png"]}function i(){e.$parent.segueControl="ready"}function s(){e.$parent.segueControl="blocked"}function l(){e.payload.segueButton=e.payload.continueButton,1==e.errorState&&t.$broadcast("removeError")}e.$parent.payload=r,n.animate(r.index),t.lang=a.lang,e.selectDevice=function(t){o(),e.selectionButtons[t]="active",i()},e.selectLocation=function(t){o(),e.selectionButtons[t]="active",i()},e.selectPart=function(t){return 1==e.tempBlock?void(e.tempBlock=!1):(l(),1==e.partButtons[t]?(e.partButtons[t]=!1,e.selectionButtons[t]=""):(e.partButtons[t]=!0,e.selectionButtons[t]="active"),void(e.partButtons.every(function(e){return e===!0})?i():s()))},e.morph=function(t){o(),e.morphControl[t]="open"},e.segueCondition=function(){o(),i()},o(),e.$on("blockedSegue",function(){for(var t=0;t<4;t++)""==e.selectionButtons[t]&&(e.selectionButtons[t]="error");e.errorState=!0}),e.$on("no",function(){l(),s()}),e.infoImageOn=function(t){"app/images/info1.png"==e.infoImages[t]&&(e.infoImages[t]="app/images/info2.png"),"app/images/question.png"==e.infoImages[t]&&(e.infoImages[t]="app/images/question2.png")},e.infoImageOff=function(t){"app/images/info2.png"==e.infoImages[t]&&"active"!=e.selectionButtons[t]&&(e.infoImages[t]="app/images/info1.png"),"app/images/question2.png"==e.infoImages[t]&&"active"!=e.selectionButtons[t]&&(e.infoImages[t]="app/images/question.png")},e.infoClick=function(r){e.$parent.modalBox="green";var n=[{title:e.payload.part1,body:e.payload.part1_desc,image:"app/images/BOARDS-CUTOUT_0003_SENSOR-BOARD-BLUE.png"},{title:e.payload.part2,body:e.payload.part2_desc,image:"app/images/BOARDS-CUTOUT_0002_HARDWARE-BOARD-WHITE.png"},{title:e.payload.part3,body:e.payload.part3_desc,image:"app/images/BOARDS-CUTOUT_0006_BATTERY2.png"},{title:e.payload.part4,body:e.payload.part4_desc,image:"app/images/BOARDS-CUTOUT_0005_USBgreen.png"},{title:e.payload.part5,body:e.payload.part5_desc,image:"app/images/BOARDS-CUTOUT_0008_ANGLED.png"},{title:e.payload.part6,body:e.payload.part6_desc,image:"app/images/spacers.png"},{title:e.payload.part7,body:e.payload.part7_desc,image:"app/images/screen.png"},{title:e.payload.part8,body:e.payload.part8_desc,image:"app/images/plugs.png"}];n[r].button=e.payload.modalButton,e.$parent.modalContent=n[r],e.tempBlock=!0,t.$broadcast("modal")}}]),angular.module("app").controller("smartCitizenController",["$scope","scopePayload","AnimationService",function(e,t,r){e.$parent.payload=t,r.animate(t.index),e.$parent.segueControl="ready",e.$parent.smartCitizenToggle="smartCitizen"}]),angular.module("app").service("SegueService",function(){function e(e,t){void 0==t&&(t=0);for(var r=a[t],n=0;n<r.length;n++)if(r[n].index==e)return r[n]}function t(e,t){void 0==t&&(t=0);var o=a[t],i=e,s=o.findIndex(function(e,t){return e.index===i.index});return i.progressLeftLabel=r(i.index).toString()+" / 6",i.progressRightLabel=n(i.index).toString()+" step #"+i.part,i.progressVal=s/o.length*100,i.companyLogo=e.companyLogo,i.image=e.image,e.index>=1&&e.index<100?i.backBlock="":i.backBlock="hide",e.index>=1?i.forwardBlock="blocked":i.forwardBlock="hide",i}function r(e){return e<=4?1:e<=19?2:e<=34?3:e<=41?4:e<=53?5:6}function n(e){return e<=4?"Introduction":e<=19?"What's in the Box":e<=33?"Handshake":e<=41?"Naming":e<=53?"Location":"Account"}var a=[[{index:0,part:1,template:"landing",url:"landing",h1:"Welcome to the Making Sense pilot!",h4:"Let’s get you set up with a Smart Citizen kit, and sensing in no time",segueButton:"Continue in English",contextButton1:"CASTELLANO",contextButton2:"CATALÀ"},{index:1,part:2,template:"collaborators",url:"making_sense",companyLogo:"app/images/MS LOGO.png",h2:"Making Sense is a project to help people make sense of their environment.",h4:"We want to help you deploy sensors to help understand sound pollution. By making sense of the issue, we might be able to address it.",segueButton:"SOUNDS GOOD!"},{index:2,part:3,template:"collaborators",url:"smart_citizen",companyLogo:"app/images/SCK LOGO.png",h2:"Smart Citizen is a movement for civic participation in a modern world",h4:"Smart Citizen creates open tools for citizens to be better informed about the world around them.",segueButton:"CONTINUE"},{index:3,part:4,template:"basic2",url:"smart_citizen_brief",image:"app/images/sck_glow.png",h2:"The Smart Citizen Kit",h4:"This sensor is a Smart Citizen Kit for environmental sensing. It measures sound, air quality, humidity, and lots of other things",segueButton:"CONTINUE"},{index:4,part:5,template:"basic2",url:"smart_citizen_brief2",image:"app/images/SCK_macbook.png",h2:"smartcitizen.me",h4:"The kit sends all the measurements to the Smart Citizen website. It's open and free for all to see, question and play with...",segueButton:"LET'S DO THIS"},{index:10,part:1,template:"basic",url:"whats_in_the_box",h1:"LET'S SET UP THE KIT",h4:"There's a few pieces we need to set up the Kit, let's check we have them all",segueButton:"I'M READY"},{index:11,part:2,template:"selectparts",url:"kit_parts",h2:"Click on all the things you have received",h4:"We need to know this to make the set up work smoothly",part1:"Sensor Board",part1_desc:"This is where all the sensors are. It connects to the bigger, hardware board, so that the sensors can transmit what they find.",part2:"Hardware Board",part2_desc:"This is where all the computation takes place. Anytime you want to connect something to the Smart Citizen, it will be on this board",part3:"Battery",part3_desc:"This powers the device. Every so often it has to be recharged, especially after long periods of continuous use.",part4:"Charging Cable",part4_desc:"When the Kit needs to be charged, you can connect this cable to your computer or plug, and back to the Kit.",modalButton:"OK, got it",contextButton:"where is my enclosure?",segueButton:"CONTINUE",segueButtonError:"Are you missing parts?",continueButton:"CONTINUE",yesButton:"YES",noButton:"NO"},{index:12,part:3,template:"selectparts2",url:"case",h2:"Finally...",h4:"You don’t have to have the case, but it does protect your kit against the elements",part5:"Case",part5_desc:"The case is water resistant and allows the device to be affixed to a variety of surfaces.",part6:"Spacers",part6_desc:"Placed between the hardware board and sensor board, this keeps the boards study.",part7:"Cover",part7_desc:"Closing the case, this is used dto protect the device from rain. Make sure to place the holes over the sound sensor.",part8:"Fastener",part8_desc:"This is used to fasten the case to the cover.",modalButton:"OK, got it",contextButton:"Where is my mine?",segueButton:"CONTINUE",segueButtonError:"Are you missing parts?",continueButton:"CONTINUE",yesButton:"YES",noButton:"NO"},{index:13,part:4,template:"comfirm",url:"confirm_parts",h1:"WELL DONE",h4:"Now let's put it all together",segueButton:"CONTINUE"},{index:14,part:5,template:"kitbuild1",url:"kitbuild_1",h2:"First the separators...",text:"Place a spacer in the holes on the sensor board",segueButton:"DONE"},{index:15,part:6,template:"kitbuild2",url:"kitbuild_2",h2:"Secondly, let's connect the sensors",text:"Connect the pins on the sensor board to the hardware board",segueButton:"DONE"},{index:16,part:7,template:"kitbuild3",url:"kitbuild_3",h2:"Let's give it some power",text:"Connect the battery to the hardware board",segueButton:"DONE"},{index:17,part:8,template:"kitbuild4",url:"kitbuild_4",h2:"And finally, turn on the Kit",text:"Push the button on the Kit multiple times, until the LED is red.",segueButton:"IT'S ALIVE"},{index:18,part:9,template:"casing",url:"case_1",h2:"Next, we'll place it all in the casing",text:"Make sure you place it with the battery cable towards the bottom of the casing",image:"app/images/BOARDS-CUTOUT_0007_FRONT-eclosureBattSensor.png",segueButton:"CONTINUE"},{index:19,part:11,template:"comfirm",url:"confirm_build",h1:"WELL DONE",h4:"Time to connect it to the internet",segueButton:"CONTINUE"},{index:21,part:1,template:"wifi_enter",url:"wifi_enter",h2:"What network are we connecting it to?",h4:"We have to type it in manually...",input1:"Name of Wi-Fi",input1_error:"A name is required to connect to a network",input2:"Password",input2_error:"",segueButtonError:"CHECK THE FIELDS",segueButton:"IT'S READY",contextButton:"Try another way",contextButton2:"Ask for Help",continueButton:"CONTINUE"},{index:22,part:2,template:"handshake",url:"handshake",h2:"Now let's do some magic..",h4:"Hold up your kit and press it on the screen over the box below and press 'connect'. Make sure the blue side of the kit is facing you",handshakeLabel:"Place your kit here",waitLabel:"YOU CAN REMOVE YOUR DEVICE",segueButton:"CONNECT",continueButton:"CONTINUE"},{index:23,part:3,template:"wifi_check",url:"wifi_check",h2:"Oops, something went wrong...",h4:"It seems there is a problem. Notice that the Kit light is red, please retry the Wi-Fi name and password",segueButtonError:"CHECK THE FIELDS",contextButton:"Try another way",contextButton2:"Ask for Help",waitLabel:"WAIT",segueButton:"CONNECT",continueButton:"CONTINUE"},{index:24,part:4,template:"comfirm",url:"confirm_handshake",h1:"WELL DONE",h4:"You've connected the kit to the internet!",segueButton:"CONTINUE"},{index:30,part:4,template:"basic",url:"accesspoint_pre",h1:"LET'S TRY WITH A PHONE OR TABLET INSTEAD",h4:"This approach is more reliable. You will need a phone or tablet.",segueButton:"GOT IT"},{index:31,part:5,template:"prompted_entry",url:"accesspoint_1",h2:"On your mobile device, go to your Wi-Fi settings and connect to the Wi-Fi called:",h3_1:"The",em_1:" number",h3_2:" of the Kit, located in the",em_2:" bottom right corner",h3_3:" of your Kit.",h4:"If you do not see it, make sure your kit is powered on with a red LED.",promptedText:"SmartCitizen[...]",segueButton:"CONNECTED"},{index:32,part:6,template:"prompted_entry",url:"accesspoint_2",h2:"You should see this window on your mobile device",h3_1:"If that did not happen, open the browser on your device and go to",em_1:" www.MySCK.me",h4:"If it does not work, make sure you are connected to the wifi",promptedText:"SCKit.me",segueButton:"CONNECTED"},{index:33,part:6,template:"prompted_entry",url:"ap_final",h2:"Select your Wi-Fi from the list, and enter the password. When asked for your onboarding code submit:",h4:"If the submitted wifi and password are correct you will be redirected shortly, follow the instructions on www.MySCK.me",promptedText:"TOKEN HERE",segueButton:"DONE"},{index:40,part:1,template:"basic",url:"sensorName_prep",h1:"LET'S GIVE YOUR SENSOR AN IDENTITY",h4:"This will help us know where this data is coming from...",segueButtonError:"CHECK NAME",segueButton:"CONTINUE"},{index:41,part:2,template:"sensorName",url:"sensorName",h2:"What shall we name the sensor?",h4:"You can name it pretty much anything. This is how it will appear on the Smart Citizen map.",input1:"Enter the sensor name",input1_error:"The sensor needs a name",contextButton:"Choose a random name",segueButtonError:"CHECK NAME",segueButton:"DONE"},{index:50,part:1,template:"location_prep",url:"location_prep",h2:"Where will you install the sensor?",h4:"By pressing 'allow' on the pop up we can determine the current location of the sensor. You can manually adjust this later to anywhere you want to place the sensor.",segueButton:"DONE",continueButton:"DONE!",waitButton:"WAIT"},{index:51,part:2,template:"location_map",url:"location_map",h2:"If you want to adjust it or pin it elsewhere, you can do that here",h4:"Remember wherever your device goes, it will need wi-fi. Otherwise you'll have to go get it every now and again and connect it to your computer to sync the data",input1:"Enter an address",input1_error:"",segueButton:"ALL SET",continueButton:"ALL SET"},{index:52,template:"location_tags",url:"location_tags",h2:"Is there anything we should know about location?",h4:"Selecting from the tags below can help us make sense of the data, and compare it more accurately",segueButton:"All SET",continueButton:"All SET",tags:["Inside","Outside","Ground Floor","First Floor","Second Floor","Third Floor","Fourth Floor","Fifth Floor","Terrace","Garden","Balcony","Window","Residential","Commercial","Kitchen","Bedroom","Living Room","Bathroom"]},{index:53,part:3,template:"comfirm",url:"confirm_location",h1:"ALMOST THERE",h4:"Finally, let's save all this work we've done.",segueButton:"CONTINUE"},{index:90,part:1,template:"account1",url:"email",h2:"We can save the Kit with your email address",h4:"If you already have an account, we'll add it to that. If not, we'll quickly make a new one",segueButton:"CONTINUE",input1:"Put your email below",input1_error:"You must enter an email",segueButtonError:"CHECK EMAIL",continueButton:"CONTINUE"},{index:91,part:2,template:"login",url:"login",h2a:"Awesome, welcome back",h2b:"enter your password below to finish!",h4:"This will push all of your new Kit's data to your account",input1:"Password",input1_error:"",segueButtonError:"CHECK PASSWORD",segueButton:"CONTINUE",contextButton:"FORGOT PASSWORD"},{index:95,part:2,template:"make1",url:"username",h2:"Nice, so you're new to Smart Citizen?",h4:"Add a username to your profile, so users know who owns the sensor.",input1:"Enter a username",input1_error:"A username is required",contextButton:"Chose random name",segueButtonError:"CHECK USERNAME",segueButton:"CONTINUE"},{index:96,part:3,template:"make2",url:"password",h2:"Now, filly a password to secure everything",h4a:"the password has to be at least 8 characters long",h4b:"And one more time to make sure there are no mistakes",input1:"Password",input1_error:"The password must be at least 5 characters long",input1_error2:"You must enter a password",segueButtonError:"PASSWORDS MUST MATCH",segueButton:"ALL DONE!",continueButton:"ALL DONE!"},{index:100,part:4,template:"final",url:"final",h1:"ITS ALIVE!",h2:"You have successfully installed and connected the Smart Citizen Kit to the internet, and then added the kit to the global community of sensors",h4:"Visit SmartCitizen.me to see your Kit in action capturing data. Don't forget to read the manual for assembly instructions and good tips on placing your sensor in the wild",segueButton:"VISIT SMARTCITIZEN.ME"}],[{index:0,part:1,template:"landing",url:"landing",h1:"Bienvenido al Piloto de Making Sense!",h4:"Vamos a configurar el sensor Smart Citizen, y empezar a medir en breve",contextButton1:"ENGLISH",contextButton2:"CATALÀ",segueButton:"SIGUE EN CASTELLANO"},{index:1,part:2,template:"collaborators",url:"making_sense",companyLogo:"app/images/MS LOGO.png",h2:"Making Sense es un proyecto que ayuda a las personas a entender su entorno.",h4:"Queremos ayudarte a instalar sensores para entender la contaminación acústica. Tomando conciencia del problema, seremos capaces de abordarlo.",segueButton:"SUENA BIEN!"},{index:2,part:3,template:"collaborators",url:"smart_citizen",companyLogo:"app/images/SCK LOGO.png",h2:"Smart Citizen es un movimiento para la participación ciudadana utilizando las últimas tecnologías.",h4:"Smart Citizen crea herramientas abiertas para que los ciudadanos están mejor informado acerca del mundo a su alrededor.",segueButton:"CONTINÚA"},{index:3,part:4,template:"basic2",url:"smart_citizen_brief",image:"app/images/sck_glow.png",h2:"El Kit de Smart Citizen",h4:"Este sensor es el Kit de Smart Citizen para mediciones medioambientales. Mide sonido, calidad del aire, humedad y muchas cosas más",segueButton:"CONTINÚA"},{index:4,part:5,template:"basic2",url:"smart_citizen_brief2",image:"app/images/SCK_macbook.png",h2:"smartcitizen.me",h4:"El Kit envía todos los datos a la web de Smart Citizen. Es abierta y gratuita para todos, para ver, preguntar y jugar con ella...",segueButton:"VAMOS"},{index:10,part:1,template:"basic",url:"whats_in_the_box",h1:"CONFIGUREMOS EL SENSOR",h4:"En el Kit hay algunas piezas que tenemos que esamblar, revisemos que las tenemos todas",segueButton:"ESTOY LISTO"},{index:11,part:2,template:"selectparts",url:"kit_parts",h2:"Selecciona todas las piezas que has recibido",h4:"Tenemos que saberlo para que la puedas configrarlo sin problemas",part1:"Placa de Sensores",part1_desc:"Es donde están todos los sensores. Se conecta a la placa de datos, para que los sensores puedan transmitir lo que han medido.",part2:"Placa de Datos",part2_desc:"Es donde se procesan todos los datos. Cada vez que quieras conectar algo al Kit de Smart Citizen, tendrás que hacerlo en esta placa",part3:"Batería",part3_desc:"Es lo que alimenta el sensor. Tiene que ser cargada a menudo, especialmente si se usa durante un periodo de tiempo prolongado.",part4:"Cable USB",part4_desc:"Cuando el Kit necesita ser cargado, puedes utilizar este cable para conectar el Kit a tu ordenador o a un enchufe del mismo modo que tu móvil.",modalButton:"Entendido",contextButton:"Dónde está mi carcasa?",segueButton:"CONTINÚA",segueButtonError:"Te faltan piezas?",continueButton:"CONTINÚA",yesButton:"SI",noButton:"NO"},{index:12,part:3,template:"selectparts2",url:"carcasa",h2:"Para finalizar...",h4:"No es necesario tener la carcasa, pero es útil para proteger tu Kit contra la llúvia",part5:"Carcasa",part5_desc:"La carcasa es resistente al agua y permite colocar el dispositivo en diferentes superficies.",part6:"Espaciadores",part6_desc:"Situados entre las placas de sensores y de datos, mantienen las placas sujetas.",part7:"Tapa",part7_desc:"Cierra la carcasa y se utiliza para proteger el dispositivo de la lluvia. Asegurate de colocar los agujeros encima del sensor de sonido.",part8:"Sujetadores",part8_desc:"Se usan para fijar la tapa a la carcasa.",modalButton:"Entendido",contextButton:"Dónde está el mío?",segueButton:"CONTINÚA",segueButtonError:"Te faltan piezas?",continueButton:"CONTINÚA",yesButton:"SI",noButton:"NO"},{index:13,part:4,template:"comfirm",url:"confirm_parts",h1:"BIEN HECHO",h4:"Ahora vamos a ponerlo todo junto",segueButton:"CONTINÚA"},{index:14,part:5,template:"kitbuild1",url:"kitbuild_1",h2:"Primero, los separadores...",text:"Coloca un separador en cada agujero de la placa de sensores",segueButton:"DONE"},{index:15,part:6,template:"kitbuild2",url:"kitbuild_2",h2:"Segundo, conectamos los sensores",text:"Conecta las clavijas de la placa de sensores en la placa de datos",segueButton:"HECHO"},{index:16,part:7,template:"kitbuild3",url:"kitbuild_3",h2:"Vamos a darle alimetación",text:"Conecta la batería con la placa de datos",segueButton:"HECHO"},{index:17,part:8,template:"kitbuild4",url:"kitbuild_4",h2:"Y por último, enciende el Kit",text:"Presiona el botón en el Kit, hasta que la luz del esté en rojo.",segueButton:"ESTÁ VIVO"},{index:18,part:9,template:"casing",url:"case_1",h2:"Después, colocalo todo dentro de la carcasa",text:"Asegurate de colocar el Kit con el cable de la batería hacia la parte inferior de la carcasa",image:"app/images/BOARDS-CUTOUT_0007_FRONT-eclosureBattSensor.png",segueButton:"CONTINÚA"},{index:19,part:11,template:"comfirm",url:"confirm_build",h1:"BIEN HECHO",h4:"Es la hora de conectarse a Internet",segueButton:"CONTINÚA"},{index:21,part:1,template:"wifi_enter",url:"wifi_enter",h2:"Con qué red wi-fi vas a conectarte a internet?",h4:"Debemos introducirla manualmente...",input1:"Nombre del Wi-Fi",input1_error:"Se requiere un nombre para conectarse a la red",input2:"Contraseña",input2_error:"",segueButtonError:"COMPRUEBA LOS CAMPOS",segueButton:"ESTÁ LISTO",contextButton:"Pruébalo de otra manera",contextButton2:"Pide ayuda",continueButton:"CONTINÚA"},{index:22,part:2,template:"handshake",url:"handshake",h2:"Ahora vamos a hacer algo de magia...",h4:"Sostén tu Kit, sitúalo en la pantalla encima del cuadrado azul aquí abajo y presiona “conectar”. Asegurate de que el lado azul del Kit está hacia ti.",handshakeLabel:"Coloque su Kit aquí",waitLabel:"YA PUEDES QUITAR EL KIT",segueButton:"CONECTAR",continueButton:"CONTINÚA"},{index:23,part:3,template:"wifi_check",url:"wifi_check",h2:"Oops, algo ha salido mal...",h4:"Parece que hay un problema. Si la luz del Kit está en rojo, por favor vuelve a introducir el nombre del Wi-Fi y la contraseña",segueButtonError:"COMPRUEBA LOS CAMPOS",contextButton:"Pruébalo de otra manera",contextButton2:"Pide ayuda",waitLabel:"ESPERE",segueButton:"CONECTAR",continueButton:"CONTINÚA"},{index:24,part:4,template:"comfirm",url:"confirm_handshake",h1:"BIEN HECHO",h4:"Ya tienes tu Kit conectado a internet!",segueButton:"CONTINÚA"},{index:30,part:4,template:"basic",url:"accesspoint_pre",h1:"VAMOS A PROBARLO CON TU MÓVIL O TABLET",h4:"Este método es más robusto. Coge cualquier dispositivo móvil, smartphone o tablet.",segueButton:"ENTENDIDO"},{index:31,part:5,template:"prompted_entry",url:"accesspoint_1",h2:"En tu dispositivo móvil, accede a la configuración Wi-Fi y conecta a la red Wi-Fi llamada:",h3_1:"El",em_1:" número",h3_2:" de tu Kit, ubicado en",em_2:" la esquina inferior",h3_3:" de tu Kit.",h4:"Si no lo ves, asegurate que tu Kit está encendido y la luz está en rojo.",promptedText:"SmartCitizen[...]",segueButton:"CONECTADO"},{index:32,part:6,template:"prompted_entry",url:"accesspoint_2",h2:"Deberías ver esta ventana en tu móvil o tablet",h3_1:"Si no aparece, abre el navegador de tu móvil i visita",em_1:" www.mysck.me",h4:"Si aún no funciona comprueva que estás conectado al Wi-Fi",promptedText:"mysck.me",segueButton:"CONECTADO"},{index:33,part:6,template:"prompted_entry",url:"ap_final",h2:"Selecciona tu Wi-Fi en la lista e introduce la contraseña. Cuando te pregunte por el código de onboarding escribe:",h4:"Si el wifi y la contraseña presentados son correctos, se le redirigirá en breve, sigue las instrucciones en www.mysck.me",promptedText:"EL CÓDIGO AQUÍ",segueButton:"LISTO"},{index:40,part:1,template:"basic",url:"sensorName_prep",h1:"VAMOS A DARLE UNA IDENTIDAD A TU SENSOR",h4:"Esto nos ayudará a saber de dónde vienen los datos...",segueButtonError:"VERIFICAR NOMBRE",segueButton:"CONTINÚA"},{index:41,part:2,template:"sensorName",url:"sensorName",h2:"Qué nombre le vamos a dar a tu Kit?",h4:"Le puedes dar cualquier nombre. Así aparecerá en el mapa de Smart Citizen.",input1:"Introduce el nombre del Kit",input1_error:"El Kit necesita un nombre",contextButton:"Elige cualquier nombre",segueButtonError:"VERIFICAR NOMBRE",segueButton:"HECHO"},{index:50,part:1,template:"location_prep",url:"location_prep",h2:"Donde instalarás tu Kit?",h4:"Presionando 'permite' en la ventana de diálogo podemos determinar la ubicación actual del Kit. Después se puede ajustar manualmente a cualquier lugar en el que quieras ubicar el sensor.",segueButton:"HECHO",continueButton:"HECHO",waitButton:"ESPERA"},{index:51,part:2,template:"location_map",url:"location_map",h2:"Si deseas ajustarlo a otro lugar, puedes hacerlo aquí",h4:"Recuerda que donde vaya tu dispositivo, necesitará Wi-fi.",input1:"Introduce una dirección",input1_error:"",segueButton:"LISTO",continueButton:"LISTO"},{index:52,template:"location_tags",url:"location_tags",h2:"Selecciona las palabras que mejor describen la ubicación de tu sensor.",h4:"Esto  ayudarà a otros usuarios entender mejor los datos que estás midiendo",segueButton:"TODO CONFIGURADO",continueButton:"TODO CONFIGURADO",tags:["Inside","Outside","Ground Floor","First Floor","Second Floor","Third Floor","Fourth Floor","Fifth Floor","Terrace","Garden","Balcony","Window","Residential","Commercial","Kitchen","Bedroom","Living Room","Bathroom"]},{index:53,part:3,template:"comfirm",url:"confirm_location",h1:"CASI ESTAMOS",h4:"Finalmente, guardemos todo el trabajo que hemos hecho.",segueButton:"CONTINÚA"},{index:90,part:1,template:"account1",url:"email",h2:"Podemos guardar el Kit con tu dirección de correo electrónico",h4:"Si ya tienes una cuenta, lo añadiremos a esta. Si no la tienes, rapidamente crearemos una nueva",segueButtonError:"CONSULTAR CORREO ELECTRÓNICO",segueButton:"CONTINÚA",input1:"Pon tu correo electrónico a continuación",input1_error:"Debes poner un correo electrónico",continueButton:"CONTINÚA"},{index:91,part:2,template:"login",url:"login",h2a:"Excelente, bienvenido!",h2b:"Ingresa tu contraseña abajo para terminar!",h4:"Esto llevará todos los datos del Kit a tu cuenta",input1:"Contraseña",input1_error:"",segueButtonError:"VERIFICAR CONTRASEÑA",segueButton:"CONTINÚA",contextButton:"OLVIDASTE CONTRASEÑA"},{index:95,part:2,template:"make1",url:"username",h2:"Guay, eres nuevo en Smart Citizen?",h4:"Agrega un nombre de usuario a tu perfil, así los usuarios sabrán quien es el dueño del Kit.",input1:"Introduce un nombre de usuario",input1_error:"Es necesario proporcionar un nombre de usuario",contextButton:"Elige un nombre cualquiera",segueButtonError:"VERIFICAR NOMBRE DE USUARIO",segueButton:"CONTINÚA"},{index:96,part:3,template:"make2",url:"password",h2:"Ahora, escribe una contraseña para asegurarlo todo",h4a:"La contraseña debe tener al menos 8 caracteres de largo",h4b:"Y una vez más para asegurarnos de que no hay errores",input1:"Contraseña",input1_error:"La contraseña debe tener al menos 5 caracteres de largo",input1_error2:"Tienes que introducir una contraseña",segueButtonError:"LAS CONTRASEÑAS DEBEN COINCIDIR",segueButton:"TODO LISTO!",continueButton:"TODO LISTO!"},{index:100,part:4,template:"final",url:"final",h1:"ESTÁ VIVO!",h2:"Has instalado y conectado satisfactoriamente tu Kit Smart Citizen a internet y agregado el Kit a la comunidad global de sensores",h4:"Visita SmartCitizen.me para ver tu Kit en acción, capturando datos. No olvides leer el manual para las instrucciones de ensamblaje y consejos para instalar tu Kit en exteriores",segueButton:"VISITAR SMARTCITIZEN.ME"}],[{index:0,part:1,template:"landing",url:"landing",h1:"Benvingut al Pilot de Making Sense!",h4:"Configura el teu Smart Citizen Kit i comença a medir en un tres i no res",segueButton:"CONTINUA EN CATALÀ!",contextButton1:"ENGLISH",contextButton2:"CASTELLANO"},{index:1,part:2,template:"collaborators",url:"making_sense",companyLogo:"app/images/MS LOGO.png",h2:"Making Sense és un projecte per ajudar a la gent a entendre millor el seu entorn.",h4:"Volem ajudar-te a instal·lar sensors per entendre millor la contaminació acústica. Prenent conciència del problema serem capaços de resoldre'l.",segueButton:"SONA BÉ!"},{index:2,part:3,template:"collaborators",url:"smart_citizen",companyLogo:"app/images/SCK LOGO.png",h2:"Smart Citizen és un moviment per la participació ciutadana utilitzant les últimes tecnologies.",h4:"Smart Citizen crea eines obertes per ajudar els ciutadans a entendre millor el seu entorn.",segueButton:"CONTINUA"},{index:3,part:4,template:"basic2",url:"smart_citizen_brief",image:"app/images/sck_glow.png",h2:"Smart Citizen Kit",h4:"Aquest sensors és un Smart Citizen Kit. Mesura soroll, qualitat de l'aire, humitat, i moltes coses més.",segueButton:"CONTINUA"},{index:4,part:5,template:"basic2",url:"smart_citizen_brief2",image:"app/images/SCK_macbook.png",h2:"smartcitizen.me",h4:"El sensor envia totes les mesures a la web d'Smart Citizen. És lliure i oberta perquè tothom pugui veure i qüestionar les dades...",segueButton:"FEM-HO"},{index:10,part:1,template:"basic",url:"whats_in_the_box",h1:"ANEM A INSTALAR EL SENSOR",h4:"Hi han algunes peces que cal muntar per instalar el Kit, revisa que les tens totes.",
segueButton:"ESTIC APUNT"},{index:11,part:2,template:"selectparts",url:"kit_parts",h2:"Seleccionna totes les peces que has rebut",h4:"Hem d'assegurar-nos'en per poder seguir amb la instalació",part1:"Sensor Board",part1_desc:"Aquesta placa conté tots els sensors. Es connecta a la més gran de manera que els sensors puguin transmetre les dades.",part2:"Hardware Board",part2_desc:"Aquí és on tot el processament es duu a terme. Cada vegada que vulguis connectar algun sensor l'Smart Citizen Kit, serà en aquesta placa",part3:"Bateria",part3_desc:"Això alimenta el sensor. Cal carregar-la sovint, sobretot després de periodes d'ús continuats.",part4:"Cable de càrrega",part4_desc:"Quan vulguis carregar el Kit, pots conectar el Kit a un ordinador o carregador USB, tal com ho fas amb el teu móbil.",modalButton:"Entès",contextButton:"On és la carcassa?",segueButton:"CONTINUA",segueButtonError:"Are you missing parts?",continueButton:"CONTINUA",yesButton:"SÍ",noButton:"NO"},{index:12,part:3,template:"selectparts2",url:"case",h2:"Finally...",h4:"La carcassa no és indispensable, però és útil per protegir el Kit contra la pluja",part5:"Carcassa",part5_desc:"La carcassa és resistent a l'aigua i permet col·locar el dispositiu en diferents superfícies.",part6:"Espaiadors",part6_desc:"Situats entre les plaques de sensors i de dades, mantenen les plaques subjectes",part7:"Tapa",part7_desc:"Tanca la carcassa i s'utilitza per protegir el dispositiu de la pluja. Assegura't de col·locar els forats sobre del sensor de so.",part8:"Fixadors",part8_desc:"S'usen per fixar la tapa a la carcassa.",modalButton:"Entès",contextButton:"On és el meu?",segueButton:"CONTINUA",segueButtonError:"Et falten peces?",continueButton:"CONTINUA",yesButton:"SÍ",noButton:"NO"},{index:13,part:4,template:"comfirm",url:"confirm_parts",h1:"BEN FET",h4:"Ara anem a muntar-ho tot junt",segueButton:"CONTINUA"},{index:14,part:5,template:"kitbuild1",url:"kitbuild_1",h2:"Primer, els separadors...",text:"Col·loca un separador en cada forat de la placa de sensors",segueButton:"FET"},{index:15,part:6,template:"kitbuild2",url:"kitbuild_2",h2:"Després, connectem els sensor",text:"Connecta els pins de la placa de sensors a la placa de dades",segueButton:"FET"},{index:16,part:7,template:"kitbuild3",url:"kitbuild_3",h2:"Donem-li alimetació",text:"Connecta la bateria amb la placa de dades",segueButton:"FET"},{index:17,part:8,template:"kitbuild4",url:"kitbuild_4",h2:"I finalment, encén el Kit",text:"Pressiona el botó del Kit, fins que el color del llum sigui vermell.",segueButton:"FUNCIONA!"},{index:18,part:9,template:"casing",url:"case_1",h2:"A continuació posa-ho tot dins la carcassa",text:"Assegura't de col·locar el Kit amb el cable de la bateria cap a la part inferior de la carcassa",image:"app/images/BOARDS-CUTOUT_0007_FRONT-eclosureBattSensor.png",segueButton:"CONTINUA"},{index:19,part:11,template:"comfirm",url:"confirm_build",h1:"BEN FET",h4:"És l'hora de connectar-se a Internet",segueButton:"CONTINUA"},{index:21,part:1,template:"wifi_enter",url:"wifi_enter",h2:"A quina xarxa Wi-Fi vols connectar el teu Kit a internet?",h4:"Hauràs d'escriure-la manualment...",input1:"Nom de la xarxa Wi-Fi",input1_error:"Has d'escriure el nom d'una xarxa Wi-Fi",input2:"Contrasenya",input2_error:"",segueButtonError:"COMROVA ELS CAMPS",segueButton:"APUNT!",contextButton:"Prova-ho d'una altre manera...",contextButton2:"Demana ajuda",continueButton:"CONTINUA"},{index:22,part:2,template:"handshake",url:"handshake",h2:"Ara  farem una mica de màgia.",h4:"Sostén el teu Kit contra la pantalla sobre del quadrat blau que apareix a sota i prem “conectar”. Assegura't que el costat blau del Kit mira cap a tu.",handshakeLabel:"Coloca el teu Kit aquí",waitLabel:"JA POTS TREURE EL KIT",segueButton:"CONECTA",continueButton:"CONTINUA"},{index:23,part:3,template:"wifi_check",url:"wifi_check",h2:"Oops, alguna cosa ha fallat...",h4:"Sembla que hi ha un problema. Fixa't si la llum del Kit segueix vermella, siusplau torna a escriure el nom i la contraseña del teu Wi-Fi",segueButtonError:"COMPROVA ELS CAMPS",contextButton:"Prova-ho d'una altra manera",contextButton2:"Demana ajuda",waitLabel:"ESPERA",segueButton:"CONECTA",continueButton:"CONTINUA"},{index:24,part:4,template:"comfirm",url:"confirm_handshake",h1:"BEN FET!",h4:"Has conectat el teu Kit a Internet!",segueButton:"CONTINUA"},{index:30,part:4,template:"basic",url:"accesspoint_pre",h1:"ANEM A PROVAR-HO AMB EL TEU MÒBIL O TABLET",h4:"Aquest mètode és més robust. Necessites qualsevol dispositiu móvil, smartphone o tablet.",segueButton:"ENTÈS"},{index:31,part:5,template:"prompted_entry",url:"accesspoint_1",h2:"Des del teu dispositiu mòbil acedeix a la configuració Wi-Fi y conecta't a la xarxa Wi-Fi:",h3_1:"El",em_1:" número",h3_2:" del teu Kit, es troba",em_2:" a la cantonada inferior",h3_3:" del teu kit.",h4:"Si no trobes la xarxa, assegura't que el teu Kit està encès i el llum és vermell.",promptedText:"SmartCitizen[...]",segueButton:"CONNECTAT"},{index:32,part:6,template:"prompted_entry",url:"accesspoint_2",h2:"Hauries de veure aquesta pantalla al teu mòbil o tablet",h3_1:"Si no apareix obre el nagegador del teu móvil i visita",em_1:" www.mysck.me",h4:"Si encara no funciona comproba que estàs connectat al Wi-Fi",promptedText:"mysck.me",segueButton:"CONNECTAT"},{index:33,part:6,template:"prompted_entry",url:"ap_final",h2:"Selecciona el teu Wi-Fi a la lista i introdueix la contraseña. Quan et pregunti pel codi de l'onboarding escriu:",h4:"Si el Wi-Fi y la contrasenya son correctos, seràs redirigit en breu. Segueix les instrucions a www.mysck.me",promptedText:"EL CÓDI ÉS AQUÍ",segueButton:"LLEST"},{index:40,part:1,template:"basic",url:"sensorName_prep",h1:"ÉS L'HORA DE DONAR-LI UN NOM AL TEU SENSOR",h4:"Això ens ajudarà a saber d'on venen les dades...",segueButtonError:"ESCULL UN NOM",segueButton:"CONTINUA"},{index:41,part:2,template:"sensorName",url:"sensorName",h2:"Quin nom li vols donar al teu Kit?",h4:"Li pots dir com vulguis. Així és com apareixerà al mapa d'Smart Citizen.",input1:"Escriu el nom del Kit",input1_error:"El Kit necessita un nom",contextButton:"Escull un nom aleatori",segueButtonError:"REPASSA EL NOM",segueButton:"DONE"},{index:50,part:1,template:"location_prep",url:"location_prep",h2:"On instal·laràs el Kit?",h4:"Pressionant 'permet' a la finestra de diàleg podrem determinar la ubicació actual del Kit. Després pots ajustar-la manualment a qualsevol lloc on vulguis situar el Kit.",segueButton:"FET",continueButton:"FET!",waitButton:"ESPERA"},{index:51,part:2,template:"location_map",url:"location_map",h2:"Si vols ajustar la ubicació ho pot fer aquí.",h4:"Recorda que el teu dispositiu necessita tenir accés Wi-Fi. Si no és així les dades no es guardaràn en temps real a la plataforma.",input1:"Introdueix la teva adreça",input1_error:"",segueButton:"FET",continueButton:"FET"},{index:52,template:"location_tags",url:"location_tags",h2:"Selecciona les paraules que millor descriuen el lloc on has instal·lat el Kit",h4:"Això ens ajudarà a saber el que estàs medint",segueButton:"TOT APUNT",continueButton:"TOT APUNT",tags:["Inside","Outside","Ground Floor","First Floor","Second Floor","Third Floor","Fourth Floor","Fifth Floor","Terrace","Garden","Balcony","Window","Residential","Commercial","Kitchen","Bedroom","Living Room","Bathroom"]},{index:53,part:3,template:"comfirm",url:"confirm_location",h1:"GAIREBÉ ESTEM",h4:"Finalment, és hora de guardar tot el que has configurat",segueButton:"CONTINUA"},{index:90,part:1,template:"account1",url:"email",h2:"Podem guardar el Kit amb la teva adreça de correu electrònic",h4:"Si ja tens un compte a Smart Citizen l'afegirem allà. Si no, we'll quickly make a new one",segueButton:"CONTINUA",input1:"Afegeix el teu correu a continuació",input1_error:"Cal que afegeixis una adreça",segueButtonError:"COMPROVA L'ADREÇA",continueButton:"CONTINUA"},{index:91,part:2,template:"login",url:"login",h2a:"Genial, ben tornat!",h2b:"Escriu la teva contrasenya a sota per acabar!",h4:"Això enviarà a la plataforma totes les dades que has configurat sobre el teu Kit!",input1:"Contrasenya",input1_error:"",segueButtonError:"REPASSA LA CONTRASENYA",segueButton:"CONTINUA",contextButton:"Oblivar CONTRASENYA"},{index:95,part:2,template:"make1",url:"username",h2:"Guai, sembla que ets nou a Smart Citizen?",h4:"Afegeix un nom d'usuari al teu perfil, d'aquesta manera els altres usuaris sabràn de qui és el Kit.",input1:"Afegeix un nom d'usuari",input1_error:"El nom d'usuari és obligatori",contextButton:"Escull un nom aleatori",segueButtonError:"VALIDA EL NOM D'USUARI",segueButton:"CONTINUA"},{index:96,part:3,template:"make2",url:"password",h2:"Ara, afegeix una contrasenya per protegir el teu usuari",h4a:"La contrasenya ha de tenir com a mínim 8 caràcters",h4b:"I una vegada més per assegurar-nos que no hi han errors.",input1:"Password",input1_error:"La contrasenya ha de tenir com a mínim 5 caràcters",input1_error2:"Has d'introduir una contrasenya",segueButtonError:"LES CONTRASENYES NO COINCIDEIXEN",segueButton:"LLESTOS!",continueButton:"LLESTOS!"},{index:100,part:4,template:"final",url:"final",h1:"ÉS VIU!",h2:"El Kit ha estat configurat amb èxit i ja està publicant a Smart Citizen, la comunitat global de sensors",h4:"Visita SmartCitizen.me  per veure el teu Kit en acció publicant dades. No t'oblidis de llegir el el manual amb les instrucciones d'instal·lació i consell sobre com col·locar-lo a l'exterior.",segueButton:"VISIT SMARTCITIZEN.ME"}]],o=[[{title:"Uh oh",body:"It seems like you are missing parts of the kit. If that’s so, let’s notify the team and they’ll get back to you as soon as possible",image:"app/images/alert.svg",button:"Notify the team!",action:"email"}],[],[]];this.modalBox=function(e,t){var r=0;return"esp"==t?(r=1,console.log("loading Spanish")):"cat"==t?(r=2,console.log("loading Catalan")):console.log("loading English"),o[r][e]},this.prep=function(r,n){var a=0;return"esp"==n?(a=1,console.log("loading Spanish")):"cat"==n?(a=2,console.log("loading Catalan")):console.log("loading English"),t(e(r,a),a)},this.nextPage=function(t,r){return 4==t?"whats_in_the_box":19==t?e(t+2).url:23==t?"handshake":24==t?"sensorName_prep":41==t?"location_prep":53==t?"email":90==t?r?"login":"username":91==t?"final":96==t?"final":e(t+1).url},this.previousPage=function(t,r){return 10==t?"smart_citizen_brief2":21==t?e(t-2).url:30==t?"wifi_check":40==t?"confirm_handshake":50==t?"sensorName":90==t?"confirm_location":95==t?"email":100==t?r?"login":"password":e(t-1).url},this.templateRowCounter=function(t){var r;switch(e(t).template){case"basic":case"pair1":r=2;break;case"sensorName":case"final":case"make1":case"make2":case"wifi_check":case"landing":case"login":r=4;break;default:r=3}return r}}).controller("baseController",["$scope","$stateParams","scopePayload","AnimationService","$rootScope",function(e,t,r,n,a){a.lang=t.lang,e.$parent.payload=r,n.animate(r.index),e.$parent.segueControl="ready",e.$parent.smartCitizenToggle=""}]),angular.module("app").config(["$stateProvider","$urlRouterProvider","$locationProvider","RestangularProvider",function(e,t,r,n){e.state("wizard",{url:"/wizard",templateUrl:"app/wizard/wizard.html",controller:"wizardCtrl",resolve:{session:["platform","$state",function(e,t){return e.getSession().then(function(t){return e.setSession(t),t},function(){t.go("unavailable")})}]}}).state("wizard.landing",{url:"/landing?lang",templateUrl:"app/wizard/landing.html",controller:"landingController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(0,t.lang)}]}}).state("wizard.making_sense",{url:"/making_sense?lang",templateUrl:"app/wizard/collaborators.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(1,t.lang)}]}}).state("wizard.smart_citizen",{url:"/smart_citizen?lang",templateUrl:"app/wizard/collaborators.html",controller:"smartCitizenController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(2,t.lang)}]}}).state("wizard.smart_citizen2",{url:"/smart_citizen_brief?lang",templateUrl:"app/wizard/basic2.html",controller:"smartCitizenController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(3,t.lang)}]}}).state("wizard.basic2",{url:"/smart_citizen_brief2?lang",templateUrl:"app/wizard/basic2.html",controller:"smartCitizenController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(4,t.lang)}]}}).state("wizard.basic",{url:"/whats_in_the_box?lang",templateUrl:"app/wizard/basic.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(10,t.lang)}]}}).state("wizard.selectparts",{url:"/kit_parts?lang",templateUrl:"app/wizard/selectparts.html",controller:"stateCtlr",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(11,t.lang)}]}}).state("wizard.selectparts2",{url:"/case?lang",templateUrl:"app/wizard/selectparts2.html",controller:"stateCtlr",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(12,t.lang)}]}}).state("wizard.confirm_parts",{url:"/confirm_parts?lang",templateUrl:"app/wizard/confirm.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(13,t.lang)}]}}).state("wizard.kitbuild1",{url:"/kitbuild_1?lang",templateUrl:"app/wizard/kitbuild1.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(14,t.lang)}]}}).state("wizard.kitbuild2",{url:"/kitbuild_2?lang",templateUrl:"app/wizard/kitbuild2.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(15,t.lang)}]}}).state("wizard.kitbuild3",{url:"/kitbuild_3?lang",templateUrl:"app/wizard/kitbuild3.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(16,t.lang)}]}}).state("wizard.kitbuild4",{url:"/kitbuild_4?lang",templateUrl:"app/wizard/kitbuild4.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(17,t.lang)}]}}).state("wizard.case1",{url:"/case_1?lang",templateUrl:"app/wizard/casing.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(18,t.lang)}]}}).state("wizard.confirm_build",{url:"/confirm_build?lang",templateUrl:"app/wizard/confirm.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(19,t.lang)}]}}).state("wizard.accesspoint_pre",{url:"/accesspoint_pre?lang",templateUrl:"app/wizard/basic.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(30,t.lang)}]}}).state("wizard.accesspoint_1",{url:"/accesspoint_1?lang",templateUrl:"app/wizard/prompted_entry.html",controller:"accesspointController_base",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(31,t.lang)}]}}).state("wizard.accesspoint_2",{url:"/accesspoint_2?lang",templateUrl:"app/wizard/prompted_entry2_image.html",controller:"accesspointController_base",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(32,t.lang)}]}}).state("wizard.ap_final",{url:"/ap_final?lang",templateUrl:"app/wizard/prompted_entry.html",controller:"accesspointController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(33,t.lang)}]}}).state("wizard.sensorName_prep",{url:"/sensorName_prep?lang",templateUrl:"app/wizard/basic.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(40,t.lang)}]}}).state("wizard.sensorName",{url:"/sensorName?lang",templateUrl:"app/wizard/sensorName.html",controller:"nameCtlr",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(41,t.lang)}]}}).state("wizard.location_prep",{url:"/location_prep?lang",templateUrl:"app/wizard/location_prep.html",controller:"locationController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(50,t.lang)}]}}).state("wizard.location_map",{url:"/location_map?lang",templateUrl:"app/wizard/location_map.html",controller:"locationController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(51,t.lang)}]}}).state("wizard.location_tags",{url:"/location_tags?lang",templateUrl:"app/wizard/location_tags.html",controller:"locationController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(52,t.lang)}]}}).state("wizard.confirm_location",{url:"/confirm_location?lang",templateUrl:"app/wizard/confirm.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(53,t.lang)}]}}).state("wizard.wifi_enter",{url:"/wifi_enter?lang",templateUrl:"app/wizard/wifi_enter.html",controller:"handshakeController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(21,t.lang)}]}}).state("wizard.handshake",{url:"/handshake?lang",templateUrl:"app/wizard/handshake.html",controller:"handshakeController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(22,t.lang)}]}}).state("wizard.wifi_check",{url:"/wifi_check?lang",templateUrl:"app/wizard/wifi_check.html",controller:"handshakeController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(23,t.lang)}]}}).state("wizard.confirm_handshake",{url:"/confirm_handshake?lang",templateUrl:"app/wizard/confirm.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(24,t.lang)}]}}).state("wizard.account1",{url:"/email?lang",templateUrl:"app/wizard/account1.html",controller:"accountController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(90,t.lang)}]}}).state("wizard.login",{url:"/login?lang",templateUrl:"app/wizard/login.html",controller:"accountController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(91,t.lang)}]}}).state("wizard.account2",{url:"/username?lang",templateUrl:"app/wizard/make_account1.html",controller:"accountController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(95,t.lang)}]}}).state("wizard.account3",{url:"/password?lang",templateUrl:"app/wizard/make_account2.html",controller:"accountController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(96,t.lang)}]}}).state("wizard.final",{url:"/final?lang",templateUrl:"app/wizard/final.html",controller:"finalController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(100,t.lang)}]}}).state("unavailable",{url:"/unavailable?lang",templateUrl:"app/wizard/unavailable.html",controller:"baseController",resolve:{scopePayload:["SegueService","$stateParams",function(e,t){return e.prep(0,t.lang)}]}}),t.otherwise("/wizard/landing?lang=cat"),n.setBaseUrl("https://api.smartcitizen.me/v0"),r.html5Mode({enabled:!0,requireBase:!1}).hashPrefix("!")}]),angular.module("app").factory("platform",["$rootScope","SegueService","Restangular",function(e,t,r){function n(e){y.OnboardingSession=e.onboarding_session,r.setDefaultHeaders(y)}function a(e){y.Authorization="Bearer "+e.access_token,r.setDefaultHeaders(y)}function o(){return r.all("onboarding/device").post({})}function i(e){return e.user_tags_array&&(e.user_tags=e.user_tags_array.toString()),r.one("onboarding/device").patch(e)}function s(e){return console.log("calling bake"),r.all("onboarding/register").post({})}function l(e){var t={email:e};return r.all("onboarding/user").post(t)}function u(e){return r.all("sessions").post(e)}function c(e){return r.all("users").post(e)}function p(){g=io.connect("wss://smartcitizen.xyz")}function h(e){g||p(),g.on("data-received",e)}function d(e,t){h(function(r){e==r.device_id&&t.$emit("published",r)})}function f(e){g||p(),g.on("token-received",e)}function m(e,t){f(function(r){e==r.device_token&&t.$emit("token",r)})}var g,y={};return{setSession:n,setAuth:a,getSession:o,updateDevice:i,bakeDevice:s,checkEmail:l,login:u,createUser:c,listenDevice:d,listenToken:m}}]),angular.module("app").controller("nameCtlr",["$scope","scopePayload","AnimationService",function(e,t,r){function n(e){return Math.floor(Math.random()*(e.length-0))}function a(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function o(){e.$parent.segueControl="ready"}function i(){e.$parent.segueControl="blocked"}e.$parent.payload=t,r.animate(t.index);var s=[],l=[];s.push.apply(s,["mushroom","pillow","crocodile","eggnog","sailboat","towel","racer","airship","cow","tour","stack","berry","self","substance","note","stag","wing","official","shadow","clank","yam","anagram","celery","spark","waiter","diner","parent","playground"]),l.push.apply(l,["fast","giant","elite","loving","cultured","slim","rare","silly","bouncy","warm","silky","spotted","yummy","roasted","outstanding","friendly","ritzy","familiar","neighborly","marvelous","six","future","long","lively","satisfying"]),e.generateName=function(){var t=a(l[n(l)])+" "+a(s[n(s)])+" "+a(s[n(s)]);e.$parent.submittedData.deviceData.name=t,e.name=t,o()},e.listener=function(){"undefined"!=typeof e.name&&e.name.length>3?(e.$parent.submittedData.deviceData.name=e.name,o()):i()},i()}]),angular.module("app").config(["uiGmapGoogleMapApiProvider",function(e){e.configure({key:"AIzaSyDgSvUrtmsNLkoaK1mYlyU3eVbByMlE4w4",v:"3.20",libraries:"weather,geometry,visualization"})}]).controller("locationController",["$scope","uiGmapIsReady","$geolocation","scopePayload","AnimationService",function(e,t,r,n,a){function o(t,r,n){e.$parent&&(e.$parent.map={center:{latitude:t.latitude,longitude:t.longitude},zoom:n,marker:{events:{dragend:function(t,r,n,a){o(n.coords,n.coords,e.$parent.map.zoom)}},location:{latitude:r.latitude,longitude:r.longitude}}},i(e.$parent.map.marker.location))}function i(t){"undefined"!=typeof t.latitude&&(s(),e.$parent.submittedData.deviceData.latitude=t.latitude,e.$parent.submittedData.deviceData.longitude=t.longitude)}function s(){e.payload.segueButton=e.payload.continueButton,e.$parent.segueControl="ready"}console.log(e.$parent.submittedData.deviceData.user_tags_array),e.$parent.payload=n,e.locationTags=["park","beach","school","street","woods","residential","commercial","plaza","rural","busy","calm","terrace","balcony","window","garden","bicycle"],e.tagStates=Array.apply(null,Array(e.locationTags.length)).map(String.prototype.valueOf,""),(e.$parent.payload.url="location_tags")?(e.locationTags=n.tags,e.$parent.segueControl="ready"):(e.$parent.segueControl="blocked",e.payload.segueButton=e.payload.waitButton);var l={zoom:12,center:{latitude:41.396867,longitude:2.194351}};a.animate(n.index),t.promise(1).then(function(){}),r.watchPosition({timeout:50,maximumAge:25,enableHighAccuracy:!0}),e.$parent.pos=r.position,e.$parent.$watch("pos.coords",function(t,r){if(e.$parent&&e.$parent.pos&&r,"undefined"==typeof t)o(l.center,l.center,l.zoom);else{var n=t,a=n,i=18;o(a,n,i)}}),e.tagToggle=function(t){var r=e.locationTags.indexOf(t);"active"==e.tagStates[r]?(e.tagStates[r]="",e.$parent.submittedData.deviceData.user_tags_array.splice(e.$parent.submittedData.deviceData.user_tags_array.indexOf(t),1)):(e.$parent.submittedData.deviceData.user_tags_array.push(e.locationTags[r]),e.tagStates[r]="active")},e.autoCompleteListener=function(){if("undefined"!=typeof e.autocomplete&&"undefined"!=typeof e.autocomplete.geometry){var t={latitude:e.autocomplete.geometry.location.lat(),longitude:e.autocomplete.geometry.location.lng()};o(t,t,17)}}}]),angular.module("app").controller("landingController",["$scope","scopePayload","AnimationService","$rootScope","$stateParams","$state",function(e,t,r,n,a,o){function i(e){"ENGLISH"==e.contextButton1&&s.push("eng"),"CASTELLANO"==e.contextButton1&&s.push("esp"),"CATALÁ"==e.contextButton1&&s.push("cat"),"ENGLISH"==e.contextButton2&&s.push("eng"),"CASTELLANO"==e.contextButton2&&s.push("esp"),"CATALÁ"==e.contextButton2&&s.push("cat")}n.lang=a.lang,e.$parent.payload=t,r.animate(t.index),e.$parent.segueControl="ready",e.$parent.smartCitizenToggle="";var s=[];i(t),console.log(s),e.languageChangeSegue=function(e){o.go("wizard.making_sense",{lang:s[e]})}}]),angular.module("app").controller("handshakeController",["$scope","scopePayload","AnimationService","$rootScope","platform","$state","$interval","$timeout","$stateParams",function(e,t,r,n,a,o,i,s,l){function u(){return q+=1,e.loadingPercentage=q/(4*z.length)*100,q/(4*z.length)*100}function c(e,t){var r=e*(255/(t-1)),n=255*Math.pow(r/255,1/I);return"rgb("+Math.round(n)+","+Math.round(n)+","+Math.round(n)+")"}function p(e){H.style.setProperty("background-color",c(e,P)),console.log(u())}function h(e){e=parseInt(e),e==B?(B=P+1,F.push(O)):(F.push(e),B=e)}function d(e){for(var t=0;t<e;t++)F.push(t)}function f(e){for(D+=e.charCodeAt(0),e=e.charCodeAt(0).toString(8);e.length<3;)e="0".concat(e);for(var t=0;t<e.length;t++)h(e[t])}function m(e){z=z.concat(e);for(var t=0;t<e.length;t++)f(e[t])}function g(){for(var e=D.toString(8);e.length<6;)e="0".concat(e);for(var t=0;t<e.length;t++)h(e[t]);console.log("checksum: "+e)}function y(e,t){e?A=i(function(){p(F[G]),G+=1,G>=F.length&&(i.cancel(A),y(!1,t))},U):(i.cancel(A),p(N),t())}function v(){F.push(L,O),d(P),F.push(N,O,N,O)}function w(){h(0),h(0),h(2)}function x(){h(0),h(0),h(3)}function b(){h(0),h(0),h(4)}function _(t){e.$parent.payload.handshakeLabel=" ",H.style.setProperty("background-color","rgb(0, 0, 0)"),e.$parent.backgroundLoader="start",F=[],z="",D=0,G=0,v(),w(),console.log(e.submittedData.wifi.ssid),console.log(e.submittedData.wifi.password),console.log(e.submittedData.deviceData.device_token),m("auth\n"),m(e.submittedData.wifi.ssid+"\n"),m(e.submittedData.wifi.password+"\n"),m(e.submittedData.deviceData.device_token+"\n"),x(),g(),b(),y(!0,t)}function S(){e.payload.segueButton="SEND",e.$parent.segueControl="hide",e.$parent.spinnerControl="show"}function C(){k("Done! Please wait..."),H.style.setProperty("background-color","#2E3439"),e.$parent.handShakeState=!0,e.handshakeLabel="Done! Please wait...",e.payload.segueButton=e.payload.waitLabel,e.$parent.spinnerControl="hide",e.$parent.segueControl="blocked",e.$parent.segueControl="blocked"}function T(){k(!1),e.$parent.handShakeRepeats=0,e.watchDog&&s.cancel(e.watchDog),e.payload.segueButton=e.payload.continueButton,e.$parent.segueControl="ready",n.$broadcast("forceSegue",{target:"wizard.confirm_handshake",params:{lang:l.lang}})}function E(){k(!1),e.$parent.handShakeState=!1,e.$parent.handShakeRepeats>e.$parent.handShakeRetries?e.$parent.handshakeFailed():R();var t=e.$on("modalClosed",function(){setTimeout(function(){t(),R()},200)})}function R(){e.payload.segueButton=e.payload.continueButton,e.$parent.segueControl="ready",o.go("wizard.wifi_check",{lang:l.lang})}function k(t){t?(e.dots=0,e.dotsTimer=i(function(){e.dots++,e.dots>3&&(e.dots=0),e.handshakeLabel=t+new Array(e.dots+1).join(".")},350)):i.cancel(e.dotsTimer)}function M(){setTimeout(function(){"undefined"!=typeof wifi_ssid&&(wifi_ssid.ssid.value=e.submittedData.wifi.ssid?e.submittedData.wifi.ssid:"",wifi_ssid.pass.value=e.submittedData.wifi.password?e.submittedData.wifi.password:"",e.$parent.segueControl="ready",e.payload.segueButton=e.payload.continueButton,n.$broadcast("removeError"))},0)}e.$parent.payload=t,r.animate(t.index),e.handshakeSubLabel="",e.$parent.segueControl="blocked",e.$parent.spinnerControl="hide",e.$parent.backgroundLoader="idle",e.payload.segueButton=e.payload.continueButton,e.loadingPercentage=0,e.submittedData.wifi.ssid&&(e.$parent.segueControl="ready",M()),e.showPasswordToggle="password",e.forcePassword=!1,e.ssidListener=function(){"undefined"!=typeof wifi_ssid.ssid.value&&wifi_ssid.ssid.value.length>0?(e.$parent.segueControl="ready",e.payload.segueButton=e.payload.continueButton,n.$broadcast("removeError"),e.submittedData.wifi.ssid=wifi_ssid.ssid.value):e.$parent.segueControl="blocked"},e.passwordListener=function(){e.submittedData.wifi.password=wifi_ssid.pass.value},e.showPassword=function(t){1!=e.forcePassword&&(1==t?e.showPasswordToggle="text":e.showPasswordToggle="password")},e.forceShowPassword=function(){0==e.forcePassword?(e.forcePassword=!0,e.showPasswordToggle="text",console.log("showing")):(e.forcePassword=!1,e.showPasswordToggle="password",console.log("hide"))};var A,I=2,P=9,N=0,L=P-2,O=P-1,B=P+1,D=0,U=170,F=[],z="",G=0,H=document.getElementById("handShakeSpace"),q=0;e.$on("handshake",function(){S(),a.listenToken(e.submittedData.deviceData.device_token,e),e.$on("token",function(e,t){console.log("Token received..."),T()}),_(function(){C(),e.$parent.handShakeRepeats++,console.log(e.$parent.handShakeRetries),console.log("Light process done..."),e.loadingPercentage=100,e.watchDog=s(function(){E()},18e3)})}),e.alternateSegue=function(){n.$broadcast("forceSegue",{target:"wizard.accesspoint_pre",params:{lang:l.lang}})}}]),angular.module("app").controller("finalController",["$scope","$rootScope","scopePayload","AnimationService",function(e,t,r,n){e.$parent.payload=r,n.animate(r.index),e.$parent.segueControl="ready"}]),angular.module("app").factory("AnimationService",["$rootScope","SegueService",function(e,t){function r(t){e.animationRows&&e.animationRows[0]?o():e.continuity=!0,i=t,n()}function n(){for(var r=[],n=0;n<=7;++n){for(var a=[],o=0;o<=n;++o){var l="ar"+n+"-"+o,u=0==i?"L":"";l+=u,e.continuity?a.push([l,"cont"]):a.push([l,"back"])}r.push(a)}e.animationRows=r,s=t.templateRowCounter(i),e.animationRows[0][0]=[e.animationRows[s][s]]}function a(t){for(var r=0;r<=s;++r){if(t){e.continuity=!0;var n=[e.animationRows[s][r],"leaving"]}else{e.continuity=!1;var n=[e.animationRows[s][r],"reversing"]}e.animationRows[s][r]=n}e.animationRows[0][0]=[e.animationRows[s][s]]}function o(){e.animationRows[0][0]=""}var i,s;return{animate:r,leaving:a,reInit:o}}]),angular.module("app").controller("accountController",["$scope","scopePayload","AnimationService","platform","$timeout","$rootScope","$stateParams",function(e,t,r,n,a,o,i){function s(){n.login(e.$parent.submittedData.user).then(function(t){n.setAuth(t),console.log("logged in successful"),a(function(){n.bakeDevice().then(function(t){console.log("baked successful",t),a(function(){e.$parent.submittedData.deviceData.id=t.id,o.$broadcast("forceSegue",{target:"wizard.final",params:{lang:i.lang}})},250)},function(){console.log("baked failed",t),c()})},250)},function(e){console.log(e)})}function l(t){n.checkEmail(t).then(function(t){console.log(t),e.$parent.submittedData.user.username=t.username,e.$parent.pre_made=!0},function(t){console.log(t),e.$parent.pre_made=!1,e.$parent.submittedData.user.username=" "})}function u(){e.$parent.segueControl="ready"}function c(){e.$parent.segueControl="blocked"}function p(){"email"==e.$parent.payload.url&&h(e.given_email)||"username"==e.$parent.payload.url&&e.given_username?u():c()}function h(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}e.$parent.payload=t,r.animate(t.index),e.$parent.segueControl="ready",e.showPasswordToggle="password",e.forcePassword=!1,e.given_email=" "==e.$parent.submittedData.user.email?"":e.$parent.submittedData.user.email,e.given_username=" "==e.$parent.submittedData.user.username?"":e.$parent.submittedData.user.username,e.accountListener=function(){e.payload.segueButton=e.payload.continueButton,h(e.given_email)?(e.$parent.submittedData.user.email=e.given_email,l(e.given_email.toLowerCase()),u()):c()},e.passwordListener=function(){e.payload.segueButton=e.payload.continueButton,"undefined"!=typeof e.pass1&&e.pass1.length>0&&e.pass1==e.pass2?(e.$parent.submittedData.user.password=e.pass1,n.createUser(e.$parent.submittedData.user).then(function(e){
console.log("returned",e),s()},function(e){e.data.errors.password&&console.error("Password "+e.data.errors.password[0])})):c()},e.loginListener=function(){c(),"undefined"!=typeof e.pass&&e.pass.length>=5?(e.$parent.submittedData.user.password=e.pass,s()):c()},e.usernameListener=function(){"undefined"!=typeof e.given_username&&e.given_username.length>=3?(e.$parent.submittedData.user.username=e.given_username,e.$parent.userName=e.input,n.createUser(e.$parent.submittedData.user).then(function(e){},function(e){e.data.errors.username?(console.error("Username "+e.data.errors.username[0]),c()):u()})):c()},e.generateName=function(){e.given_username=e.$parent.submittedData.user.email.split("@")[0]+"_"+Math.floor(99*Math.random()),e.$parent.submittedData.user.username=e.given_username,u(),e.$parent.userName=e.input},e.showPassword=function(t){1!=e.forcePassword&&(1==t?e.showPasswordToggle="text":e.showPasswordToggle="password")},e.forceShowPassword=function(){0==e.forcePassword?(e.forcePassword=!0,e.showPasswordToggle="text",console.log("showing")):(e.forcePassword=!1,e.showPasswordToggle="password",console.log("hide"))},e.forgotPassword=function(){window.open("","_blank")},p()}]),angular.module("app").controller("accesspointController",["$scope","scopePayload","AnimationService","$rootScope","platform","$state","$interval","$timeout","$stateParams",function(e,t,r,n,a,o,i,s,l){function u(){n.$broadcast("forceSegue",{target:"wizard.confirm_handshake",params:{lang:l.lang}})}e.$parent.payload=t,r.animate(t.index),e.$parent.segueControl="blocked",e.payload.promptedText=e.submittedData.deviceData.device_token,a.listenToken(e.submittedData.deviceData.device_token,e),e.$on("token",function(e,t){console.log("Token received..."),u()})}]).controller("accesspointController_base",["$scope","$stateParams","scopePayload","AnimationService","$rootScope","$sce",function(e,t,r,n,a,o){a.lang=t.lang,e.$parent.payload=r,n.animate(r.index),e.$parent.segueControl="ready",e.$parent.smartCitizenToggle="","accesspoint_1"==e.$parent.payload.url?e.bindable=o.trustAsHtml(e.$parent.payload.h3_1+"<em class=green>"+e.$parent.payload.em_1+"</em>"+e.$parent.payload.h3_2+"<em class=green>"+e.$parent.payload.em_2+"</em>"+e.$parent.payload.h3_3):"accesspoint_2"==e.$parent.payload.url&&(e.bindable=o.trustAsHtml(e.$parent.payload.h3_1+"<em class=orange>"+e.$parent.payload.em_1+"</em>"),console.log(e.$parent.payload.h3_1+"<em class=orange>"+e.$parent.payload.em_1+"</em>"))}]),/(MSIE [7-9]\.|Opera.*Version\/(10\.[5-9]|(11|12)\.)|Chrome\/([1-9]|10)\.|Version\/[2-4][\.0-9]+ Safari\/|Version\/(4\.0\.[4-9]|4\.[1-9]|5\.0)[\.0-9]+? Mobile\/.*Safari\/|Android ([1-2]|4\.[2-9].*Version\/4)\.|BlackBerry.*WebKit)/.test(navigator.userAgent)&&!/(IEMobile)/.test(navigator.userAgent)){if(/Android 4\.[2-9].*Version\/4/.test(navigator.userAgent)){var ss_android=document.createElement("style");ss_android.innerHTML='.ss-icon,[class^="ss-"],[class*=" ss-"],[class^="ss-"]:before,[class*=" ss-"]:before,[class^="ss-"].right:after[class*=" ss-"].right:after{text-rendering:auto!important}',document.body.appendChild(ss_android)}var ss_set={"notifications disabled":"🔕",notificationsdisabled:"🔕","notification disabled":"🔕",notificationdisabled:"🔕","telephone disabled":"",telephonedisabled:"","writing disabled":"",writingdisabled:"","pencil disabled":"","remove calendar":"","calendar remove":"","delete calendar":"","calendar delete":"",pencildisabled:"","phone disabled":"","medium battery":"","battery medium":"","download cloud":"","cloud download":"",removecalendar:"",calendarremove:"","check calendar":"","calendar check":"",deletecalendar:"",calendardelete:"","navigate right":"▻",phonedisabled:"","call disabled":"","ellipsis chat":"","female avatar":"👧","shopping cart":"",mediumbattery:"",batterymedium:"","empty battery":"","battery empty":"",downloadcloud:"",clouddownload:"",notifications:"🔔","bell disabled":"🔕",checkcalendar:"",calendarcheck:"",navigateright:"▻","navigate down":"","navigate left":"◅",calldisabled:"",ellipsischat:"",femaleavatar:"👧",shoppingcart:"","fast forward":"⏩","skip forward":"⏭","mobile phone":"📱","full battery":"🔋","battery full":"🔋","high battery":"","battery high":"",emptybattery:"",batteryempty:"","upload cloud":"","cloud upload":"","rotate right":"↻",notification:"🔔",belldisabled:"🔕","add calendar":"","calendar add":"",navigatedown:"",navigateleft:"◅","direct right":"▹","thumbs down":"👎","male avatar":"👤","female user":"👧","credit card":"💳","dollar sign":"💲","high volume":"🔊","volume high":"🔊",photographs:"🌄",videocamera:"📹",fastforward:"⏩",skipforward:"⏭","rotate left":"↺",mobilephone:"📱",fullbattery:"🔋",batteryfull:"🔋",highbattery:"",batteryhigh:"","low battery":"","battery low":"",uploadcloud:"",cloudupload:"",rotateright:"↻",information:"ℹ",addcalendar:"",calendaradd:"","remove date":"","delete date":"","navigate up":"",directright:"▹","direct down":"▾","direct left":"◃",screenshot:"⌖",visibility:"👀",attachment:"📎",disapprove:"👎",thumbsdown:"👎","half heart":"",eyedropper:"",maleavatar:"👤",femaleuser:"👧",creditcard:"💳",dollarsign:"💲",navigation:"",directions:"","hard drive":"",microphone:"🎤","low volume":"🔉","volume low":"🔉",highvolume:"🔊",volumehigh:"🔊",photograph:"🌄",rotateleft:"↺",thumbnails:"","cell phone":"📱",smartphone:"📱",lowbattery:"",batterylow:"",connection:"","pull quote":"“",removedate:"","check date":"",deletedate:"","down right":"⬊",navigateup:"",descending:"▾",directdown:"▾",directleft:"◃",crosshair:"⌖",paperclip:"📎",backspace:"⌫","thumbs up":"👍",halfheart:"","half star":"",telephone:"📞","male user":"👤","bar chart":"📊","pie chart":"",buildings:"🏢",warehouse:"",harddrive:"",musicnote:"♫",lowvolume:"🔉",volumelow:"🔉","skip back":"⏮","open book":"📖",newspaper:"📰",cellphone:"📱",lightbulb:"💡",pullquote:"“",checkmark:"✓",dashboard:"",stopwatch:"⏱",checkdate:"",briefcase:"💼",downright:"⬊","down left":"⬋",ascending:"▴","direct up":"▴","zoom out":"",unlocked:"🔓",insecure:"🔓",trashcan:"",keywords:"",bookmark:"🔖",thumbsup:"👍",favorite:"⋆",halfstar:"","end call":"",facetime:"",envelope:"✉",ellipsis:"…",maleuser:"👤",barchart:"📊",piechart:"",navigate:"",signpost:"",location:"",database:"",pictures:"🌄",skipback:"⏮",openbook:"📖",notebook:"📓",computer:"💻",download:"",transfer:"⇆",document:"📄",typeface:"",redirect:"↪",contract:"",question:"❓","sign out":"",subtract:"-",settings:"⚙",calendar:"📅","add date":"","up right":"⬈",downleft:"⬋",previous:"◅",directup:"▴",dropdown:"▾","zoom in":"",zoomout:"",visible:"👀",compose:"📝","private":"🔒",keyword:"",approve:"👍",dislike:"👎",windows:"",endcall:"",comment:"💬",avatars:"👥","package":"📦",compass:"",dictate:"🎤",speaker:"🔈",airplay:"",picture:"🌄",shuffle:"🔀",columns:"",desktop:"💻",display:"💻",monitor:"💻",battery:"🔋",refresh:"↻",syncing:"",loading:"",printer:"⎙",warning:"⚠",caution:"⛔","log out":"",signout:"",checked:"✓",adddate:"",droplet:"💧",upright:"⬈",forward:"➡","up left":"⬉",descend:"▾",retweet:"",cursor:"",search:"🔎",zoomin:"",attach:"📎",pencil:"✎",eraser:"✐",locked:"🔒",secure:"🔒",unlock:"🔓","public":"🔓",target:"◎",tagged:"",sample:"",layers:"",stroke:"",avatar:"👤",locate:"",volume:"🔈",camera:"📷",images:"🌄",photos:"🌄",videos:"📹",record:"●",rewind:"⏪",repeat:"🔁",replay:"↺",filter:"",funnel:"",laptop:"",tablet:"",iphone:"📱",mobile:"📱",upload:"",folder:"📁",layout:"",action:"",expand:"⤢",logout:"",hyphen:"-",remove:"-","delete":"␡",upleft:"⬉",ascend:"▴",write:"✎",erase:"✐",trash:"",heart:"♥",zelda:"",phone:"📞",reply:"↩",email:"✉",inbox:"📥",users:"👥",price:"💲",house:"⌂",globe:"🌎",earth:"🌎",world:"🌎",music:"♫",audio:"♫",sound:"🔈",image:"🌄",photo:"🌄",video:"📹",pause:"",eject:"⏏",merge:"",nodes:"",quote:"“",print:"⎙",share:"",visit:"",alert:"⚠",minus:"-",check:"✓",close:"␡",clock:"⏲",timer:"⏱",plane:"✈",cloud:"☁",flask:"",right:"➡",zoom:"",view:"👀",look:"👀",link:"🔗",move:"",edit:"✎",lock:"🔒",tags:"",flag:"⚑",like:"👍",love:"♥",star:"⋆",crop:"",fill:"",call:"📞",send:"",mail:"✉",chat:"💬",talk:"💬",user:"👤",cart:"",cost:"💲",home:"⌂",city:"🏢",play:"▶",stop:"■",skip:"⏭",undo:"↺",book:"📕",news:"📰",grid:"",rows:"",ipad:"",cell:"📱",idea:"💡",fork:"",redo:"↻",sync:"",wifi:"",file:"📄",page:"📄",text:"",font:"",list:"",help:"❓",info:"ℹ",exit:"",plus:"+",gear:"⚙",bell:"🔔",time:"⏲",date:"📅",work:"💼",drop:"💧",down:"⬇",left:"⬅",back:"⬅",next:"▻",eye:"👀",key:"🔑",ban:"🚫",tag:"",rss:"",box:"📦",map:"",pin:"📍",hdd:"",mic:"🎤",fax:"📠",out:"",add:"+",cog:"⚙",up:"⬆"};if("object"!=typeof ss_icons||"object"!=typeof ss_icons){var ss_icons=ss_set,ss_keywords=[];for(var i in ss_set)ss_keywords.push(i)}else for(var i in ss_set)ss_icons[i]=ss_set[i],ss_keywords.push(i);if("function"!=typeof ss_legacy){!function(e,t){"undefined"!=typeof module?module.exports=t():"function"==typeof define&&"object"==typeof define.amd?define(t):this[e]=t()}("ss_ready",function(e){function t(e){for(h=1;e=n.shift();)e()}var r,n=[],a=!1,o=document,i=o.documentElement,s=i.doScroll,l="DOMContentLoaded",u="addEventListener",c="onreadystatechange",p="readyState",h=/^loade|c/.test(o[p]);return o[u]&&o[u](l,r=function(){o.removeEventListener(l,r,a),t()},a),s&&o.attachEvent(c,r=function(){/^c/.test(o[p])&&(o.detachEvent(c,r),t())}),e=s?function(t){self!=top?h?t():n.push(t):function(){try{i.doScroll("left")}catch(r){return setTimeout(function(){e(t)},50)}t()}()}:function(e){h?e():n.push(e)}});var ss_legacy=function(e){if(!e instanceof Object)return!1;if(e.length)for(var t=0;t<e.length;t++)ss_legacy(e[t]);else e.value?e.value=ss_liga(e.value):e.nodeValue?e.nodeValue=ss_liga(e.nodeValue):e.innerHTML&&(e.innerHTML=ss_liga(e.innerHTML))},ss_getElementsByClassName=function(e,t){if(document.querySelectorAll)return document.querySelectorAll("."+t);for(var r=[],n=new RegExp("(^| )"+t+"( |$)"),a=e.getElementsByTagName("*"),o=0,i=a.length;o<i;o++)n.test(a[o].className)&&r.push(a[o]);return r},ss_liga=function(e){var t=new RegExp(ss_keywords.join("|").replace(/[-[\]{}()*+?.,\\^$#\s]/g,"\\$&"),"gi");return e.replace(t,function(e){return ss_icons[e.toLowerCase()]})};ss_ready(function(){ss_legacy(document.getElementsByClassName?document.getElementsByClassName("ss-icon"):ss_getElementsByClassName(document.body,"ss-icon"))})}}var particles=[],limit=20,imgs=[],gif,cnv;/*! p5.js v0.5.2 June 17, 2016 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.p5=e()}}(function(){var define,module,exports;return function e(t,r,n){function a(i,s){if(!r[i]){if(!t[i]){var l="function"==typeof require&&require;if(!s&&l)return l(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[i]={exports:{}};t[i][0].call(c.exports,function(e){var r=t[i][1][e];return a(r?r:e)},c,c.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,t,r){},{}],2:[function(e,t,r){r.argument=function(e,t){if(!e)throw new Error(t)},r.assert=r.argument},{}],3:[function(e,t,r){function n(e,t,r,n,a){e.beginPath(),e.moveTo(t,r),e.lineTo(n,a),e.stroke()}r.line=n},{}],4:[function(e,t,r){function n(e){this.font=e}function a(e){this.cmap=e}function o(e,t){this.encoding=e,this.charset=t}function i(e){var t;switch(e.version){case 1:this.names=r.standardNames.slice();break;case 2:for(this.names=new Array(e.numberOfGlyphs),t=0;t<e.numberOfGlyphs;t++)e.glyphNameIndex[t]<r.standardNames.length?this.names[t]=r.standardNames[e.glyphNameIndex[t]]:this.names[t]=e.names[e.glyphNameIndex[t]-r.standardNames.length];break;case 2.5:for(this.names=new Array(e.numberOfGlyphs),t=0;t<e.numberOfGlyphs;t++)this.names[t]=r.standardNames[t+e.glyphNameIndex[t]];break;case 3:this.names=[]}}function s(e){for(var t,r=e.tables.cmap.glyphIndexMap,n=Object.keys(r),a=0;a<n.length;a+=1){var o=n[a],i=r[o];t=e.glyphs.get(i),t.addUnicode(parseInt(o))}for(a=0;a<e.glyphs.length;a+=1)t=e.glyphs.get(a),e.cffEncoding?t.name=e.cffEncoding.charset[a]:t.name=e.glyphNames.glyphIndexToName(a)}var l=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],u=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],c=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],p=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];n.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0),r=this.font.glyphs;if(!r)return null;for(var n=0;n<r.length;n+=1)for(var a=r.get(n),o=0;o<a.unicodes.length;o+=1)if(a.unicodes[o]===t)return n},a.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.charCodeAt(0)]||0},o.prototype.charToGlyphIndex=function(e){var t=e.charCodeAt(0),r=this.encoding[t];return this.charset.indexOf(r)},i.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},i.prototype.glyphIndexToName=function(e){return this.names[e]},r.cffStandardStrings=l,r.cffStandardEncoding=u,r.cffExpertEncoding=c,r.standardNames=p,r.DefaultEncoding=n,r.CmapEncoding=a,r.CffEncoding=o,r.GlyphNames=i,r.addGlyphNames=s},{}],5:[function(e,t,r){function n(e){e=e||{},this.familyName=e.familyName||" ",this.styleName=e.styleName||" ",this.designer=e.designer||" ",this.designerURL=e.designerURL||" ",this.manufacturer=e.manufacturer||" ",this.manufacturerURL=e.manufacturerURL||" ",this.license=e.license||" ",this.licenseURL=e.licenseURL||" ",this.version=e.version||"Version 0.1",this.description=e.description||" ",this.copyright=e.copyright||" ",this.trademark=e.trademark||" ",this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.supported=!0,this.glyphs=new s.GlyphSet(this,e.glyphs||[]),this.encoding=new i.DefaultEncoding(this),this.tables={}}var a=e("./path"),o=e("./tables/sfnt"),i=e("./encoding"),s=e("./glyphset");n.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},n.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},n.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},n.prototype.stringToGlyphs=function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e[r];t.push(this.charToGlyph(n))}return t},n.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},n.prototype.nameToGlyph=function(e){var t=this.nametoGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},n.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},n.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.getGposKerningValue;return r?r(e,t):this.kerningPairs[e+","+t]||0},n.prototype.forEachGlyph=function(e,t,r,n,a,o){if(this.supported){t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:72,a=a||{};for(var i=void 0===a.kerning||a.kerning,s=1/this.unitsPerEm*n,l=this.stringToGlyphs(e),u=0;u<l.length;u+=1){var c=l[u];if(o(c,t,r,n,a),c.advanceWidth&&(t+=c.advanceWidth*s),i&&u<l.length-1){var p=this.getKerningValue(c,l[u+1]);t+=p*s}}}},n.prototype.getPath=function(e,t,r,n,o){var i=new a.Path;return this.forEachGlyph(e,t,r,n,o,function(e,t,r,n){var a=e.getPath(t,r,n);i.extend(a)}),i},n.prototype.draw=function(e,t,r,n,a,o){this.getPath(t,r,n,a,o).draw(e)},n.prototype.drawPoints=function(e,t,r,n,a,o){this.forEachGlyph(t,r,n,a,o,function(t,r,n,a){t.drawPoints(e,r,n,a)})},n.prototype.drawMetrics=function(e,t,r,n,a,o){this.forEachGlyph(t,r,n,a,o,function(t,r,n,a){t.drawMetrics(e,r,n,a)})},n.prototype.validate=function(){function e(e,t){e||r.push(t)}function t(t){e(n[t]&&n[t].trim().length>0,"No "+t+" specified.")}var r=[],n=this;t("familyName"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),e(this.unitsPerEm>0,"No unitsPerEm specified.")},n.prototype.toTables=function(){return o.fontToTable(this)},n.prototype.toBuffer=function(){for(var e=this.toTables(),t=e.encode(),r=new ArrayBuffer(t.length),n=new Uint8Array(r),a=0;a<t.length;a++)n[a]=t[a];return r},n.prototype.download=function(){var e=this.familyName.replace(/\s/g,"")+"-"+this.styleName+".otf",t=this.toBuffer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,t.byteLength,function(r){r.root.getFile(e,{create:!0},function(e){e.createWriter(function(r){var n=new DataView(t),a=new Blob([n],{type:"font/opentype"});r.write(a),r.addEventListener("writeend",function(){location.href=e.toURL()},!1)})})},function(e){throw e})},r.Font=n},{"./encoding":4,"./glyphset":7,"./path":10,"./tables/sfnt":25}],6:[function(e,t,r){function n(e,t){var r=t||{commands:[]};return{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(e){r=e}}}function a(e){this.bindConstructorValues(e)}var o=e("./check"),i=e("./draw"),s=e("./path");a.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",n(this,e.path))},a.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},a.prototype.getPath=function(e,t,r){e=void 0!==e?e:0,t=void 0!==t?t:0,r=void 0!==r?r:72;for(var n=1/this.path.unitsPerEm*r,a=new s.Path,o=this.path.commands,i=0;i<o.length;i+=1){var l=o[i];"M"===l.type?a.moveTo(e+l.x*n,t+-l.y*n):"L"===l.type?a.lineTo(e+l.x*n,t+-l.y*n):"Q"===l.type?a.quadraticCurveTo(e+l.x1*n,t+-l.y1*n,e+l.x*n,t+-l.y*n):"C"===l.type?a.curveTo(e+l.x1*n,t+-l.y1*n,e+l.x2*n,t+-l.y2*n,e+l.x*n,t+-l.y*n):"Z"===l.type&&a.closePath()}return a},a.prototype.getContours=function(){if(void 0===this.points)return[];for(var e=[],t=[],r=0;r<this.points.length;r+=1){var n=this.points[r];t.push(n),n.lastPointOfContour&&(e.push(t),t=[])}return o.argument(0===t.length,"There are still points left in the current contour."),e},a.prototype.getMetrics=function(){for(var e=this.path.commands,t=[],r=[],n=0;n<e.length;n+=1){var a=e[n];"Z"!==a.type&&(t.push(a.x),r.push(a.y)),"Q"!==a.type&&"C"!==a.type||(t.push(a.x1),r.push(a.y1)),"C"===a.type&&(t.push(a.x2),r.push(a.y2))}var o={xMin:Math.min.apply(null,t),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,t),yMax:Math.max.apply(null,r),leftSideBearing:0};return o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o},a.prototype.draw=function(e,t,r,n){this.getPath(t,r,n).draw(e)},a.prototype.drawPoints=function(e,t,r,n){function a(t,r,n,a){var o=2*Math.PI;e.beginPath();for(var i=0;i<t.length;i+=1)e.moveTo(r+t[i].x*a,n+t[i].y*a),e.arc(r+t[i].x*a,n+t[i].y*a,2,0,o,!1);e.closePath(),e.fill()}t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:24;for(var o=1/this.path.unitsPerEm*n,i=[],s=[],l=this.path,u=0;u<l.commands.length;u+=1){var c=l.commands[u];void 0!==c.x&&i.push({x:c.x,y:-c.y}),void 0!==c.x1&&s.push({x:c.x1,y:-c.y1}),void 0!==c.x2&&s.push({x:c.x2,y:-c.y2})}e.fillStyle="blue",a(i,t,r,o),e.fillStyle="red",a(s,t,r,o)},a.prototype.drawMetrics=function(e,t,r,n){var a;t=void 0!==t?t:0,r=void 0!==r?r:0,n=void 0!==n?n:24,a=1/this.path.unitsPerEm*n,e.lineWidth=1,e.strokeStyle="black",i.line(e,t,-1e4,t,1e4),i.line(e,-1e4,r,1e4,r);var o=this.xMin||0,s=this.yMin||0,l=this.xMax||0,u=this.yMax||0,c=this.advanceWidth||0;e.strokeStyle="blue",i.line(e,t+o*a,-1e4,t+o*a,1e4),i.line(e,t+l*a,-1e4,t+l*a,1e4),i.line(e,-1e4,r+-s*a,1e4,r+-s*a),i.line(e,-1e4,r+-u*a,1e4,r+-u*a),e.strokeStyle="green",i.line(e,t+c*a,-1e4,t+c*a,1e4)},r.Glyph=a},{"./check":2,"./draw":3,"./path":10}],7:[function(e,t,r){function n(e,t){if(this.font=e,this.glyphs={},Array.isArray(t))for(var r=0;r<t.length;r++)this.glyphs[r]=t[r];this.length=t&&t.length||0}function a(e,t){return new s.Glyph({index:t,font:e})}function o(e,t,r,n,a,o){return function(){var i=new s.Glyph({index:t,font:e});return i.path=function(){r(i,n,a);var t=o(e.glyphs,i);return t.unitsPerEm=e.unitsPerEm,t},i}}function i(e,t,r,n){return function(){var a=new s.Glyph({index:t,font:e});return a.path=function(){var t=r(e,a,n);return t.unitsPerEm=e.unitsPerEm,t},a}}var s=e("./glyph");n.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},n.prototype.push=function(e,t){this.glyphs[e]=t,this.length++},r.GlyphSet=n,r.glyphLoader=a,r.ttfGlyphLoader=o,r.cffGlyphLoader=i},{"./glyph":6}],8:[function(e,t,r){function n(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n<e.length;n+=1)r[n]=e[n];return t}function a(t,r){var a=e("fs");a.readFile(t,function(e,t){return e?r(e.message):void r(null,n(t))})}function o(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return 200!==r.status?t("Font could not be loaded: "+r.statusText):t(null,r.response)},r.send()}function i(e){var t,r,n,a,o,i,s,c=new u.Font,h=new DataView(e,0),E=p.getFixed(h,0);if(1===E)c.outlinesFormat="truetype";else{if(E=p.getTag(h,0),"OTTO"!==E)throw new Error("Unsupported OpenType version "+E);c.outlinesFormat="cff"}for(var R=p.getUShort(h,4),k=12,M=0;M<R;M+=1){var A=p.getTag(h,k),I=p.getULong(h,k+8);switch(A){case"cmap":c.tables.cmap=d.parse(h,I),c.encoding=new l.CmapEncoding(c.tables.cmap),c.encoding||(c.supported=!1);break;case"head":c.tables.head=y.parse(h,I),c.unitsPerEm=c.tables.head.unitsPerEm,t=c.tables.head.indexToLocFormat;break;case"hhea":c.tables.hhea=v.parse(h,I),c.ascender=c.tables.hhea.ascender,c.descender=c.tables.hhea.descender,c.numberOfHMetrics=c.tables.hhea.numberOfHMetrics;break;case"hmtx":r=I;break;case"maxp":c.tables.maxp=_.parse(h,I),c.numGlyphs=c.tables.maxp.numGlyphs;break;case"name":c.tables.name=S.parse(h,I),c.familyName=c.tables.name.fontFamily,c.styleName=c.tables.name.fontSubfamily;break;case"OS/2":c.tables.os2=C.parse(h,I);break;case"post":c.tables.post=T.parse(h,I),c.glyphNames=new l.GlyphNames(c.tables.post);break;case"glyf":n=I;break;case"loca":a=I;break;case"CFF ":o=I;break;case"kern":i=I;break;case"GPOS":s=I}k+=16}if(n&&a){var P=0===t,N=b.parse(h,a,c.numGlyphs,P);c.glyphs=m.parse(h,n,N,c),w.parse(h,r,c.numberOfHMetrics,c.numGlyphs,c.glyphs),l.addGlyphNames(c)}else o?(f.parse(h,o,c),l.addGlyphNames(c)):c.supported=!1;return c.supported&&(i?c.kerningPairs=x.parse(h,i):c.kerningPairs={},s&&g.parse(h,s,c)),c}function s(e,t){var r="undefined"==typeof window,n=r?a:o;n(e,function(e,r){if(e)return t(e);var n=i(r);return n.supported?t(null,n):t("Font is not supported (is this a Postscript font?)")})}var l=e("./encoding"),u=e("./font"),c=e("./glyph"),p=e("./parse"),h=e("./path"),d=e("./tables/cmap"),f=e("./tables/cff"),m=e("./tables/glyf"),g=e("./tables/gpos"),y=e("./tables/head"),v=e("./tables/hhea"),w=e("./tables/hmtx"),x=e("./tables/kern"),b=e("./tables/loca"),_=e("./tables/maxp"),S=e("./tables/name"),C=e("./tables/os2"),T=e("./tables/post");r._parse=p,r.Font=u.Font,r.Glyph=c.Glyph,r.Path=h.Path,r.parse=i,r.load=s},{"./encoding":4,"./font":5,"./glyph":6,"./parse":9,"./path":10,"./tables/cff":12,"./tables/cmap":13,"./tables/glyf":14,"./tables/gpos":15,"./tables/head":16,"./tables/hhea":17,"./tables/hmtx":18,"./tables/kern":19,"./tables/loca":20,"./tables/maxp":21,"./tables/name":22,"./tables/os2":23,"./tables/post":24,fs:1}],9:[function(e,t,r){function n(e,t){this.data=e,this.offset=t,this.relativeOffset=0}r.getByte=function(e,t){return e.getUint8(t)},r.getCard8=r.getByte,r.getUShort=function(e,t){return e.getUint16(t,!1)},r.getCard16=r.getUShort,r.getShort=function(e,t){return e.getInt16(t,!1)},r.getULong=function(e,t){return e.getUint32(t,!1)},r.getFixed=function(e,t){var r=e.getInt16(t,!1),n=e.getUint16(t+2,!1);return r+n/65535},r.getTag=function(e,t){for(var r="",n=t;n<t+4;n+=1)r+=String.fromCharCode(e.getInt8(n));return r},r.getOffset=function(e,t,r){for(var n=0,a=0;a<r;a+=1)n<<=8,n+=e.getUint8(t+a);return n},r.getBytes=function(e,t,r){for(var n=[],a=t;a<r;a+=1)n.push(e.getUint8(a));return n},r.bytesToString=function(e){for(var t="",r=0;r<e.length;r+=1)t+=String.fromCharCode(e[r]);return t};var a={"byte":1,uShort:2,"short":2,uLong:4,fixed:4,longDateTime:8,tag:4};n.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},n.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},n.prototype.parseCard8=n.prototype.parseByte,n.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},n.prototype.parseCard16=n.prototype.parseUShort,n.prototype.parseSID=n.prototype.parseUShort,n.prototype.parseOffset16=n.prototype.parseUShort,n.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},n.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},n.prototype.parseULong=function(){var e=r.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},n.prototype.parseFixed=function(){var e=r.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},n.prototype.parseOffset16List=n.prototype.parseUShortList=function(e){for(var t=new Array(e),n=this.data,a=this.offset+this.relativeOffset,o=0;o<e;o++)t[o]=r.getUShort(n,a),a+=2;return this.relativeOffset+=2*e,t},n.prototype.parseString=function(e){var t=this.data,r=this.offset+this.relativeOffset,n="";this.relativeOffset+=e;for(var a=0;a<e;a++)n+=String.fromCharCode(t.getUint8(r+a));return n},n.prototype.parseTag=function(){return this.parseString(4)},n.prototype.parseLongDateTime=function(){var e=r.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,e},n.prototype.parseFixed=function(){var e=r.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e/65536},n.prototype.parseVersion=function(){var e=r.getUShort(this.data,this.offset+this.relativeOffset),t=r.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,e+t/4096/10},n.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=a[e]*t},r.Parser=n},{}],10:[function(e,t,r){function n(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}n.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},n.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},n.prototype.curveTo=n.prototype.bezierCurveTo=function(e,t,r,n,a,o){this.commands.push({type:"C",x1:e,y1:t,x2:r,y2:n,x:a,y:o})},n.prototype.quadTo=n.prototype.quadraticCurveTo=function(e,t,r,n){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:n})},n.prototype.close=n.prototype.closePath=function(){this.commands.push({type:"Z"})},n.prototype.extend=function(e){e.commands&&(e=e.commands),Array.prototype.push.apply(this.commands,e)},n.prototype.draw=function(e){e.beginPath();for(var t=0;t<this.commands.length;t+=1){var r=this.commands[t];"M"===r.type?e.moveTo(r.x,r.y):"L"===r.type?e.lineTo(r.x,r.y):"C"===r.type?e.bezierCurveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):"Q"===r.type?e.quadraticCurveTo(r.x1,r.y1,r.x,r.y):"Z"===r.type&&e.closePath()}this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},n.prototype.toPathData=function(e){function t(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(e)}function r(){for(var e="",r=0;r<arguments.length;r+=1){var n=arguments[r];n>=0&&r>0&&(e+=" "),e+=t(n)}return e}e=void 0!==e?e:2;for(var n="",a=0;a<this.commands.length;a+=1){var o=this.commands[a];"M"===o.type?n+="M"+r(o.x,o.y):"L"===o.type?n+="L"+r(o.x,o.y):"C"===o.type?n+="C"+r(o.x1,o.y1,o.x2,o.y2,o.x,o.y):"Q"===o.type?n+="Q"+r(o.x1,o.y1,o.x,o.y):"Z"===o.type&&(n+="Z")}return n},n.prototype.toSVG=function(e){var t='<path d="';return t+=this.toPathData(e),t+='"',this.fill&"black"!==this.fill&&(t+=null===this.fill?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+="/>"},r.Path=n},{}],11:[function(e,t,r){function n(e,t,r){var n;for(n=0;n<t.length;n+=1){var a=t[n];this[a.name]=a.value}if(this.tableName=e,this.fields=t,r){var o=Object.keys(r);for(n=0;n<o.length;n+=1){var i=o[n],s=r[i];void 0!==this[i]&&(this[i]=s)}}}var a=e("./check"),o=e("./types").encode,i=e("./types").sizeOf;n.prototype.sizeOf=function(){for(var e=0,t=0;t<this.fields.length;t+=1){var r=this.fields[t],n=this[r.name];if(void 0===n&&(n=r.value),"function"==typeof n.sizeOf)e+=n.sizeOf();else{var o=i[r.type];a.assert("function"==typeof o,"Could not find sizeOf function for field"+r.name),e+=o(n)}}return e},n.prototype.encode=function(){return o.TABLE(this)},r.Table=n},{"./check":2,"./types":26}],12:[function(e,t,r){function n(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(!n(e[r],t[r]))return!1;return!0}return!1}function a(e,t,r){var n,a,o,i=[],s=[],l=O.getCard16(e,t);if(0!==l){var u=O.getByte(e,t+2);a=t+(l+1)*u+2;var c=t+3;for(n=0;n<l+1;n+=1)i.push(O.getOffset(e,c,u)),c+=u;o=a+i[l]}else o=t+2;for(n=0;n<i.length-1;n+=1){var p=O.getBytes(e,a+i[n],a+i[n+1]);r&&(p=r(p)),s.push(p)}return{objects:s,startOffset:t,endOffset:o}}function o(e){for(var t="",r=15,n=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var a=e.parseByte(),o=a>>4,i=15&a;if(o===r)break;if(t+=n[o],i===r)break;t+=n[i]}return parseFloat(t)}function i(e,t){var r,n,a,i;if(28===t)return r=e.parseByte(),n=e.parseByte(),r<<8|n;if(29===t)return r=e.parseByte(),n=e.parseByte(),a=e.parseByte(),i=e.parseByte(),r<<24|n<<16|a<<8|i;if(30===t)return o(e);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return r=e.parseByte(),256*(t-247)+r+108;if(t>=251&&t<=254)return r=e.parseByte(),256*-(t-251)-r-108;throw new Error("Invalid b0 "+t)}function s(e){for(var t={},r=0;r<e.length;r+=1){var n,a=e[r][0],o=e[r][1];if(n=1===o.length?o[0]:o,t.hasOwnProperty(a))throw new Error("Object "+t+" already has key "+a);t[a]=n}return t}function l(e,t,r){t=void 0!==t?t:0;var n=new O.Parser(e,t),a=[],o=[];for(r=void 0!==r?r:e.length;n.relativeOffset<r;){var l=n.parseByte();l<=21?(12===l&&(l=1200+n.parseByte()),a.push([l,o]),o=[]):o.push(i(n,l))}return s(a)}function u(e,t){return t=t<=390?N.cffStandardStrings[t]:e[t-391]}function c(e,t,r){for(var n={},a=0;a<t.length;a+=1){var o=t[a],i=e[o.op];void 0===i&&(i=void 0!==o.value?o.value:null),"SID"===o.type&&(i=u(r,i)),n[o.name]=i}return n}function p(e,t){var r={};return r.formatMajor=O.getCard8(e,t),r.formatMinor=O.getCard8(e,t+1),r.size=O.getCard8(e,t+2),r.offsetSize=O.getCard8(e,t+3),r.startOffset=t,r.endOffset=t+4,r}function h(e,t){var r=l(e,0,e.byteLength);return c(r,U,t)}function d(e,t,r,n){var a=l(e,t,r);return c(a,F,n)}function f(e,t,r,n){var a,o,i,s=new O.Parser(e,t);r-=1;var l=[".notdef"],c=s.parseCard8();if(0===c)for(a=0;a<r;a+=1)o=s.parseSID(),l.push(u(n,o));else if(1===c)for(;l.length<=r;)for(o=s.parseSID(),i=s.parseCard8(),a=0;a<=i;a+=1)l.push(u(n,o)),o+=1;else{if(2!==c)throw new Error("Unknown charset format "+c);for(;l.length<=r;)for(o=s.parseSID(),i=s.parseCard16(),a=0;a<=i;a+=1)l.push(u(n,o)),o+=1}return l}function m(e,t,r){var n,a,o={},i=new O.Parser(e,t),s=i.parseCard8();if(0===s){var l=i.parseCard8();for(n=0;n<l;n+=1)a=i.parseCard8(),o[a]=n}else{if(1!==s)throw new Error("Unknown encoding format "+s);var u=i.parseCard8();for(a=1,n=0;n<u;n+=1)for(var c=i.parseCard8(),p=i.parseCard8(),h=c;h<=c+p;h+=1)o[h]=a,a+=1}return new N.CffEncoding(o,r)}function g(e,t,r){function n(e,t){m&&c.closePath(),c.moveTo(e,t),m=!0}function a(){var t;t=p.length%2!==0,t&&!d&&(f=p.shift()+e.nominalWidthX),h+=p.length>>1,p.length=0,d=!0}function o(r){for(var v,w,x,b,_,S,C,T,E,R,k,M,A=0;A<r.length;){
var I=r[A];switch(A+=1,I){case 1:a();break;case 3:a();break;case 4:p.length>1&&!d&&(f=p.shift()+e.nominalWidthX,d=!0),y+=p.pop(),n(g,y);break;case 5:for(;p.length>0;)g+=p.shift(),y+=p.shift(),c.lineTo(g,y);break;case 6:for(;p.length>0&&(g+=p.shift(),c.lineTo(g,y),0!==p.length);)y+=p.shift(),c.lineTo(g,y);break;case 7:for(;p.length>0&&(y+=p.shift(),c.lineTo(g,y),0!==p.length);)g+=p.shift(),c.lineTo(g,y);break;case 8:for(;p.length>0;)i=g+p.shift(),s=y+p.shift(),l=i+p.shift(),u=s+p.shift(),g=l+p.shift(),y=u+p.shift(),c.curveTo(i,s,l,u,g,y);break;case 10:_=p.pop()+e.subrsBias,S=e.subrs[_],S&&o(S);break;case 11:return;case 12:switch(I=r[A],A+=1,I){case 35:i=g+p.shift(),s=y+p.shift(),l=i+p.shift(),u=s+p.shift(),C=l+p.shift(),T=u+p.shift(),E=C+p.shift(),R=T+p.shift(),k=E+p.shift(),M=R+p.shift(),g=k+p.shift(),y=M+p.shift(),p.shift(),c.curveTo(i,s,l,u,C,T),c.curveTo(E,R,k,M,g,y);break;case 34:i=g+p.shift(),s=y,l=i+p.shift(),u=s+p.shift(),C=l+p.shift(),T=u,E=C+p.shift(),R=u,k=E+p.shift(),M=y,g=k+p.shift(),c.curveTo(i,s,l,u,C,T),c.curveTo(E,R,k,M,g,y);break;case 36:i=g+p.shift(),s=y+p.shift(),l=i+p.shift(),u=s+p.shift(),C=l+p.shift(),T=u,E=C+p.shift(),R=u,k=E+p.shift(),M=R+p.shift(),g=k+p.shift(),c.curveTo(i,s,l,u,C,T),c.curveTo(E,R,k,M,g,y);break;case 37:i=g+p.shift(),s=y+p.shift(),l=i+p.shift(),u=s+p.shift(),C=l+p.shift(),T=u+p.shift(),E=C+p.shift(),R=T+p.shift(),k=E+p.shift(),M=R+p.shift(),Math.abs(k-g)>Math.abs(M-y)?g=k+p.shift():y=M+p.shift(),c.curveTo(i,s,l,u,C,T),c.curveTo(E,R,k,M,g,y);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+I),p.length=0}break;case 14:p.length>0&&!d&&(f=p.shift()+e.nominalWidthX,d=!0),m&&(c.closePath(),m=!1);break;case 18:a();break;case 19:case 20:a(),A+=h+7>>3;break;case 21:p.length>2&&!d&&(f=p.shift()+e.nominalWidthX,d=!0),y+=p.pop(),g+=p.pop(),n(g,y);break;case 22:p.length>1&&!d&&(f=p.shift()+e.nominalWidthX,d=!0),g+=p.pop(),n(g,y);break;case 23:a();break;case 24:for(;p.length>2;)i=g+p.shift(),s=y+p.shift(),l=i+p.shift(),u=s+p.shift(),g=l+p.shift(),y=u+p.shift(),c.curveTo(i,s,l,u,g,y);g+=p.shift(),y+=p.shift(),c.lineTo(g,y);break;case 25:for(;p.length>6;)g+=p.shift(),y+=p.shift(),c.lineTo(g,y);i=g+p.shift(),s=y+p.shift(),l=i+p.shift(),u=s+p.shift(),g=l+p.shift(),y=u+p.shift(),c.curveTo(i,s,l,u,g,y);break;case 26:for(p.length%2&&(g+=p.shift());p.length>0;)i=g,s=y+p.shift(),l=i+p.shift(),u=s+p.shift(),g=l,y=u+p.shift(),c.curveTo(i,s,l,u,g,y);break;case 27:for(p.length%2&&(y+=p.shift());p.length>0;)i=g+p.shift(),s=y,l=i+p.shift(),u=s+p.shift(),g=l+p.shift(),y=u,c.curveTo(i,s,l,u,g,y);break;case 28:v=r[A],w=r[A+1],p.push((v<<24|w<<16)>>16),A+=2;break;case 29:_=p.pop()+e.gsubrsBias,S=e.gsubrs[_],S&&o(S);break;case 30:for(;p.length>0&&(i=g,s=y+p.shift(),l=i+p.shift(),u=s+p.shift(),g=l+p.shift(),y=u+(1===p.length?p.shift():0),c.curveTo(i,s,l,u,g,y),0!==p.length);)i=g+p.shift(),s=y,l=i+p.shift(),u=s+p.shift(),y=u+p.shift(),g=l+(1===p.length?p.shift():0),c.curveTo(i,s,l,u,g,y);break;case 31:for(;p.length>0&&(i=g+p.shift(),s=y,l=i+p.shift(),u=s+p.shift(),y=u+p.shift(),g=l+(1===p.length?p.shift():0),c.curveTo(i,s,l,u,g,y),0!==p.length);)i=g,s=y+p.shift(),l=i+p.shift(),u=s+p.shift(),g=l+p.shift(),y=u+(1===p.length?p.shift():0),c.curveTo(i,s,l,u,g,y);break;default:I<32?console.log("Glyph "+t.index+": unknown operator "+I):I<247?p.push(I-139):I<251?(v=r[A],A+=1,p.push(256*(I-247)+v+108)):I<255?(v=r[A],A+=1,p.push(256*-(I-251)-v-108)):(v=r[A],w=r[A+1],x=r[A+2],b=r[A+3],A+=4,p.push((v<<24|w<<16|x<<8|b)/65536))}}}var i,s,l,u,c=new B.Path,p=[],h=0,d=!1,f=e.defaultWidthX,m=!1,g=0,y=0;return o(r),t.advanceWidth=f,c}function y(e){var t;return t=e.length<1240?107:e.length<33900?1131:32768}function v(e,t,r){r.tables.cff={};var n=p(e,t),o=a(e,n.endOffset,O.bytesToString),i=a(e,o.endOffset),s=a(e,i.endOffset,O.bytesToString),l=a(e,s.endOffset);r.gsubrs=l.objects,r.gsubrsBias=y(r.gsubrs);var u=new DataView(new Uint8Array(i.objects[0]).buffer),c=h(u,s.objects);r.tables.cff.topDict=c;var v=t+c["private"][1],w=d(e,v,c["private"][0],s.objects);if(r.defaultWidthX=w.defaultWidthX,r.nominalWidthX=w.nominalWidthX,0!==w.subrs){var x=v+w.subrs,b=a(e,x);r.subrs=b.objects,r.subrsBias=y(r.subrs)}else r.subrs=[],r.subrsBias=0;var _=a(e,t+c.charStrings);r.nGlyphs=_.objects.length;var S=f(e,t+c.charset,r.nGlyphs,s.objects);0===c.encoding?r.cffEncoding=new N.CffEncoding(N.cffStandardEncoding,S):1===c.encoding?r.cffEncoding=new N.CffEncoding(N.cffExpertEncoding,S):r.cffEncoding=m(e,t+c.encoding,S),r.encoding=r.encoding||r.cffEncoding,r.glyphs=new L.GlyphSet(r);for(var C=0;C<r.nGlyphs;C+=1){var T=_.objects[C];r.glyphs.push(C,L.cffGlyphLoader(r,C,g,T))}}function w(e,t){var r,n=N.cffStandardStrings.indexOf(e);return n>=0&&(r=n),n=t.indexOf(e),n>=0?r=n+N.cffStandardStrings.length:(r=N.cffStandardStrings.length+t.length,t.push(e)),r}function x(){return new D.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function b(e){var t=new D.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}function _(e,t,r){for(var a={},o=0;o<e.length;o+=1){var i=e[o],s=t[i.name];void 0===s||n(s,i.value)||("SID"===i.type&&(s=w(s,r)),a[i.op]={name:i.name,type:i.type,value:s})}return a}function S(e,t){var r=new D.Table("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=_(U,e,t),r}function C(e){var t=new D.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function T(e){var t=new D.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}function E(){return new D.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function R(e,t){for(var r=new D.Table("Charsets",[{name:"format",type:"Card8",value:0}]),n=0;n<e.length;n+=1){var a=e[n],o=w(a,t);r.fields.push({name:"glyph_"+n,type:"SID",value:o})}return r}function k(e){var t=[],r=e.path;t.push({name:"width",type:"NUMBER",value:e.advanceWidth});for(var n=0,a=0,o=0;o<r.commands.length;o+=1){var i,s,l=r.commands[o];if("Q"===l.type){var u=1/3,c=2/3;l={type:"C",x:l.x,y:l.y,x1:u*n+c*l.x1,y1:u*a+c*l.y1,x2:u*l.x+c*l.x1,y2:u*l.y+c*l.y1}}if("M"===l.type)i=Math.round(l.x-n),s=Math.round(l.y-a),t.push({name:"dx",type:"NUMBER",value:i}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rmoveto",type:"OP",value:21}),n=Math.round(l.x),a=Math.round(l.y);else if("L"===l.type)i=Math.round(l.x-n),s=Math.round(l.y-a),t.push({name:"dx",type:"NUMBER",value:i}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rlineto",type:"OP",value:5}),n=Math.round(l.x),a=Math.round(l.y);else if("C"===l.type){var p=Math.round(l.x1-n),h=Math.round(l.y1-a),d=Math.round(l.x2-l.x1),f=Math.round(l.y2-l.y1);i=Math.round(l.x-l.x2),s=Math.round(l.y-l.y2),t.push({name:"dx1",type:"NUMBER",value:p}),t.push({name:"dy1",type:"NUMBER",value:h}),t.push({name:"dx2",type:"NUMBER",value:d}),t.push({name:"dy2",type:"NUMBER",value:f}),t.push({name:"dx",type:"NUMBER",value:i}),t.push({name:"dy",type:"NUMBER",value:s}),t.push({name:"rrcurveto",type:"OP",value:8}),n=Math.round(l.x),a=Math.round(l.y)}}return t.push({name:"endchar",type:"OP",value:14}),t}function M(e){for(var t=new D.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),r=0;r<e.length;r+=1){var n=e.get(r),a=k(n);t.charStrings.push({name:n.name,type:"CHARSTRING",value:a})}return t}function A(e,t){var r=new D.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=_(F,e,t),r}function I(e){var t=new D.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);return t.privateDicts=[{name:"privateDict_0",type:"TABLE",value:e}],t}function P(e,t){for(var r,n=new D.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",type:"TABLE"}]),a=1/t.unitsPerEm,o={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontMatrix:[a,0,0,a,0,0],charset:999,encoding:0,charStrings:999,"private":[0,999]},i={},s=[],l=1;l<e.length;l+=1)r=e.get(l),s.push(r.name);var u=[];n.header=x(),n.nameIndex=b([t.postScriptName]);var c=S(o,u);n.topDictIndex=C(c),n.globalSubrIndex=E(),n.charsets=R(s,u),n.charStringsIndex=M(e);var p=A(i,u);n.privateDictIndex=I(p),n.stringIndex=T(u);var h=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return o.charset=h,o.encoding=0,o.charStrings=o.charset+n.charsets.sizeOf(),o["private"][1]=o.charStrings+n.charStringsIndex.sizeOf(),c=S(o,u),n.topDictIndex=C(c),n}var N=e("../encoding"),L=e("../glyphset"),O=e("../parse"),B=e("../path"),D=e("../table"),U=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],F=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];r.parse=v,r.make=P},{"../encoding":4,"../glyphset":7,"../parse":9,"../path":10,"../table":11}],13:[function(e,t,r){function n(e,t){var r,n={};n.version=l.getUShort(e,t),s.argument(0===n.version,"cmap table version should be 0."),n.numTables=l.getUShort(e,t+2);var a=-1;for(r=0;r<n.numTables;r+=1){var o=l.getUShort(e,t+4+8*r),i=l.getUShort(e,t+4+8*r+2);if(3===o&&(1===i||0===i)){a=l.getULong(e,t+4+8*r+4);break}}if(a===-1)return null;var u=new l.Parser(e,t+a);n.format=u.parseUShort(),s.argument(4===n.format,"Only format 4 cmap tables are supported."),n.length=u.parseUShort(),n.language=u.parseUShort();var c;n.segCount=c=u.parseUShort()>>1,u.skip("uShort",3),n.glyphIndexMap={};var p=new l.Parser(e,t+a+14),h=new l.Parser(e,t+a+16+2*c),d=new l.Parser(e,t+a+16+4*c),f=new l.Parser(e,t+a+16+6*c),m=t+a+16+8*c;for(r=0;r<c-1;r+=1)for(var g,y=p.parseUShort(),v=h.parseUShort(),w=d.parseShort(),x=f.parseUShort(),b=v;b<=y;b+=1)0!==x?(m=f.offset+f.relativeOffset-2,m+=x,m+=2*(b-v),g=l.getUShort(e,m),0!==g&&(g=g+w&65535)):g=b+w&65535,n.glyphIndexMap[b]=g;return n}function a(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0})}function o(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function i(e){var t,r=new u.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);for(r.segments=[],t=0;t<e.length;t+=1){for(var n=e.get(t),i=0;i<n.unicodes.length;i+=1)a(r,n.unicodes[i],t);r.segments=r.segments.sort(function(e,t){return e.start-t.start})}o(r);var s;s=r.segments.length,r.segCountX2=2*s,r.searchRange=2*Math.pow(2,Math.floor(Math.log(s)/Math.log(2))),r.entrySelector=Math.log(r.searchRange/2)/Math.log(2),r.rangeShift=r.segCountX2-r.searchRange;var l=[],c=[],p=[],h=[],d=[];for(t=0;t<s;t+=1){var f=r.segments[t];l=l.concat({name:"end_"+t,type:"USHORT",value:f.end}),c=c.concat({name:"start_"+t,type:"USHORT",value:f.start}),p=p.concat({name:"idDelta_"+t,type:"SHORT",value:f.delta}),h=h.concat({name:"idRangeOffset_"+t,type:"USHORT",value:f.offset}),void 0!==f.glyphId&&(d=d.concat({name:"glyph_"+t,type:"USHORT",value:f.glyphId}))}return r.fields=r.fields.concat(l),r.fields.push({name:"reservedPad",type:"USHORT",value:0}),r.fields=r.fields.concat(c),r.fields=r.fields.concat(p),r.fields=r.fields.concat(h),r.fields=r.fields.concat(d),r.length=14+2*l.length+2+2*c.length+2*p.length+2*h.length+2*d.length,r}var s=e("../check"),l=e("../parse"),u=e("../table");r.parse=n,r.make=i},{"../check":2,"../parse":9,"../table":11}],14:[function(e,t,r){function n(e,t,r,n,a){var o;return(t&n)>0?(o=e.parseByte(),0===(t&a)&&(o=-o),o=r+o):o=(t&a)>0?r:r+e.parseShort(),o}function a(e,t,r){var a=new h.Parser(t,r);e.numberOfContours=a.parseShort(),e.xMin=a.parseShort(),e.yMin=a.parseShort(),e.xMax=a.parseShort(),e.yMax=a.parseShort();var o,i;if(e.numberOfContours>0){var s,l=e.endPointIndices=[];for(s=0;s<e.numberOfContours;s+=1)l.push(a.parseUShort());for(e.instructionLength=a.parseUShort(),e.instructions=[],s=0;s<e.instructionLength;s+=1)e.instructions.push(a.parseByte());var u=l[l.length-1]+1;for(o=[],s=0;s<u;s+=1)if(i=a.parseByte(),o.push(i),(8&i)>0)for(var p=a.parseByte(),d=0;d<p;d+=1)o.push(i),s+=1;if(c.argument(o.length===u,"Bad flags."),l.length>0){var f,m=[];if(u>0){for(s=0;s<u;s+=1)i=o[s],f={},f.onCurve=!!(1&i),f.lastPointOfContour=l.indexOf(s)>=0,m.push(f);var g=0;for(s=0;s<u;s+=1)i=o[s],f=m[s],f.x=n(a,i,g,2,16),g=f.x;var y=0;for(s=0;s<u;s+=1)i=o[s],f=m[s],f.y=n(a,i,y,4,32),y=f.y}e.points=m}else e.points=[]}else if(0===e.numberOfContours)e.points=[];else{e.isComposite=!0,e.points=[],e.components=[];for(var v=!0;v;){o=a.parseUShort();var w={glyphIndex:a.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(1&o)>0?(w.dx=a.parseShort(),w.dy=a.parseShort()):(w.dx=a.parseChar(),w.dy=a.parseChar()),(8&o)>0?w.xScale=w.yScale=a.parseF2Dot14():(64&o)>0?(w.xScale=a.parseF2Dot14(),w.yScale=a.parseF2Dot14()):(128&o)>0&&(w.xScale=a.parseF2Dot14(),w.scale01=a.parseF2Dot14(),w.scale10=a.parseF2Dot14(),w.yScale=a.parseF2Dot14()),e.components.push(w),v=!!(32&o)}}}function o(e,t){for(var r=[],n=0;n<e.length;n+=1){var a=e[n],o={x:t.xScale*a.x+t.scale01*a.y+t.dx,y:t.scale10*a.x+t.yScale*a.y+t.dy,onCurve:a.onCurve,lastPointOfContour:a.lastPointOfContour};r.push(o)}return r}function i(e){for(var t=[],r=[],n=0;n<e.length;n+=1){var a=e[n];r.push(a),a.lastPointOfContour&&(t.push(r),r=[])}return c.argument(0===r.length,"There are still points left in the current contour."),t}function s(e){var t=new d.Path;if(!e)return t;for(var r=i(e),n=0;n<r.length;n+=1){var a,o,s=r[n],l=s[0],u=s[s.length-1];l.onCurve?(a=null,o=!0):(l=u.onCurve?u:{x:(l.x+u.x)/2,y:(l.y+u.y)/2},a=l,o=!1),t.moveTo(l.x,l.y);for(var c=o?1:0;c<s.length;c+=1){var p=s[c],h=0===c?l:s[c-1];if(h.onCurve&&p.onCurve)t.lineTo(p.x,p.y);else if(h.onCurve&&!p.onCurve)a=p;else if(h.onCurve||p.onCurve){if(h.onCurve||!p.onCurve)throw new Error("Invalid state.");t.quadraticCurveTo(a.x,a.y,p.x,p.y),a=null}else{var f={x:(h.x+p.x)/2,y:(h.y+p.y)/2};t.quadraticCurveTo(h.x,h.y,f.x,f.y),a=p}}l!==u&&(a?t.quadraticCurveTo(a.x,a.y,l.x,l.y):t.lineTo(l.x,l.y))}return t.closePath(),t}function l(e,t){if(t.isComposite)for(var r=0;r<t.components.length;r+=1){var n=t.components[r],a=e.get(n.glyphIndex);if(a.points){var i=o(a.points,n);t.points=t.points.concat(i)}}return s(t.points)}function u(e,t,r,n){var o,i=new p.GlyphSet(n);for(o=0;o<r.length-1;o+=1){var s=r[o],u=r[o+1];s!==u?i.push(o,p.ttfGlyphLoader(n,o,a,e,t+s,l)):i.push(o,p.glyphLoader(n,o))}return i}var c=e("../check"),p=e("../glyphset"),h=e("../parse"),d=e("../path");r.parse=u},{"../check":2,"../glyphset":7,"../parse":9,"../path":10}],15:[function(e,t,r){function n(e,t){for(var r=new c.Parser(e,t),n=r.parseUShort(),a=[],o=0;o<n;o++)a[r.parseTag()]={offset:r.parseUShort()};return a}function a(e,t){var r=new c.Parser(e,t),n=r.parseUShort(),a=r.parseUShort();if(1===n)return r.parseUShortList(a);if(2===n){for(var o=[];a--;)for(var i=r.parseUShort(),s=r.parseUShort(),l=r.parseUShort(),u=i;u<=s;u++)o[l++]=u;return o}}function o(e,t){var r=new c.Parser(e,t),n=r.parseUShort();if(1===n){var a=r.parseUShort(),o=r.parseUShort(),i=r.parseUShortList(o);return function(e){return i[e-a]||0}}if(2===n){for(var s=r.parseUShort(),l=[],u=[],p=[],h=0;h<s;h++)l[h]=r.parseUShort(),u[h]=r.parseUShort(),p[h]=r.parseUShort();return function(e){for(var t=0,r=l.length-1;t<r;){var n=t+r+1>>1;e<l[n]?r=n-1:t=n}return l[t]<=e&&e<=u[t]?p[t]||0:0}}}function i(e,t){var r,n,i=new c.Parser(e,t),s=i.parseUShort(),l=i.parseUShort(),u=a(e,t+l),p=i.parseUShort(),h=i.parseUShort();if(4===p&&0===h){var d={};if(1===s){for(var f=i.parseUShort(),m=[],g=i.parseOffset16List(f),y=0;y<f;y++){var v=g[y],w=d[v];if(!w){w={},i.relativeOffset=v;for(var x=i.parseUShort();x--;){var b=i.parseUShort();p&&(r=i.parseShort()),h&&(n=i.parseShort()),w[b]=r}}m[u[y]]=w}return function(e,t){var r=m[e];if(r)return r[t]}}if(2===s){for(var _=i.parseUShort(),S=i.parseUShort(),C=i.parseUShort(),T=i.parseUShort(),E=o(e,t+_),R=o(e,t+S),k=[],M=0;M<C;M++)for(var A=k[M]=[],I=0;I<T;I++)p&&(r=i.parseShort()),h&&(n=i.parseShort()),A[I]=r;var P={};for(M=0;M<u.length;M++)P[u[M]]=1;return function(e,t){if(P[e]){var r=E(e),n=R(t),a=k[r];return a?a[n]:void 0}}}}}function s(e,t){var r=new c.Parser(e,t),n=r.parseUShort(),a=r.parseUShort(),o=16&a,s=r.parseUShort(),l=r.parseOffset16List(s),u={lookupType:n,lookupFlag:a,markFilteringSet:o?r.parseUShort():-1};if(2===n){for(var p=[],h=0;h<s;h++)p.push(i(e,t+l[h]));u.getKerningValue=function(e,t){for(var r=p.length;r--;){var n=p[r](e,t);if(void 0!==n)return n}return 0}}return u}function l(e,t,r){var a=new c.Parser(e,t),o=a.parseFixed();u.argument(1===o,"Unsupported GPOS table version."),n(e,t+a.parseUShort()),n(e,t+a.parseUShort());var i=a.parseUShort();a.relativeOffset=i;for(var l=a.parseUShort(),p=a.parseOffset16List(l),h=t+i,d=0;d<l;d++){var f=s(e,h+p[d]);2!==f.lookupType||r.getGposKerningValue||(r.getGposKerningValue=f.getKerningValue)}}var u=e("../check"),c=e("../parse");r.parse=l},{"../check":2,"../parse":9}],16:[function(e,t,r){function n(e,t){var r={},n=new i.Parser(e,t);return r.version=n.parseVersion(),r.fontRevision=Math.round(1e3*n.parseFixed())/1e3,r.checkSumAdjustment=n.parseULong(),r.magicNumber=n.parseULong(),o.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=n.parseUShort(),r.unitsPerEm=n.parseUShort(),r.created=n.parseLongDateTime(),r.modified=n.parseLongDateTime(),r.xMin=n.parseShort(),r.yMin=n.parseShort(),r.xMax=n.parseShort(),r.yMax=n.parseShort(),r.macStyle=n.parseUShort(),r.lowestRecPPEM=n.parseUShort(),r.fontDirectionHint=n.parseShort(),r.indexToLocFormat=n.parseShort(),r.glyphDataFormat=n.parseShort(),r}function a(e){return new s.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}var o=e("../check"),i=e("../parse"),s=e("../table");r.parse=n,r.make=a},{"../check":2,"../parse":9,"../table":11}],17:[function(e,t,r){function n(e,t){var r={},n=new o.Parser(e,t);return r.version=n.parseVersion(),r.ascender=n.parseShort(),r.descender=n.parseShort(),r.lineGap=n.parseShort(),r.advanceWidthMax=n.parseUShort(),r.minLeftSideBearing=n.parseShort(),r.minRightSideBearing=n.parseShort(),r.xMaxExtent=n.parseShort(),r.caretSlopeRise=n.parseShort(),r.caretSlopeRun=n.parseShort(),r.caretOffset=n.parseShort(),n.relativeOffset+=8,r.metricDataFormat=n.parseShort(),r.numberOfHMetrics=n.parseUShort(),r}function a(e){return new i.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}var o=e("../parse"),i=e("../table");r.parse=n,r.make=a},{"../parse":9,"../table":11}],18:[function(e,t,r){function n(e,t,r,n,a){for(var i,s,l=new o.Parser(e,t),u=0;u<n;u+=1){u<r&&(i=l.parseUShort(),s=l.parseShort());var c=a.get(u);c.advanceWidth=i,c.leftSideBearing=s}}function a(e){for(var t=new i.Table("hmtx",[]),r=0;r<e.length;r+=1){var n=e.get(r),a=n.advanceWidth||0,o=n.leftSideBearing||0;t.fields.push({name:"advanceWidth_"+r,type:"USHORT",value:a}),t.fields.push({name:"leftSideBearing_"+r,type:"SHORT",value:o})}return t}var o=e("../parse"),i=e("../table");r.parse=n,r.make=a},{"../parse":9,"../table":11}],19:[function(e,t,r){function n(e,t){var r={},n=new o.Parser(e,t),i=n.parseUShort();a.argument(0===i,"Unsupported kern table version."),n.skip("uShort",1);var s=n.parseUShort();a.argument(0===s,"Unsupported kern sub-table version."),n.skip("uShort",2);var l=n.parseUShort();n.skip("uShort",3);for(var u=0;u<l;u+=1){var c=n.parseUShort(),p=n.parseUShort(),h=n.parseShort();r[c+","+p]=h}return r}var a=e("../check"),o=e("../parse");r.parse=n},{"../check":2,"../parse":9}],20:[function(e,t,r){function n(e,t,r,n){for(var o=new a.Parser(e,t),i=n?o.parseUShort:o.parseULong,s=[],l=0;l<r+1;l+=1){var u=i.call(o);n&&(u*=2),s.push(u)}return s}var a=e("../parse");r.parse=n},{"../parse":9}],21:[function(e,t,r){function n(e,t){var r={},n=new o.Parser(e,t);return r.version=n.parseVersion(),r.numGlyphs=n.parseUShort(),1===r.version&&(r.maxPoints=n.parseUShort(),r.maxContours=n.parseUShort(),r.maxCompositePoints=n.parseUShort(),r.maxCompositeContours=n.parseUShort(),r.maxZones=n.parseUShort(),r.maxTwilightPoints=n.parseUShort(),r.maxStorage=n.parseUShort(),r.maxFunctionDefs=n.parseUShort(),r.maxInstructionDefs=n.parseUShort(),r.maxStackElements=n.parseUShort(),r.maxSizeOfInstructions=n.parseUShort(),r.maxComponentElements=n.parseUShort(),r.maxComponentDepth=n.parseUShort()),r}function a(e){return new i.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}var o=e("../parse"),i=e("../table");r.parse=n,r.make=a},{"../parse":9,"../table":11}],22:[function(e,t,r){function n(e,t){var r={},n=new u.Parser(e,t);r.format=n.parseUShort();for(var a=n.parseUShort(),o=n.offset+n.parseUShort(),i=0,s=0;s<a;s++){var l=n.parseUShort(),c=n.parseUShort(),h=n.parseUShort(),d=n.parseUShort(),f=p[d],m=n.parseUShort(),g=n.parseUShort();if(3===l&&1===c&&1033===h){for(var y=[],v=m/2,w=0;w<v;w++,g+=2)y[w]=u.getShort(e,o+g);var x=String.fromCharCode.apply(null,y);f?r[f]=x:(i++,r["unknown"+i]=x)}}return 1===r.format&&(r.langTagCount=n.parseUShort()),r}function a(e,t,r,n,a,o){return new c.Table("NameRecord",[{name:"platformID",type:"USHORT",value:e},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:r},{name:"nameID",type:"USHORT",value:n},{name:"length",type:"USHORT",value:a},{name:"offset",type:"USHORT",value:o}])}function o(e,t,r,n){var o=l.STRING(r);return e.records.push(a(1,0,0,t,o.length,n)),e.strings.push(o),n+=o.length}function i(e,t,r,n){var o=l.UTF16(r);return e.records.push(a(3,1,1033,t,o.length,n)),e.strings.push(o),n+=o.length}function s(e){var t=new c.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:0},{name:"stringOffset",type:"USHORT",value:0}]);t.records=[],t.strings=[];var r,n,a=0;for(r=0;r<p.length;r+=1)void 0!==e[p[r]]&&(n=e[p[r]],a=o(t,r,n,a));for(r=0;r<p.length;r+=1)void 0!==e[p[r]]&&(n=e[p[r]],a=i(t,r,n,a));for(t.count=t.records.length,t.stringOffset=6+12*t.count,r=0;r<t.records.length;r+=1)t.fields.push({name:"record_"+r,type:"TABLE",value:t.records[r]});for(r=0;r<t.strings.length;r+=1)t.fields.push({name:"string_"+r,type:"LITERAL",value:t.strings[r]});return t}var l=e("../types").encode,u=e("../parse"),c=e("../table"),p=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","licence","licenceURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"];r.parse=n,r.make=s},{"../parse":9,"../table":11,"../types":26}],23:[function(e,t,r){function n(e){for(var t=0;t<l.length;t+=1){var r=l[t];if(e>=r.begin&&e<r.end)return t}return-1}function a(e,t){var r={},n=new i.Parser(e,t);r.version=n.parseUShort(),r.xAvgCharWidth=n.parseShort(),r.usWeightClass=n.parseUShort(),r.usWidthClass=n.parseUShort(),r.fsType=n.parseUShort(),r.ySubscriptXSize=n.parseShort(),r.ySubscriptYSize=n.parseShort(),r.ySubscriptXOffset=n.parseShort(),r.ySubscriptYOffset=n.parseShort(),r.ySuperscriptXSize=n.parseShort(),r.ySuperscriptYSize=n.parseShort(),r.ySuperscriptXOffset=n.parseShort(),r.ySuperscriptYOffset=n.parseShort(),r.yStrikeoutSize=n.parseShort(),r.yStrikeoutPosition=n.parseShort(),r.sFamilyClass=n.parseShort(),r.panose=[];for(var a=0;a<10;a++)r.panose[a]=n.parseByte();return r.ulUnicodeRange1=n.parseULong(),r.ulUnicodeRange2=n.parseULong(),r.ulUnicodeRange3=n.parseULong(),r.ulUnicodeRange4=n.parseULong(),r.achVendID=String.fromCharCode(n.parseByte(),n.parseByte(),n.parseByte(),n.parseByte()),r.fsSelection=n.parseUShort(),r.usFirstCharIndex=n.parseUShort(),r.usLastCharIndex=n.parseUShort(),r.sTypoAscender=n.parseShort(),r.sTypoDescender=n.parseShort(),r.sTypoLineGap=n.parseShort(),r.usWinAscent=n.parseUShort(),r.usWinDescent=n.parseUShort(),r.version>=1&&(r.ulCodePageRange1=n.parseULong(),r.ulCodePageRange2=n.parseULong()),r.version>=2&&(r.sxHeight=n.parseShort(),r.sCapHeight=n.parseShort(),r.usDefaultChar=n.parseUShort(),r.usBreakChar=n.parseUShort(),r.usMaxContent=n.parseUShort()),r}function o(e){return new s.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)}var i=e("../parse"),s=e("../table"),l=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{
begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];r.unicodeRanges=l,r.getUnicodeRange=n,r.parse=a,r.make=o},{"../parse":9,"../table":11}],24:[function(e,t,r){function n(e,t){var r,n={},a=new i.Parser(e,t);switch(n.version=a.parseVersion(),n.italicAngle=a.parseFixed(),n.underlinePosition=a.parseShort(),n.underlineThickness=a.parseShort(),n.isFixedPitch=a.parseULong(),n.minMemType42=a.parseULong(),n.maxMemType42=a.parseULong(),n.minMemType1=a.parseULong(),n.maxMemType1=a.parseULong(),n.version){case 1:n.names=o.standardNames.slice();break;case 2:for(n.numberOfGlyphs=a.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs),r=0;r<n.numberOfGlyphs;r++)n.glyphNameIndex[r]=a.parseUShort();for(n.names=[],r=0;r<n.numberOfGlyphs;r++)if(n.glyphNameIndex[r]>=o.standardNames.length){var s=a.parseChar();n.names.push(a.parseString(s))}break;case 2.5:for(n.numberOfGlyphs=a.parseUShort(),n.offset=new Array(n.numberOfGlyphs),r=0;r<n.numberOfGlyphs;r++)n.offset[r]=a.parseChar()}return n}function a(){return new s.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var o=e("../encoding"),i=e("../parse"),s=e("../table");r.parse=n,r.make=a},{"../encoding":4,"../parse":9,"../table":11}],25:[function(e,t,r){function n(e){return Math.log(e)/Math.log(2)|0}function a(e){for(;e.length%4!==0;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%=Math.pow(2,32)}function o(e,t,r,n){return new p.Table("Table Record",[{name:"tag",type:"TAG",value:void 0!==e?e:""},{name:"checkSum",type:"ULONG",value:void 0!==t?t:0},{name:"offset",type:"ULONG",value:void 0!==r?r:0},{name:"length",type:"ULONG",value:void 0!==n?n:0}])}function i(e){var t=new p.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);t.tables=e,t.numTables=e.length;var r=Math.pow(2,n(t.numTables));t.searchRange=16*r,t.entrySelector=n(r),t.rangeShift=16*t.numTables-t.searchRange;for(var i=[],s=[],l=t.sizeOf()+o().sizeOf()*t.numTables;l%4!==0;)l+=1,s.push({name:"padding",type:"BYTE",value:0});for(var u=0;u<e.length;u+=1){var h=e[u];c.argument(4===h.tableName.length,"Table name"+h.tableName+" is invalid.");var d=h.sizeOf(),f=o(h.tableName,a(h.encode()),l,d);for(i.push({name:f.tag+" Table Record",type:"TABLE",value:f}),s.push({name:h.tableName+" table",type:"TABLE",value:h}),l+=d,c.argument(!isNaN(l),"Something went wrong calculating the offset.");l%4!==0;)l+=1,s.push({name:"padding",type:"BYTE",value:0})}return i.sort(function(e,t){return e.value.tag>t.value.tag?1:-1}),t.fields=t.fields.concat(i),t.fields=t.fields.concat(s),t}function s(e,t,r){for(var n=0;n<t.length;n+=1){var a=e.charToGlyphIndex(t[n]);if(a>0){var o=e.glyphs.get(a);return o.getMetrics()}}return r}function l(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}function u(e){for(var t,r=[],n=[],o=[],u=[],c=[],p=[],b=[],_=0,S=0,C=0,T=0,E=0,R=0;R<e.glyphs.length;R+=1){var k=e.glyphs.get(R),M=0|k.unicode;(t>M||null===t)&&(t=M),_<M&&(_=M);var A=w.getUnicodeRange(M);if(A<32)S|=1<<A;else if(A<64)C|=1<<A-32;else if(A<96)T|=1<<A-64;else{if(!(A<123))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");E|=1<<A-96}if(".notdef"!==k.name){var I=k.getMetrics();r.push(I.xMin),n.push(I.yMin),o.push(I.xMax),u.push(I.yMax),p.push(I.leftSideBearing),b.push(I.rightSideBearing),c.push(k.advanceWidth)}}var P={xMin:Math.min.apply(null,r),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,o),yMax:Math.max.apply(null,u),advanceWidthMax:Math.max.apply(null,c),advanceWidthAvg:l(c),minLeftSideBearing:Math.min.apply(null,p),maxLeftSideBearing:Math.max.apply(null,p),minRightSideBearing:Math.min.apply(null,b)};P.ascender=void 0!==e.ascender?e.ascender:P.yMax,P.descender=void 0!==e.descender?e.descender:P.yMin;var N=f.make({unitsPerEm:e.unitsPerEm,xMin:P.xMin,yMin:P.yMin,xMax:P.xMax,yMax:P.yMax}),L=m.make({ascender:P.ascender,descender:P.descender,advanceWidthMax:P.advanceWidthMax,minLeftSideBearing:P.minLeftSideBearing,minRightSideBearing:P.minRightSideBearing,xMaxExtent:P.maxLeftSideBearing+(P.xMax-P.xMin),numberOfHMetrics:e.glyphs.length}),O=y.make(e.glyphs.length),B=w.make({xAvgCharWidth:Math.round(P.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:t,usLastCharIndex:_,ulUnicodeRange1:S,ulUnicodeRange2:C,ulUnicodeRange3:T,ulUnicodeRange4:E,sTypoAscender:P.ascender,sTypoDescender:P.descender,sTypoLineGap:0,usWinAscent:P.ascender,usWinDescent:-P.descender,sxHeight:s(e,"xyvw",{yMax:0}).yMax,sCapHeight:s(e,"HIKLEFJMNTZBDPRAGOQSUVWXY",P).yMax,usBreakChar:e.hasChar(" ")?32:0}),D=g.make(e.glyphs),U=h.make(e.glyphs),F=e.familyName+" "+e.styleName,z=e.familyName.replace(/\s/g,"")+"-"+e.styleName,G=v.make({copyright:e.copyright,fontFamily:e.familyName,fontSubfamily:e.styleName,uniqueID:e.manufacturer+":"+F,fullName:F,version:e.version,postScriptName:z,trademark:e.trademark,manufacturer:e.manufacturer,designer:e.designer,description:e.description,manufacturerURL:e.manufacturerURL,designerURL:e.designerURL,license:e.license,licenseURL:e.licenseURL,preferredFamily:e.familyName,preferredSubfamily:e.styleName}),H=x.make(),q=d.make(e.glyphs,{version:e.version,fullName:F,familyName:e.familyName,weightName:e.styleName,postScriptName:z,unitsPerEm:e.unitsPerEm}),V=[N,L,O,B,G,U,H,q,D],W=i(V),$=W.encode(),j=a($),X=W.fields,Y=!1;for(R=0;R<X.length;R+=1)if("head table"===X[R].name){X[R].value.checkSumAdjustment=2981146554-j,Y=!0;break}if(!Y)throw new Error("Could not find head table with checkSum to adjust.");return W}var c=e("../check"),p=e("../table"),h=e("./cmap"),d=e("./cff"),f=e("./head"),m=e("./hhea"),g=e("./hmtx"),y=e("./maxp"),v=e("./name"),w=e("./os2"),x=e("./post");r.computeCheckSum=a,r.make=i,r.fontToTable=u},{"../check":2,"../table":11,"./cff":12,"./cmap":13,"./head":16,"./hhea":17,"./hmtx":18,"./maxp":21,"./name":22,"./os2":23,"./post":24}],26:[function(e,t,r){function n(e){return function(){return e}}var a=e("./check"),o=32768,i=2147483648,s={},l={},u={};l.BYTE=function(e){return a.argument(e>=0&&e<=255,"Byte value should be between 0 and 255."),[e]},u.BYTE=n(1),l.CHAR=function(e){return[e.charCodeAt(0)]},u.BYTE=n(1),l.CHARARRAY=function(e){for(var t=[],r=0;r<e.length;r+=1)t.push(e.charCodeAt(r));return t},u.CHARARRAY=function(e){return e.length},l.USHORT=function(e){return[e>>8&255,255&e]},u.USHORT=n(2),l.SHORT=function(e){return e>=o&&(e=-(2*o-e)),[e>>8&255,255&e]},u.SHORT=n(2),l.UINT24=function(e){return[e>>16&255,e>>8&255,255&e]},u.UINT24=n(3),l.ULONG=function(e){return[e>>24&255,e>>16&255,e>>8&255,255&e]},u.ULONG=n(4),l.LONG=function(e){return e>=i&&(e=-(2*i-e)),[e>>24&255,e>>16&255,e>>8&255,255&e]},u.LONG=n(4),l.FIXED=l.ULONG,u.FIXED=u.ULONG,l.FWORD=l.SHORT,u.FWORD=u.SHORT,l.UFWORD=l.USHORT,u.UFWORD=u.USHORT,l.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]},u.LONGDATETIME=n(8),l.TAG=function(e){return a.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},u.TAG=n(4),l.Card8=l.BYTE,u.Card8=u.BYTE,l.Card16=l.USHORT,u.Card16=u.USHORT,l.OffSize=l.BYTE,u.OffSize=u.BYTE,l.SID=l.USHORT,u.SID=u.USHORT,l.NUMBER=function(e){return e>=-107&&e<=107?[e+139]:e>=108&&e<=1131?(e-=108,[(e>>8)+247,255&e]):e>=-1131&&e<=-108?(e=-e-108,[(e>>8)+251,255&e]):e>=-32768&&e<=32767?l.NUMBER16(e):l.NUMBER32(e)},u.NUMBER=function(e){return l.NUMBER(e).length},l.NUMBER16=function(e){return[28,e>>8&255,255&e]},u.NUMBER16=n(2),l.NUMBER32=function(e){return[29,e>>24&255,e>>16&255,e>>8&255,255&e]},u.NUMBER32=n(4),l.REAL=function(e){var t=e.toString(),r=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(t);if(r){var n=parseFloat("1e"+((r[2]?+r[2]:0)+r[1].length));t=(Math.round(e*n)/n).toString()}var a,o,i="";for(a=0,o=t.length;a<o;a+=1){var s=t[a];i+="e"===s?"-"===t[++a]?"c":"b":"."===s?"a":"-"===s?"e":s}i+=1&i.length?"f":"ff";var l=[30];for(a=0,o=i.length;a<o;a+=2)l.push(parseInt(i.substr(a,2),16));return l},u.REAL=function(e){return l.REAL(e).length},l.NAME=l.CHARARRAY,u.NAME=u.CHARARRAY,l.STRING=l.CHARARRAY,u.STRING=u.CHARARRAY,l.UTF16=function(e){for(var t=[],r=0;r<e.length;r+=1)t.push(0),t.push(e.charCodeAt(r));return t},u.UTF16=function(e){return 2*e.length},l.INDEX=function(e){var t,r=1,n=[r],a=[],o=0;for(t=0;t<e.length;t+=1){var i=l.OBJECT(e[t]);Array.prototype.push.apply(a,i),o+=i.length,r+=i.length,n.push(r)}if(0===a.length)return[0,0];var s=[],u=1+Math.floor(Math.log(o)/Math.log(2))/8|0,c=[void 0,l.BYTE,l.USHORT,l.UINT24,l.ULONG][u];for(t=0;t<n.length;t+=1){var p=c(n[t]);Array.prototype.push.apply(s,p)}return Array.prototype.concat(l.Card16(e.length),l.OffSize(u),s,a)},u.INDEX=function(e){return l.INDEX(e).length},l.DICT=function(e){for(var t=[],r=Object.keys(e),n=r.length,a=0;a<n;a+=1){var o=parseInt(r[a],0),i=e[o];t=t.concat(l.OPERAND(i.value,i.type)),t=t.concat(l.OPERATOR(o))}return t},u.DICT=function(e){return l.DICT(e).length},l.OPERATOR=function(e){return e<1200?[e]:[12,e-1200]},l.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var n=0;n<t.length;n+=1)a.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(l.OPERAND(e[n],t[n]));else if("SID"===t)r=r.concat(l.NUMBER(e));else if("offset"===t)r=r.concat(l.NUMBER32(e));else if("number"===t)r=r.concat(l.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(l.REAL(e))}return r},l.OP=l.BYTE,u.OP=u.BYTE;var c="function"==typeof WeakMap&&new WeakMap;l.CHARSTRING=function(e){if(c&&c.has(e))return c.get(e);for(var t=[],r=e.length,n=0;n<r;n+=1){var a=e[n];t=t.concat(l[a.type](a.value))}return c&&c.set(e,t),t},u.CHARSTRING=function(e){return l.CHARSTRING(e).length},l.OBJECT=function(e){var t=l[e.type];return a.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},l.TABLE=function(e){for(var t=[],r=e.fields.length,n=0;n<r;n+=1){var o=e.fields[n],i=l[o.type];a.argument(void 0!==i,"No encoding function for field type "+o.type);var s=e[o.name];void 0===s&&(s=o.value);var u=i(s);t=t.concat(u)}return t},l.LITERAL=function(e){return e},u.LITERAL=function(e){return e.length},r.decode=s,r.encode=l,r.sizeOf=u},{"./check":2}],27:[function(_dereq_,module,exports){/*!
  * Reqwest! A general purpose XHR connection manager
  * license MIT (c) Dustin Diaz 2014
  * https://github.com/ded/reqwest
  */
!function(e,t,r){"undefined"!=typeof module&&module.exports?module.exports=r():"function"==typeof define&&define.amd?define(r):t[e]=r()}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||window.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,r){return function(){return e._aborted?r(e.request):e._timedOut?r(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):r(e.request)))}}function setHeaders(e,t){var r,n=t.headers||{};n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var a="function"==typeof FormData&&t.data instanceof FormData;t.crossOrigin||n[requestedWith]||(n[requestedWith]=defaultHeaders.requestedWith),n[contentType]||a||(n[contentType]=t.contentType||defaultHeaders.contentType);for(r in n)n.hasOwnProperty(r)&&"setRequestHeader"in e&&e.setRequestHeader(r,n[r])}function setCredentials(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,r,n){var a=uniqid++,o=e.jsonpCallback||"callback",i=e.jsonpCallbackName||reqwest.getcallbackPrefix(a),s=new RegExp("((^|\\?|&)"+o+")=([^&]+)"),l=n.match(s),u=doc.createElement("script"),c=0,p=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return l?"?"===l[3]?n=n.replace(s,"$1="+i):i=l[3]:n=urlappend(n,o+"="+i),win[i]=generalCallback,u.type="text/javascript",u.src=n,u.async=!0,"undefined"==typeof u.onreadystatechange||p||(u.htmlFor=u.id="_reqwest_"+a),u.onload=u.onreadystatechange=function(){return!(u[readyState]&&"complete"!==u[readyState]&&"loaded"!==u[readyState]||c)&&(u.onload=u.onreadystatechange=null,u.onclick&&u.onclick(),t(lastValue),lastValue=void 0,head.removeChild(u),void(c=1))},head.appendChild(u),{abort:function(){u.onload=u.onreadystatechange=null,r({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(u),c=1}}}function getRequest(e,t){var r,n=this.o,a=(n.method||"GET").toUpperCase(),o="string"==typeof n?n:n.url,i=n.processData!==!1&&n.data&&"string"!=typeof n.data?reqwest.toQueryString(n.data):n.data||null,s=!1;return"jsonp"!=n.type&&"GET"!=a||!i||(o=urlappend(o,i),i=null),"jsonp"==n.type?handleJsonp(n,e,t,o):(r=n.xhr&&n.xhr(n)||xhr(n),r.open(a,o,n.async!==!1),setHeaders(r,n),setCredentials(r,n),win[xDomainRequest]&&r instanceof win[xDomainRequest]?(r.onload=e,r.onerror=t,r.onprogress=function(){},s=!0):r.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(r),s?setTimeout(function(){r.send(i)},200):r.send(i),r)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){return e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=win.JSON?win.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,r){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=r,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,r);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var r,n,a,o,i=e.name,s=e.tagName.toLowerCase(),l=function(e){e&&!e.disabled&&t(i,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&i)switch(s){case"input":/reset|button|image|file/i.test(e.type)||(r=/checkbox/i.test(e.type),n=/radio/i.test(e.type),a=e.value,(!(r||n)||e.checked)&&t(i,normalize(r&&""===a?"on":a)));break;case"textarea":t(i,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())l(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(o=0;e.length&&o<e.length;o++)e.options[o].selected&&l(e.options[o])}}function eachFormElement(){var e,t,r=this,n=function(e,t){var n,a,o;for(n=0;n<t.length;n++)for(o=e[byTag](t[n]),a=0;a<o.length;a++)serial(o[a],r)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,r),n(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,r){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(r)):e[t]=r},arguments),e}function buildParams(e,t,r,n){var a,o,i,s=/\[\]$/;if(isArray(t))for(o=0;t&&o<t.length;o++)i=t[o],r||s.test(e)?n(e,i):buildParams(e+"["+("object"==typeof i?o:"")+"]",i,r,n);else if(t&&"[object Object]"===t.toString())for(a in t)buildParams(e+"["+a+"]",t[a],r,n);else n(e,t)}var win=window,doc=document,httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,byTag="getElementsByTagName",readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",head=doc[byTag]("head")[0],uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=win[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(win[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}return win[xmlHttpRequest]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,r){e.push({name:t,value:r})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,r=Array.prototype.slice.call(arguments,0);return e=r.pop(),e&&e.nodeType&&r.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,r)},reqwest.toQueryString=function(e,t){var r,n,a=t||!1,o=[],i=encodeURIComponent,s=function(e,t){t="function"==typeof t?t():null==t?"":t,o[o.length]=i(e)+"="+i(t)};if(isArray(e))for(n=0;e&&n<e.length;n++)s(e[n].name,e[n].value);else for(r in e)e.hasOwnProperty(r)&&buildParams(r,e[r],a,s);return o.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})},{}],28:[function(e,t,r){var n=e("./core/core");e("./color/p5.Color"),e("./core/p5.Element"),e("./typography/p5.Font"),e("./core/p5.Graphics"),e("./core/p5.Renderer2D"),e("./image/p5.Image"),e("./math/p5.Vector"),e("./io/p5.TableRow"),e("./io/p5.Table"),e("./io/p5.XML"),e("./color/creating_reading"),e("./color/setting"),e("./core/constants"),e("./utilities/conversion"),e("./utilities/array_functions"),e("./utilities/string_functions"),e("./core/environment"),e("./image/image"),e("./image/loading_displaying"),e("./image/pixels"),e("./io/files"),e("./events/keyboard"),e("./events/acceleration"),e("./events/mouse"),e("./utilities/time_date"),e("./events/touch"),e("./math/math"),e("./math/calculation"),e("./math/random"),e("./math/noise"),e("./math/trigonometry"),e("./core/rendering"),e("./core/2d_primitives"),e("./core/attributes"),e("./core/curves"),e("./core/vertex"),e("./core/structure"),e("./core/transform"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./webgl/p5.RendererGL"),e("./webgl/p5.Geometry"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/primitives"),e("./webgl/loading"),e("./webgl/p5.Matrix"),e("./webgl/material"),e("./webgl/light"),e("./webgl/shader"),e("./webgl/camera"),e("./webgl/interaction");var a=function(){window.PHANTOMJS||window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&new n};"complete"===document.readyState?a():window.addEventListener("load",a,!1),t.exports=n},{"./color/creating_reading":30,"./color/p5.Color":31,"./color/setting":32,"./core/2d_primitives":33,"./core/attributes":34,"./core/constants":36,"./core/core":37,"./core/curves":38,"./core/environment":39,"./core/p5.Element":41,"./core/p5.Graphics":42,"./core/p5.Renderer2D":44,"./core/rendering":45,"./core/structure":47,"./core/transform":48,"./core/vertex":49,"./events/acceleration":50,"./events/keyboard":51,"./events/mouse":52,"./events/touch":53,"./image/image":55,"./image/loading_displaying":56,"./image/p5.Image":57,"./image/pixels":58,"./io/files":59,"./io/p5.Table":60,"./io/p5.TableRow":61,"./io/p5.XML":62,"./math/calculation":63,"./math/math":64,"./math/noise":65,"./math/p5.Vector":66,"./math/random":68,"./math/trigonometry":69,"./typography/attributes":70,"./typography/loading_displaying":71,"./typography/p5.Font":72,"./utilities/array_functions":73,"./utilities/conversion":74,"./utilities/string_functions":75,"./utilities/time_date":76,"./webgl/camera":77,"./webgl/interaction":78,"./webgl/light":79,"./webgl/loading":80,"./webgl/material":81,"./webgl/p5.Geometry":82,"./webgl/p5.Matrix":83,"./webgl/p5.RendererGL":86,"./webgl/p5.RendererGL.Immediate":84,"./webgl/p5.RendererGL.Retained":85,"./webgl/primitives":87,"./webgl/shader":88}],29:[function(e,t,r){var n=e("../core/core");n.ColorConversion={},n.ColorConversion._hsbaToHSLA=function(e){var t=e[0],r=e[1],n=e[2],a=(2-r)*n/2;return 0!==a&&(1===a?r=0:a<.5?r/=2-r:r=r*n/(2-2*a)),[t,r,a,e[3]]},n.ColorConversion._hsbaToRGBA=function(e){var t=6*e[0],r=e[1],n=e[2],a=[];if(0===r)a=[n,n,n,e[3]];else{var o,i,s,l=Math.floor(t),u=n*(1-r),c=n*(1-r*(t-l)),p=n*(1-r*(1+l-t));1===l?(o=c,i=n,s=u):2===l?(o=u,i=n,s=p):3===l?(o=u,i=c,s=n):4===l?(o=p,i=u,s=n):5===l?(o=n,i=u,s=c):(o=n,i=p,s=u),a=[o,i,s,e[3]]}return a},n.ColorConversion._hslaToHSBA=function(e){var t,r=e[0],n=e[1],a=e[2];return t=a<.5?(1+n)*a:a+n-a*n,n=2*(t-a)/t,[r,n,t,e[3]]},n.ColorConversion._hslaToRGBA=function(e){var t=6*e[0],r=e[1],n=e[2],a=[];if(0===r)a=[n,n,n,e[3]];else{var o;o=n<.5?(1+r)*n:n+r-n*r;var i=2*n-o,s=function(e,t,r){return e<0?e+=6:e>=6&&(e-=6),e<1?t+(r-t)*e:e<3?r:e<4?t+(r-t)*(4-e):t};a=[s(t+2,i,o),s(t,i,o),s(t-2,i,o),e[3]]}return a},n.ColorConversion._rgbaToHSBA=function(e){var t,r,n=e[0],a=e[1],o=e[2],i=Math.max(n,a,o),s=i-Math.min(n,a,o);return 0===s?(t=0,r=0):(r=s/i,n===i?t=(a-o)/s:a===i?t=2+(o-n)/s:o===i&&(t=4+(n-a)/s),t<0?t+=6:t>=6&&(t-=6)),[t/6,r,i,e[3]]},n.ColorConversion._rgbaToHSLA=function(e){var t,r,n=e[0],a=e[1],o=e[2],i=Math.max(n,a,o),s=Math.min(n,a,o),l=i+s,u=i-s;return 0===u?(t=0,r=0):(r=l<1?u/l:u/(2-u),n===i?t=(a-o)/u:a===i?t=2+(o-n)/u:o===i&&(t=4+(n-a)/u),t<0?t+=6:t>=6&&(t-=6)),[t/6,r,l/2,e[3]]},t.exports=n.ColorConversion},{"../core/core":37}],30:[function(e,t,r){var n=e("../core/core"),a=e("../core/constants");e("./p5.Color"),/**
 * Extracts the alpha value from a color or pixel array.
 *
 * @method alpha
 * @param {Object} obj p5.Color object or pixel array
 * @example
 * <div>
 * <code>
 * noStroke();
 * c = color(0, 126, 255, 102);
 * fill(c);
 * rect(15, 15, 35, 70);
 * value = alpha(c);  // Sets 'value' to 102
 * fill(value);
 * rect(50, 15, 35, 70);
 * </code>
 * </div>
 */
n.prototype.alpha=function(e){if(e instanceof n.Color||e instanceof Array)return this.color(e)._getAlpha();throw new Error("Needs p5.Color or pixel array as argument.")},/**
 * Extracts the blue value from a color or pixel array.
 *
 * @method blue
 * @param {Object} obj p5.Color object or pixel array
 * @example
 * <div>
 * <code>
 * c = color(175, 100, 220);  // Define color 'c'
 * fill(c);  // Use color variable 'c' as fill color
 * rect(15, 20, 35, 60);  // Draw left rectangle
 *
 * blueValue = blue(c);  // Get blue in 'c'
 * println(blueValue);  // Prints "220.0"
 * fill(0, 0, blueValue);  // Use 'blueValue' in new fill
 * rect(50, 20, 35, 60);  // Draw right rectangle
 * </code>
 * </div>
 */
n.prototype.blue=function(e){if(e instanceof n.Color||e instanceof Array)return this.color(e)._getBlue();throw new Error("Needs p5.Color or pixel array as argument.")},/**
 * Extracts the HSB brightness value from a color or pixel array.
 *
 * @method brightness
 * @param {Object} color p5.Color object or pixel array
 * @example
 * <div>
 * <code>
 * noStroke();
 * colorMode(HSB, 255);
 * c = color(0, 126, 255);
 * fill(c);
 * rect(15, 20, 35, 60);
 * value = brightness(c);  // Sets 'value' to 255
 * fill(value);
 * rect(50, 20, 35, 60);
 * </code>
 * </div>
 */
n.prototype.brightness=function(e){if(e instanceof n.Color||e instanceof Array)return this.color(e)._getBrightness();throw new Error("Needs p5.Color or pixel array as argument.")},/**
 * Creates colors for storing in variables of the color datatype. The
 * parameters are interpreted as RGB or HSB values depending on the
 * current colorMode(). The default mode is RGB values from 0 to 255
 * and, therefore, the function call color(255, 204, 0) will return a
 * bright yellow color.
 * <br><br>
 * Note that if only one value is provided to color(), it will be interpreted
 * as a grayscale value. Add a second value, and it will be used for alpha
 * transparency. When three values are specified, they are interpreted as
 * either RGB or HSB values. Adding a fourth value applies alpha
 * transparency. If a single string parameter is provided it will be
 * interpreted as a CSS-compatible color string.
 *
 * Colors are stored as Numbers or Arrays.
 *
 * @method color
 * @param  {Number|String} gray    number specifying value between white
 *                                 and black.
 * @param  {Number}        [alpha] alpha value relative to current color range
 * @return {Array}                 resulting color
 *
 * @example
 * <div>
 * <code>
 * var c = color(255, 204, 0);  // Define color 'c'
 * fill(c);  // Use color variable 'c' as fill color
 * noStroke();  // Don't draw a stroke around shapes
 * rect(30, 20, 55, 55);  // Draw rectangle
 * </code>
 * </div>
 *
 * <div>
 * <code>
 * var c = color(255, 204, 0);  // Define color 'c'
 * fill(c);  // Use color variable 'c' as fill color
 * noStroke();  // Don't draw a stroke around shapes
 * ellipse(25, 25, 80, 80);  // Draw left circle
 *
 * // Using only one value with color()
 * // generates a grayscale value.
 * var c = color(65);  // Update 'c' with grayscale value
 * fill(c);  // Use updated 'c' as fill color
 * ellipse(75, 75, 80, 80);  // Draw right circle
 * </code>
 * </div>
 *
 * <div>
 * <code>
 * // Named SVG & CSS colors may be used,
 * var c = color('magenta');
 * fill(c);  // Use 'c' as fill color
 * noStroke();  // Don't draw a stroke around shapes
 * rect(20, 20, 60, 60);  // Draw rectangle
 * </code>
 * </div>
 *
 * <div>
 * <code>
 * // as can hex color codes:
 * noStroke();  // Don't draw a stroke around shapes
 * var c = color('#0f0');
 * fill(c);  // Use 'c' as fill color
 * rect(0, 10, 45, 80);  // Draw rectangle
 *
 * c = color('#00ff00');
 * fill(c);  // Use updated 'c' as fill color
 * rect(55, 10, 45, 80);  // Draw rectangle
 * </code>
 * </div>
 *
 * <div>
 * <code>
 * // RGB and RGBA color strings are also supported:
 * // these all set to the same color (solid blue)
 * var c;
 * noStroke();  // Don't draw a stroke around shapes
 * c = color('rgb(0,0,255)');
 * fill(c); // Use 'c' as fill color
 * rect(10, 10, 35, 35);  // Draw rectangle
 *
 * c = color('rgb(0%, 0%, 100%)');
 * fill(c); // Use updated 'c' as fill color
 * rect(55, 10, 35, 35);  // Draw rectangle
 *
 * c = color('rgba(0, 0, 255, 1)');
 * fill(c); // Use updated 'c' as fill color
 * rect(10, 55, 35, 35);  // Draw rectangle
 *
 * c = color('rgba(0%, 0%, 100%, 1)');
 * fill(c); // Use updated 'c' as fill color
 * rect(55, 55, 35, 35);  // Draw rectangle
 * </code>
 * </div>
 *
 * <div>
 * <code>
 * // HSL color is also supported and can be specified
 * // by value
 * var c;
 * noStroke();  // Don't draw a stroke around shapes
 * c = color('hsl(160, 100%, 50%)');
 * fill(c);  // Use 'c' as fill color
 * rect(0, 10, 45, 80);  // Draw rectangle
 *
 * c = color('hsla(160, 100%, 50%, 0.5)');
 * fill(c); // Use updated 'c' as fill color
 * rect(55, 10, 45, 80);  // Draw rectangle
 * </code>
 * </div>
 *
 * <div>
 * <code>
 * // HSB color is also supported and can be specified
 * // by value
 * var c;
 * noStroke();  // Don't draw a stroke around shapes
 * c = color('hsb(160, 100%, 50%)');
 * fill(c);  // Use 'c' as fill color
 * rect(0, 10, 45, 80);  // Draw rectangle
 *
 * c = color('hsba(160, 100%, 50%, 0.5)');
 * fill(c); // Use updated 'c' as fill color
 * rect(55, 10, 45, 80);  // Draw rectangle
 * </code>
 * </div>
 *
 * <div>
 * <code>
 * var c;  // Declare color 'c'
 * noStroke();  // Don't draw a stroke around shapes
 *
 * // If no colorMode is specified, then the
 * // default of RGB with scale of 0-255 is used.
 * c = color(50, 55, 100);  // Create a color for 'c'
 * fill(c);  // Use color variable 'c' as fill color
 * rect(0, 10, 45, 80);  // Draw left rect
 *
 * colorMode(HSB, 100);  // Use HSB with scale of 0-100
 * c = color(50, 55, 100);  // Update 'c' with new color
 * fill(c);  // Use updated 'c' as fill color
 * rect(55, 10, 45, 80);  // Draw right rect
 * </code>
 * </div>
 */
n.prototype.color=function(){return arguments[0]instanceof n.Color?arguments[0]:arguments[0]instanceof Array?this instanceof n.Renderer?new n.Color(this,arguments[0]):new n.Color(this._renderer,arguments[0]):this instanceof n.Renderer?new n.Color(this,arguments):new n.Color(this._renderer,arguments)},/**
 * Extracts the green value from a color or pixel array.
 *
 * @method green
 * @param {Object} color p5.Color object or pixel array
 * @example
 * <div>
 * <code>
 * c = color(20, 75, 200);  // Define color 'c'
 * fill(c);  // Use color variable 'c' as fill color
 * rect(15, 20, 35, 60);  // Draw left rectangle
 *
 * greenValue = green(c);  // Get green in 'c'
 * println(greenValue);  // Print "75.0"
 * fill(0, greenValue, 0);  // Use 'greenValue' in new fill
 * rect(50, 20, 35, 60);  // Draw right rectangle
 * </code>
 * </div>
 */
n.prototype.green=function(e){if(e instanceof n.Color||e instanceof Array)return this.color(e)._getGreen();throw new Error("Needs p5.Color or pixel array as argument.")},/**
 * Extracts the hue value from a color or pixel array.
 *
 * Hue exists in both HSB and HSL. This function will return the
 * HSB-normalized hue when supplied with an HSB color object (or when supplied
 * with a pixel array while the color mode is HSB), but will default to the
 * HSL-normalized hue otherwise. (The values will only be different if the
 * maximum hue setting for each system is different.)
 *
 * @method hue
 * @param {Object} color p5.Color object or pixel array
 * @example
 * <div>
 * <code>
 * noStroke();
 * colorMode(HSB, 255);
 * c = color(0, 126, 255);
 * fill(c);
 * rect(15, 20, 35, 60);
 * value = hue(c);  // Sets 'value' to "0"
 * fill(value);
 * rect(50, 20, 35, 60);
 * </code>
 * </div>
 */
n.prototype.hue=function(e){if(e instanceof n.Color||e instanceof Array)return this.color(e)._getHue();throw new Error("Needs p5.Color or pixel array as argument.")},n.prototype.lerpColor=function(e,t,r){var n,o,i,s,l,u,c=this._renderer._colorMode,p=this._renderer._colorMaxes;if(c===a.RGB)l=e.levels.map(function(e){return e/255}),u=t.levels.map(function(e){return e/255});else if(c===a.HSB)e._getBrightness(),t._getBrightness(),l=e.hsba,u=t.hsba;else{if(c!==a.HSL)throw new Error(c+"cannot be used for interpolation.");e._getLightness(),t._getLightness(),l=e.hsla,u=t.hsla}return r=Math.max(Math.min(r,1),0),n=this.lerp(l[0],u[0],r),o=this.lerp(l[1],u[1],r),i=this.lerp(l[2],u[2],r),s=this.lerp(l[3],u[3],r),n*=p[c][0],o*=p[c][1],i*=p[c][2],s*=p[c][3],this.color(n,o,i,s)},/**
 * Extracts the HSL lightness value from a color or pixel array.
 *
 * @method lightness
 * @param {Object} color p5.Color object or pixel array
 * @example
 * <div>
 * <code>
 * noStroke();
 * colorMode(HSL);
 * c = color(156, 100, 50, 1);
 * fill(c);
 * rect(15, 20, 35, 60);
 * value = lightness(c);  // Sets 'value' to 50
 * fill(value);
 * rect(50, 20, 35, 60);
 * </code>
 * </div>
 */
n.prototype.lightness=function(e){if(e instanceof n.Color||e instanceof Array)return this.color(e)._getLightness();throw new Error("Needs p5.Color or pixel array as argument.")},/**
 * Extracts the red value from a color or pixel array.
 *
 * @method red
 * @param {Object} obj p5.Color object or pixel array
 * @example
 * <div>
 * <code>
 * c = color(255, 204, 0);  // Define color 'c'
 * fill(c);  // Use color variable 'c' as fill color
 * rect(15, 20, 35, 60);  // Draw left rectangle
 *
 * redValue = red(c);  // Get red in 'c'
 * println(redValue);  // Print "255.0"
 * fill(redValue, 0, 0);  // Use 'redValue' in new fill
 * rect(50, 20, 35, 60);  // Draw right rectangle
 * </code>
 * </div>
 *
 * <div>
 * <code>
 * colorMode(RGB, 255);
 * var c = color(127, 255, 0);
 * colorMode(RGB, 1);
 * var myColor = red(c);
 * print(myColor);
 * </code>
 * </div>
 */
n.prototype.red=function(e){if(e instanceof n.Color||e instanceof Array)return this.color(e)._getRed();throw new Error("Needs p5.Color or pixel array as argument.")},/**
 * Extracts the saturation value from a color or pixel array.
 *
 * Saturation is scaled differently in HSB and HSL. This function will return
 * the HSB saturation when supplied with an HSB color object (or when supplied
 * with a pixel array while the color mode is HSB), but will default to the
 * HSL saturation otherwise.
 *
 * @method saturation
 * @param {Object} color p5.Color object or pixel array
 * @example
 * <div>
 * <code>
 * noStroke();
 * colorMode(HSB, 255);
 * c = color(0, 126, 255);
 * fill(c);
 * rect(15, 20, 35, 60);
 * value = saturation(c);  // Sets 'value' to 126
 * fill(value);
 * rect(50, 20, 35, 60);
 * </code>
 * </div>
 */
n.prototype.saturation=function(e){if(e instanceof n.Color||e instanceof Array)return this.color(e)._getSaturation();throw new Error("Needs p5.Color or pixel array as argument.")},t.exports=n},{"../core/constants":36,"../core/core":37,"./p5.Color":31}],31:[function(e,t,r){var n=e("../core/core"),a=e("../core/constants"),o=e("./color_conversion");n.Color=function(e,t){if(this.mode=e._colorMode,this.maxes=e._colorMaxes,this.mode!==a.RGB&&this.mode!==a.HSL&&this.mode!==a.HSB)throw new Error(this.mode+" is an invalid colorMode.");return this._array=n.Color._parseInputs.apply(e,t),this.levels=this._array.map(function(e){return Math.round(255*e)}),this},n.Color.prototype.toString=function(){var e=this.levels,t=this._array[3];return"rgba("+e[0]+","+e[1]+","+e[2]+","+t+")"},n.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},n.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[a.RGB][2]},n.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=o._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[a.HSB][2]},n.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[a.RGB][1]},n.Color.prototype._getHue=function(){return this.mode===a.HSB?(this.hsba||(this.hsba=o._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[a.HSB][0]):(this.hsla||(this.hsla=o._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[a.HSL][0])},n.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=o._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[a.HSL][2]},n.Color.prototype._getRed=function(){return this._array[0]*this.maxes[a.RGB][0]},n.Color.prototype._getSaturation=function(){return this.mode===a.HSB?(this.hsba||(this.hsba=o._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[a.HSB][1]):(this.hsla||(this.hsla=o._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[a.HSL][1])};var i={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},s=/\s*/,l=/(\d{1,3})/,u=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,c=new RegExp(u.source+"%"),p={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",l.source,",",l.source,",",l.source,"\\)$"].join(s.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",c.source,",",c.source,",",c.source,"\\)$"].join(s.source),"i"),RGBA:new RegExp(["^rgba\\(",l.source,",",l.source,",",l.source,",",u.source,"\\)$"].join(s.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",c.source,",",c.source,",",c.source,",",u.source,"\\)$"].join(s.source),"i"),HSL:new RegExp(["^hsl\\(",l.source,",",c.source,",",c.source,"\\)$"].join(s.source),"i"),HSLA:new RegExp(["^hsla\\(",l.source,",",c.source,",",c.source,",",u.source,"\\)$"].join(s.source),"i"),HSB:new RegExp(["^hsb\\(",l.source,",",c.source,",",c.source,"\\)$"].join(s.source),"i"),HSBA:new RegExp(["^hsba\\(",l.source,",",c.source,",",c.source,",",u.source,"\\)$"].join(s.source),"i")};n.Color._parseInputs=function(){var e=arguments.length,t=this._colorMode,r=this._colorMaxes,s=[];if(e>=3)return s[0]=arguments[0]/r[t][0],s[1]=arguments[1]/r[t][1],s[2]=arguments[2]/r[t][2],"number"==typeof arguments[3]?s[3]=arguments[3]/r[t][3]:s[3]=1,s=s.map(function(e){return Math.max(Math.min(e,1),0)}),t===a.HSL?o._hslaToRGBA(s):t===a.HSB?o._hsbaToRGBA(s):s;if(1===e&&"string"==typeof arguments[0]){var l=arguments[0].trim().toLowerCase();if(i[l])return n.Color._parseInputs.apply(this,[i[l]]);if(p.HEX3.test(l))return s=p.HEX3.exec(l).slice(1).map(function(e){return parseInt(e+e,16)/255}),s[3]=1,s;if(p.HEX6.test(l))return s=p.HEX6.exec(l).slice(1).map(function(e){return parseInt(e,16)/255}),s[3]=1,s;if(p.RGB.test(l))return s=p.RGB.exec(l).slice(1).map(function(e){return e/255}),s[3]=1,s;if(p.RGB_PERCENT.test(l))return s=p.RGB_PERCENT.exec(l).slice(1).map(function(e){return parseFloat(e)/100}),s[3]=1,s;if(p.RGBA.test(l))return s=p.RGBA.exec(l).slice(1).map(function(e,t){return 3===t?parseFloat(e):e/255});if(p.RGBA_PERCENT.test(l))return s=p.RGBA_PERCENT.exec(l).slice(1).map(function(e,t){return 3===t?parseFloat(e):parseFloat(e)/100});if(p.HSL.test(l)?(s=p.HSL.exec(l).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100}),s[3]=1):p.HSLA.test(l)&&(s=p.HSLA.exec(l).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100})),s.length)return o._hslaToRGBA(s);if(p.HSB.test(l)?(s=p.HSB.exec(l).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100}),s[3]=1):p.HSBA.test(l)&&(s=p.HSBA.exec(l).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100})),s.length)return o._hsbaToRGBA(s);s=[1,1,1,1]}else{if(1!==e&&2!==e||"number"!=typeof arguments[0])throw new Error(arguments+"is not a valid color representation.");s[0]=arguments[0]/r[t][2],s[1]=arguments[0]/r[t][2],s[2]=arguments[0]/r[t][2],"number"==typeof arguments[1]?s[3]=arguments[1]/r[t][3]:s[3]=1,s=s.map(function(e){return Math.max(Math.min(e,1),0)})}return s},t.exports=n.Color},{"../core/constants":36,"../core/core":37,"./color_conversion":29}],32:[function(e,t,r){var n=e("../core/core"),a=e("../core/constants");e("./p5.Color"),n.prototype.background=function(){return arguments[0]instanceof n.Image?this.image(arguments[0],0,0,this.width,this.height):this._renderer.background.apply(this._renderer,arguments),this},n.prototype.clear=function(){return this._renderer.clear(),this},n.prototype.colorMode=function(){if(arguments[0]===a.RGB||arguments[0]===a.HSB||arguments[0]===a.HSL){this._renderer._colorMode=arguments[0];var e=this._renderer._colorMaxes[this._renderer._colorMode];2===arguments.length?(e[0]=arguments[1],e[1]=arguments[1],e[2]=arguments[1],e[3]=arguments[1]):4===arguments.length?(e[0]=arguments[1],e[1]=arguments[2],e[2]=arguments[3]):5===arguments.length&&(e[0]=arguments[1],e[1]=arguments[2],e[2]=arguments[3],e[3]=arguments[4])}return this},n.prototype.fill=function(){return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),this._renderer.fill.apply(this._renderer,arguments),this},n.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},n.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},n.prototype.stroke=function(){return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),this._renderer.stroke.apply(this._renderer,arguments),this},t.exports=n},{"../core/constants":36,"../core/core":37,"./p5.Color":31}],33:[function(e,t,r){var n=e("./core"),a=e("./constants");e("./error_helpers"),n.prototype.arc=function(e,t,r,n,o,i,s){for(var l=new Array(arguments.length),u=0;u<l.length;++u)l[u]=arguments[u];if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(this._angleMode===a.DEGREES&&(o=this.radians(o),i=this.radians(i));o<0;)o+=a.TWO_PI;for(;i<0;)i+=a.TWO_PI;return o%=a.TWO_PI,i%=a.TWO_PI,i===o&&(i+=a.TWO_PI),o=o<=a.HALF_PI?Math.atan(r/n*Math.tan(o)):o>a.HALF_PI&&o<=3*a.HALF_PI?Math.atan(r/n*Math.tan(o))+a.PI:Math.atan(r/n*Math.tan(o))+a.TWO_PI,i=i<=a.HALF_PI?Math.atan(r/n*Math.tan(i)):i>a.HALF_PI&&i<=3*a.HALF_PI?Math.atan(r/n*Math.tan(i))+a.PI:Math.atan(r/n*Math.tan(i))+a.TWO_PI,o>i&&(i+=a.TWO_PI),r=Math.abs(r),n=Math.abs(n),this._renderer.arc(e,t,r,n,o,i,s),this},n.prototype.ellipse=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return 3===e.length&&e.push(e[2]),this._renderer.isP3D?(e[3]<0&&(e[3]=Math.abs(e[3])),e[4]<0&&(e[4]=Math.abs(e[4]))):(e[2]<0&&(e[2]=Math.abs(e[2])),e[3]<0&&(e[3]=Math.abs(e[3]))),this._renderer._doStroke||this._renderer._doFill?(this._renderer.isP3D?this._renderer.ellipse(e):this._renderer.ellipse(e[0],e[1],e[2],e[3]),this):this},n.prototype.line=function(){if(!this._renderer._doStroke)return this;for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return this._renderer.isP3D?this._renderer.line(e[0],e[1],e[2],e[3],e[4],e[5]):this._renderer.line(e[0],e[1],e[2],e[3]),this},n.prototype.point=function(){if(!this._renderer._doStroke)return this;for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return this._renderer.isP3D?this._renderer.point(e[0],e[1],e[2]):this._renderer.point(e[0],e[1]),this},n.prototype.quad=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return this._renderer.isP3D?this._renderer.quad(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11]):this._renderer.quad(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]),this},n.prototype.rect=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];if(this._renderer.isP3D?(e[3]<0&&(e[3]=Math.abs(e[3])),e[4]<0&&(e[4]=Math.abs(e[4]))):this._renderer._rectMode!==a.CORNERS&&(e[2]<0&&(e[2]=Math.abs(e[2])),e[3]<0&&(e[3]=Math.abs(e[3]))),this._renderer._doStroke||this._renderer._doFill)return this._renderer.rect(e),this},n.prototype.triangle=function(){if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return this._renderer.isP3D?this._renderer.triangle(e):this._renderer.triangle(e[0],e[1],e[2],e[3],e[4],e[5]),this},t.exports=n},{"./constants":36,"./core":37,"./error_helpers":40}],34:[function(e,t,r){var n=e("./core"),a=e("./constants");n.prototype.ellipseMode=function(e){return e!==a.CORNER&&e!==a.CORNERS&&e!==a.RADIUS&&e!==a.CENTER||(this._renderer._ellipseMode=e),this},n.prototype.noSmooth=function(){return this._renderer.noSmooth(),this},n.prototype.rectMode=function(e){return e!==a.CORNER&&e!==a.CORNERS&&e!==a.RADIUS&&e!==a.CENTER||(this._renderer._rectMode=e),this},n.prototype.smooth=function(){return this._renderer.smooth(),this},n.prototype.strokeCap=function(e){return e!==a.ROUND&&e!==a.SQUARE&&e!==a.PROJECT||this._renderer.strokeCap(e),this},n.prototype.strokeJoin=function(e){return e!==a.ROUND&&e!==a.BEVEL&&e!==a.MITER||this._renderer.strokeJoin(e),this},n.prototype.strokeWeight=function(e){return this._renderer.strokeWeight(e),this},t.exports=n},{"./constants":36,"./core":37}],35:[function(e,t,r){var n=e("./constants");t.exports={modeAdjust:function(e,t,r,a,o){return o===n.CORNER?{x:e,y:t,w:r,h:a}:o===n.CORNERS?{x:e,y:t,w:r-e,h:a-t}:o===n.RADIUS?{x:e-r,y:t-a,w:2*r,h:2*a}:o===n.CENTER?{x:e-.5*r,y:t-.5*a,w:r,h:a}:void 0},arcModeAdjust:function(e,t,r,a,o){return o===n.CORNER?{x:e+.5*r,y:t+.5*a,w:r,h:a}:o===n.CORNERS?{x:e,y:t,w:r+e,h:a+t}:o===n.RADIUS?{x:e,y:t,w:2*r,h:2*a}:o===n.CENTER?{x:e,y:t,w:r,h:a}:void 0}}},{"./constants":36}],36:[function(e,t,r){var n=Math.PI;t.exports={P2D:"p2d",WEBGL:"webgl",ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:n/2,PI:n,QUARTER_PI:n/4,TAU:2*n,TWO_PI:2*n,DEGREES:"degrees",RADIANS:"radians",CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",TOP:"top",BOTTOM:"bottom",BASELINE:"alphabetic",POINTS:0,LINES:1,LINE_STRIP:3,LINE_LOOP:2,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",HSL:"hsl",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"normal",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"source-over",OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",THRESHOLD:"threshold",GRAY:"gray",OPAQUE:"opaque",INVERT:"invert",POSTERIZE:"posterize",DILATE:"dilate",ERODE:"erode",BLUR:"blur",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",_DEFAULT_TEXT_FILL:"#000000",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:"middle",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve",_DEFAULT_STROKE:"#000000",_DEFAULT_FILL:"#FFFFFF"}},{}],37:[function(e,t,r){e("./shim");var n=e("./constants"),a=function(e,t,r){2===arguments.length&&"boolean"==typeof t&&(r=t,t=void 0),/**
   * Called directly before setup(), the preload() function is used to handle
   * asynchronous loading of external files. If a preload function is
   * defined, setup() will wait until any load calls within have finished.
   * Nothing besides load calls should be inside preload (loadImage,
   * loadJSON, loadFont, loadStrings, etc).
   *
   * @method preload
   * @example
   * <div><code>
   * var img;
   * var c;
   * function preload() {  // preload() runs once
   *   img = loadImage('assets/laDefense.jpg');
   * }
   *
   * function setup() {  // setup() waits until preload() is done
   *   img.loadPixels();
   *   // get color of middle pixel
   *   c = img.get(img.width/2, img.height/2);
   * }
   *
   * function draw() {
   *   background(c);
   *   image(img, 25, 25, 50, 50);
   * }
   * </code></div>
   */
this._setupDone=!1,this._pixelDensity=Math.ceil(window.devicePixelRatio)||1,this._userNode=t,this._curElement=null,this._elements=[],this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._styles=[],this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._events.wheel=null,this._loadingScreenId="p5_loading",window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){this._userNode&&"string"==typeof this._userNode&&(this._userNode=document.getElementById(this._userNode)),this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,"p2d",!0);var e=this.preload||window.preload;if(e){var t=document.getElementById(this._loadingScreenId);if(!t){t=document.createElement("div"),t.innerHTML="Loading...",t.style.position="absolute",t.id=this._loadingScreenId;var r=this._userNode||document.body;r.appendChild(t)}for(var n in this._preloadMethods){this._preloadMethods[n]=this._preloadMethods[n]||a;var o=this._preloadMethods[n];o!==a.prototype&&o!==a||(o=this._isGlobal?window:this),this._registeredPreloadMethods[n]=o[n],o[n]=this._wrapPreload(o,n)}e(),this._runIfPreloadsAreDone()}else this._setup(),this._runFrames(),this._draw()}.bind(this),this._runIfPreloadsAreDone=function(){var e=this._isGlobal?window:this;if(0===e._preloadCount){var t=document.getElementById(e._loadingScreenId);t&&t.parentNode.removeChild(t),e._setup(),e._runFrames(),e._draw()}},this._decrementPreload=function(){var e=this._isGlobal?window:this;e._setProperty("_preloadCount",e._preloadCount-1),e._runIfPreloadsAreDone()},this._wrapPreload=function(e,t){return function(){this._incrementPreload();for(var r=new Array(arguments.length),n=0;n<r.length;++n)r[n]=arguments[n];return r.push(this._decrementPreload.bind(this)),this._registeredPreloadMethods[t].apply(e,r)}.bind(this)},this._incrementPreload=function(){var e=this._isGlobal?window:this;e._setProperty("_preloadCount",e._preloadCount+1)},this._setup=function(){var e=this._isGlobal?window:this;if("function"==typeof e.preload)for(var t in this._preloadMethods)e[t]=this._preloadMethods[t][t],e[t]&&this&&(e[t]=e[t].bind(this));"function"==typeof e.setup&&e.setup();for(var r=document.getElementsByTagName("canvas"),n=0;n<r.length;n++){var a=r[n];"true"===a.dataset.hidden&&(a.style.visibility="",delete a.dataset.hidden)}this._setupDone=!0}.bind(this),this._draw=function(){var e=window.performance.now(),t=e-this._lastFrameTime,r=1e3/this._targetFrameRate,n=5;(!this._loop||t>=r-n)&&(this.resetMatrix(),this._renderer.isP3D&&this._renderer._update(),this._setProperty("frameCount",this.frameCount+1),this.redraw(),this._updateMouseCoords(),this._updateTouchCoords(),this._frameRate=1e3/(e-this._lastFrameTime),this._lastFrameTime=e),this._loop&&(this._requestAnimId=window.requestAnimationFrame(this._draw))}.bind(this),this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this),this._setProperty=function(e,t){this[e]=t,this._isGlobal&&(window[e]=t)}.bind(this),this.remove=function(){if(this._curElement){this._loop=!1,this._requestAnimId&&window.cancelAnimationFrame(this._requestAnimId);for(var e in this._events)window.removeEventListener(e,this._events[e]);for(var t=0;t<this._elements.length;t++){var r=this._elements[t];r.elt.parentNode&&r.elt.parentNode.removeChild(r.elt);for(var n in r._events)r.elt.removeEventListener(n,r._events[n])}var o=this;if(this._registeredMethods.remove.forEach(function(e){"undefined"!=typeof e&&e.call(o)}),this._isGlobal){for(var i in a.prototype)try{delete window[i]}catch(s){window[i]=void 0}for(var l in this)if(this.hasOwnProperty(l))try{delete window[l]}catch(s){window[l]=void 0}}}}.bind(this),this._registeredMethods.init.forEach(function(e){"undefined"!=typeof e&&e.call(this)},this);var n=this._createFriendlyGlobalFunctionBinder();if(e)e(this);else{this._isGlobal=!0;for(var o in a.prototype)if("function"==typeof a.prototype[o]){var i=o.substring(2);this._events.hasOwnProperty(i)||n(o,a.prototype[o].bind(this))}else n(o,a.prototype[o]);for(var s in this)this.hasOwnProperty(s)&&n(s,this[s])}for(var l in this._events){var u=this["_on"+l];if(u){var c=u.bind(this);window.addEventListener(l,c),this._events[l]=c}}var p=function(){this._setProperty("focused",!0)}.bind(this),h=function(){this._setProperty("focused",!1)}.bind(this);window.addEventListener("focus",p),window.addEventListener("blur",h),this.registerMethod("remove",function(){window.removeEventListener("focus",p),window.removeEventListener("blur",h)}),r?this._start():"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)};for(var o in n)a.prototype[o]=n[o];a.prototype._preloadMethods={loadJSON:a.prototype,loadImage:a.prototype,loadStrings:a.prototype,loadXML:a.prototype,loadShape:a.prototype,loadTable:a.prototype,loadFont:a.prototype,loadModel:a.prototype},a.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},a.prototype._registeredPreloadMethods={},a.prototype.registerPreloadMethod=function(e,t){a.prototype._preloadMethods.hasOwnProperty(e)||(a.prototype._preloadMethods[e]=t)},a.prototype.registerMethod=function(e,t){a.prototype._registeredMethods.hasOwnProperty(e)||(a.prototype._registeredMethods[e]=[]),a.prototype._registeredMethods[e].push(t)},a.prototype._createFriendlyGlobalFunctionBinder=function(e){e=e||{};var t=e.globalObject||window,r=e.log||console.log.bind(console),n={print:!0};return function(e,o){if("undefined"!=typeof IS_MINIFIED||"function"!=typeof o||e in a.prototype._preloadMethods)t[e]=o;else try{if(e in t&&!(e in n))throw new Error('global "'+e+'" already exists');Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o},set:function(n){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}),r('You just changed the value of "'+e+"\", which was a p5 function. This could cause problems later if you're not careful.")}})}catch(i){r('p5 had problems creating the global function "'+e+'", possibly because your code is already using that name as a variable. You may want to rename your variable to something else.'),t[e]=o}}},t.exports=a},{"./constants":36,"./shim":46}],38:[function(e,t,r){var n=e("./core");e("./error_helpers");var a=20,o=20;n.prototype.bezier=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return this._renderer.isP3D?this._validateParameters("bezier",e,["Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number"]):this._validateParameters("bezier",e,["Number","Number","Number","Number","Number","Number","Number","Number"]),this._renderer._doStroke?(this._renderer.isP3D?(e.push(a),this._renderer.bezier(e)):this._renderer.bezier(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]),this):this},n.prototype.bezierDetail=function(e){return a=e,this},n.prototype.bezierPoint=function(e,t,r,n,a){var o=1-a;return Math.pow(o,3)*e+3*Math.pow(o,2)*a*t+3*o*Math.pow(a,2)*r+Math.pow(a,3)*n},n.prototype.bezierTangent=function(e,t,r,n,a){var o=1-a;return 3*n*Math.pow(a,2)-3*r*Math.pow(a,2)+6*r*o*a-6*t*o*a+3*t*Math.pow(o,2)-3*e*Math.pow(o,2)},n.prototype.curve=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return this._renderer.isP3D?this._validateParameters("curve",e,["Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number"]):this._validateParameters("curve",e,["Number","Number","Number","Number","Number","Number","Number","Number"]),this._renderer._doStroke?(this._renderer.isP3D?(e.push(o),this._renderer.curve(e)):this._renderer.curve(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]),this):this},n.prototype.curveDetail=function(e){return o=e,this},n.prototype.curveTightness=function(e){this._renderer._curveTightness=e},n.prototype.curvePoint=function(e,t,r,n,a){var o=a*a*a,i=a*a,s=-.5*o+i-.5*a,l=1.5*o-2.5*i+1,u=-1.5*o+2*i+.5*a,c=.5*o-.5*i;return e*s+t*l+r*u+n*c},n.prototype.curveTangent=function(e,t,r,n,a){var o=a*a,i=-3*o/2+2*a-.5,s=9*o/2-5*a,l=-9*o/2+4*a+.5,u=3*o/2-a;return e*i+t*s+r*l+n*u},t.exports=n},{"./core":37,"./error_helpers":40}],39:[function(e,t,r){function n(e){var t=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;if(!t)throw new Error("Fullscreen not enabled in this browser.");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function a(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}var o=e("./core"),i=e("./constants"),s=[i.ARROW,i.CROSS,i.HAND,i.MOVE,i.TEXT,i.WAIT];o.prototype._frameRate=0,o.prototype._lastFrameTime=window.performance.now(),o.prototype._targetFrameRate=60,window.console&&console.log?o.prototype.print=function(e){try{var t=JSON.parse(JSON.stringify(e));console.log(t)}catch(r){console.log(e)}}:o.prototype.print=function(){},o.prototype.println=o.prototype.print,o.prototype.frameCount=0,o.prototype.focused=document.hasFocus(),o.prototype.cursor=function(e,t,r){var n="auto",a=this._curElement.elt;if(s.indexOf(e)>-1)n=e;else if("string"==typeof e){var o="";t&&r&&"number"==typeof t&&"number"==typeof r&&(o=t+" "+r),n="http://"!==e.substring(0,6)?"url("+e+") "+o+", auto":/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(e)?"url("+e+") "+o+", auto":e}a.style.cursor=n},o.prototype.frameRate=function(e){return"number"!=typeof e||e<=0?this._frameRate:(this._setProperty("_targetFrameRate",e),this._runFrames(),this)},o.prototype.getFrameRate=function(){return this.frameRate()},o.prototype.setFrameRate=function(e){return this.frameRate(e)},o.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},o.prototype.displayWidth=screen.width,o.prototype.displayHeight=screen.height,o.prototype.windowWidth=document.documentElement.clientWidth,o.prototype.windowHeight=document.documentElement.clientHeight,o.prototype._onresize=function(e){this._setProperty("windowWidth",window.innerWidth),this._setProperty("windowHeight",window.innerHeight);var t,r=this._isGlobal?window:this;"function"==typeof r.windowResized&&(t=r.windowResized(e),void 0===t||t||e.preventDefault())},o.prototype.width=0,o.prototype.height=0,o.prototype.fullscreen=function(e){return"undefined"==typeof e?document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement:void(e?n(document.documentElement):a())},o.prototype.pixelDensity=function(e){return"number"!=typeof e?this._pixelDensity:(this._pixelDensity=e,void this.resizeCanvas(this.width,this.height,!0))},o.prototype.displayDensity=function(){return window.devicePixelRatio},o.prototype.getURL=function(){return location.href},o.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(e){return""!==e})},o.prototype.getURLParams=function(){for(var e,t=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,r={};null!=(e=t.exec(location.search));)e.index===t.lastIndex&&t.lastIndex++,r[e[1]]=e[2];return r},t.exports=o},{"./constants":36,"./core":37}],40:[function(e,t,r){function n(e,t,r){if(e.match(/^p5\./)){var n=e.split(".");return r instanceof l[n[1]]}return"Boolean"===e||e.toLowerCase()===t||y.indexOf(e)>-1&&g(r)}function a(e,t,r){u&&(o(),u=!1),"undefined"===f(r)?r="#B40033":"number"===f(r)&&(r=_[r])}function o(){var e="transparent",t="#ED225D",r="#ED225D",n="white";console.log("%c    _ \n /\\| |/\\ \n \\ ` ' /  \n / , . \\  \n \\/|_|\\/ \n\n%c> p5.js says: Welcome! This is your friendly debugger. To turn me off switch to using “p5.min.js”.","background-color:"+e+";color:"+t+";","background-color:"+r+";color:"+n+";")}function i(){var t={},r=function(e){return Object.getOwnPropertyNames(e).filter(function(e){return"_"!==e[0]&&(!(e in t)&&(t[e]=!0,!0))}).map(function(t){var r;return r="function"==typeof e[t]?"function":t===t.toUpperCase()?"constant":"variable",{name:t,type:r}})};C=[].concat(r(l.prototype),r(e("./constants"))),C.sort(function(e,t){return t.name.length-e.name.length})}function s(e,t){t||(t=console.log.bind(console)),C||i(),C.some(function(r){if(e.message&&e.message.indexOf(r.name)!==-1)return t("%cDid you just try to use p5.js's "+r.name+("function"===r.type?"() ":" ")+r.type+"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: "+T,"color: #B40033"),!0})}for(var l=e("./core"),u=!1,c={},p=c.toString,h=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],d=0;d<h.length;d++)c["[object "+h[d]+"]"]=h[d].toLowerCase();var f=function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?c[p.call(e)]||"object":typeof e},m=Array.isArray||function(e){return"array"===f(e)},g=function(e){return!m(e)&&e-parseFloat(e)+1>=0},y=["Number","Integer","Number/Constant"],v=0,w=1,x=2,b=3,_=["#2D7BB6","#EE9900","#4DB200","#C83C00"];l.prototype._validateParameters=function(e,t,r){m(r[0])||(r=[r]);for(var o,i=Math.abs(t.length-r[0].length),s=0,l=1,u=r.length;l<u;l++){var c=Math.abs(t.length-r[l].length);c<=i&&(s=l,i=c)}var p="X";i>0&&(o="You wrote "+e+"(",t.length>0&&(o+=p+Array(t.length).join(","+p)),o+="). "+e+" was expecting "+r[s].length+" parameters. Try "+e+"(",r[s].length>0&&(o+=p+Array(r[s].length).join(","+p)),o+=").",r.length>1&&(o+=" "+e+" takes different numbers of parameters depending on what you want to do. Click this link to learn more: "),a(o,e,v));for(var h=0;h<r.length;h++)for(var d=0;d<r[h].length&&d<t.length;d++){var g=r[h][d],y=f(t[d]);"undefined"===y||null===y?a("It looks like "+e+" received an empty variable in spot #"+(d+1)+". If not intentional, this is often a problem with scope: [link to scope].",e,w):"*"===g||n(g,y,t[d])||(o=e+" was expecting a "+g.toLowerCase()+" for parameter #"+(d+1)+", received ",o+="string"===y?'"'+t[d]+'"':t[d],o+=" instead.",r.length>1&&(o+=" "+e+" takes different numbers of parameters depending on what you want to do. Click this link to learn more:"),a(o,e,x))}},l.prototype._validateParameters=function(){return!0};var S={0:{fileType:"image",method:"loadImage",message:" hosting the image online,"},1:{fileType:"XML file",method:"loadXML"},2:{fileType:"table file",method:"loadTable"},3:{fileType:"text file",method:"loadStrings"}};l._friendlyFileLoadError=function(e,t){var r=S[e],n="It looks like there was a problem loading your "+r.fileType+". Try checking if the file path%c ["+t+"] %cis correct,"+(r.message||"")+" or running a local server.";a(n,r.method,b)};var C=null,T="https://github.com/processing/p5.js/wiki/Frequently-Asked-Questions#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";l.prototype._helpForMisusedAtTopLevelCode=s,"complete"!==document.readyState&&(window.addEventListener("error",s,!1),window.addEventListener("load",function(){window.removeEventListener("error",s,!1)})),t.exports=l},{"./constants":36,"./core":37}],41:[function(e,t,r){function n(e,t,r){var n=t.bind(r);r.elt.addEventListener(e,n,!1),r._events[e]=n}var a=e("./core");a.Element=function(e,t){this.elt=e,this._pInst=t,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},a.Element.prototype.parent=function(e){return 0===arguments.length?this.elt.parentNode:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof a.Element&&(e=e.elt),e.appendChild(this.elt),this)},a.Element.prototype.id=function(e){return 0===arguments.length?this.elt.id:(this.elt.id=e,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},a.Element.prototype["class"]=function(e){return 0===arguments.length?this.elt.className:(this.elt.className=e,this)},a.Element.prototype.mousePressed=function(e){return n("mousedown",e,this),n("touchstart",e,this),this},a.Element.prototype.mouseWheel=function(e){return n("wheel",e,this),this},a.Element.prototype.mouseReleased=function(e){return n("mouseup",e,this),n("touchend",e,this),this},a.Element.prototype.mouseClicked=function(e){return n("click",e,this),this},a.Element.prototype.mouseMoved=function(e){return n("mousemove",e,this),n("touchmove",e,this),this},a.Element.prototype.mouseOver=function(e){return n("mouseover",e,this),this},a.Element.prototype.changed=function(e){return n("change",e,this),this},a.Element.prototype.input=function(e){return n("input",e,this),this},a.Element.prototype.mouseOut=function(e){return n("mouseout",e,this),this},a.Element.prototype.touchStarted=function(e){return n("touchstart",e,this),n("mousedown",e,this),this},a.Element.prototype.touchMoved=function(e){return n("touchmove",e,this),n("mousemove",e,this),this},a.Element.prototype.touchEnded=function(e){return n("touchend",e,this),n("mouseup",e,this),this},a.Element.prototype.dragOver=function(e){return n("dragover",e,this),this},a.Element.prototype.dragLeave=function(e){return n("dragleave",e,this),this},a.Element.prototype.drop=function(e,t){function r(t){var r=new a.File(t);return function(t){r.data=t.target.result,e(r)}}return window.File&&window.FileReader&&window.FileList&&window.Blob?(n("dragover",function(e){e.stopPropagation(),e.preventDefault()},this),n("dragleave",function(e){e.stopPropagation(),e.preventDefault()},this),arguments.length>1&&n("drop",t,this),n("drop",function(e){e.stopPropagation(),e.preventDefault();for(var t=e.dataTransfer.files,n=0;n<t.length;n++){var a=t[n],o=new FileReader;o.onload=r(a),a.type.indexOf("text")>-1?o.readAsText(a):o.readAsDataURL(a)}},this)):console.log("The File APIs are not fully supported in this browser."),this},a.Element.prototype._setProperty=function(e,t){this[e]=t},t.exports=a.Element},{"./core":37}],42:[function(e,t,r){var n=e("./core"),a=e("./constants");n.Graphics=function(e,t,r,o){var i=r||a.P2D,s=document.createElement("canvas"),l=this._userNode||document.body;l.appendChild(s),n.Element.call(this,s,o,!1),this._styles=[],this.width=e,this.height=t,this._pixelDensity=o._pixelDensity,i===a.WEBGL?this._renderer=new n.RendererGL(s,this,(!1)):this._renderer=new n.Renderer2D(s,this,(!1)),this._renderer.resize(e,t),this._renderer._applyDefaults(),o._elements.push(this);for(var u in n.prototype)this[u]||("function"==typeof n.prototype[u]?this[u]=n.prototype[u].bind(this):this[u]=n.prototype[u]);return this},n.Graphics.prototype=Object.create(n.Element.prototype),t.exports=n.Graphics},{"./constants":36,"./core":37}],43:[function(e,t,r){function n(e){var t=0,r=0;if(e.offsetParent){do t+=e.offsetLeft,r+=e.offsetTop;while(e=e.offsetParent)}else t+=e.offsetLeft,r+=e.offsetTop;return[t,r]}var a=e("./core"),o=e("../core/constants");a.Renderer=function(e,t,r){a.Element.call(this,e,t),this.canvas=e,this._pInst=t,r?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=o.NORMAL,this._textAscent=null,this._textDescent=null,this._rectMode=o.CORNER,this._ellipseMode=o.CENTER,this._curveTightness=0,this._imageMode=o.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1,this._colorMode=o.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]}},a.Renderer.prototype=Object.create(a.Element.prototype),a.Renderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.elt.width=e*this._pInst._pixelDensity,this.elt.height=t*this._pInst._pixelDensity,this.elt.style.width=e+"px",this.elt.style.height=t+"px",this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},a.Renderer.prototype.textLeading=function(e){return arguments.length&&arguments[0]?(this._setProperty("_textLeading",e),this):this._textLeading},a.Renderer.prototype.textSize=function(e){return arguments.length&&arguments[0]?(this._setProperty("_textSize",e),this._setProperty("_textLeading",e*o._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},a.Renderer.prototype.textStyle=function(e){return arguments.length&&arguments[0]?(e!==o.NORMAL&&e!==o.ITALIC&&e!==o.BOLD||this._setProperty("_textStyle",e),this._applyTextProperties()):this._textStyle},a.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},a.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},a.Renderer.prototype._applyDefaults=function(){return this},a.Renderer.prototype._isOpenType=function(e){return e=e||this._textFont,"object"==typeof e&&e.font&&e.font.supported},a.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var e=document.createElement("span");e.style.fontFamily=this._textFont,e.style.fontSize=this._textSize+"px",e.innerHTML="ABCjgq|";var t=document.createElement("div");t.style.display="inline-block",t.style.width="1px",t.style.height="0px";var r=document.createElement("div");r.appendChild(e),r.appendChild(t),r.style.height="0px",r.style.overflow="hidden",document.body.appendChild(r),t.style.verticalAlign="baseline";var a=n(t),o=n(e),i=a[1]-o[1];t.style.verticalAlign="bottom",a=n(t),o=n(e);var s=a[1]-o[1],l=s-i;return document.body.removeChild(r),this._setProperty("_textAscent",i),this._setProperty("_textDescent",l),this},t.exports=a.Renderer},{"../core/constants":36,"./core":37}],44:[function(e,t,r){var n=e("./core"),a=e("./canvas"),o=e("./constants"),i=e("../image/filters");e("./p5.Renderer");var s="rgba(0,0,0,0)";n.Renderer2D=function(e,t,r){return n.Renderer.call(this,e,t,r),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},n.Renderer2D.prototype=Object.create(n.Renderer.prototype),n.Renderer2D.prototype._applyDefaults=function(){this.drawingContext.fillStyle=o._DEFAULT_FILL,this.drawingContext.strokeStyle=o._DEFAULT_STROKE,this.drawingContext.lineCap=o.ROUND,this.drawingContext.font="normal 12px sans-serif"},n.Renderer2D.prototype.resize=function(e,t){n.Renderer.prototype.resize.call(this,e,t),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},n.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),arguments[0]instanceof n.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var e=this.drawingContext.fillStyle,t=this._pInst.color.apply(this,arguments),r=t.toString();this.drawingContext.fillStyle=r,this.drawingContext.fillRect(0,0,this.width,this.height),this.drawingContext.fillStyle=e}this.drawingContext.restore()},n.Renderer2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)},n.Renderer2D.prototype.fill=function(){var e=this.drawingContext,t=this._pInst.color.apply(this,arguments);e.fillStyle=t.toString()},n.Renderer2D.prototype.stroke=function(){var e=this.drawingContext,t=this._pInst.color.apply(this,arguments);e.strokeStyle=t.toString()},n.Renderer2D.prototype.image=function(e,t,r,a,o,i,s,l,u){var c;try{this._tint&&(n.MediaElement&&e instanceof n.MediaElement&&e.loadPixels(),e.canvas&&(c=this._getTintedImageCanvas(e))),c||(c=e.canvas||e.elt),this.drawingContext.drawImage(c,t,r,a,o,i,s,l,u)}catch(p){if("NS_ERROR_NOT_AVAILABLE"!==p.name)throw p}},n.Renderer2D.prototype._getTintedImageCanvas=function(e){if(!e.canvas)return e;var t=i._toPixels(e.canvas),r=document.createElement("canvas");r.width=e.canvas.width,r.height=e.canvas.height;for(var n=r.getContext("2d"),a=n.createImageData(e.canvas.width,e.canvas.height),o=a.data,s=0;s<t.length;s+=4){var l=t[s],u=t[s+1],c=t[s+2],p=t[s+3];o[s]=l*this._tint[0]/255,o[s+1]=u*this._tint[1]/255,o[s+2]=c*this._tint[2]/255,o[s+3]=p*this._tint[3]/255}return n.putImageData(a,0,0),r},n.Renderer2D.prototype.blendMode=function(e){this.drawingContext.globalCompositeOperation=e},n.Renderer2D.prototype.blend=function(){var e=this.drawingContext.globalCompositeOperation,t=arguments[arguments.length-1],r=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=t,this._pInst?this._pInst.copy.apply(this._pInst,r):this.copy.apply(this,r),this.drawingContext.globalCompositeOperation=e},n.Renderer2D.prototype.copy=function(){var e,t,r,a,o,i,s,l,u;if(9===arguments.length)e=arguments[0],t=arguments[1],r=arguments[2],a=arguments[3],o=arguments[4],i=arguments[5],s=arguments[6],l=arguments[7],u=arguments[8];else{if(8!==arguments.length)throw new Error("Signature not supported");e=this._pInst,t=arguments[0],r=arguments[1],a=arguments[2],o=arguments[3],i=arguments[4],s=arguments[5],l=arguments[6],u=arguments[7]}n.Renderer2D._copyHelper(e,t,r,a,o,i,s,l,u)},n.Renderer2D._copyHelper=function(e,t,r,n,a,o,i,s,l){var u=e.canvas.width/e.width;this.drawingContext.drawImage(e.canvas,u*t,u*r,u*n,u*a,o,i,s,l)},n.Renderer2D.prototype.get=function(e,t,r,a){if(void 0===e&&void 0===t&&void 0===r&&void 0===a?(e=0,t=0,r=this.width,a=this.height):void 0===r&&void 0===a&&(r=1,a=1),e+r<0||t+a<0||e>this.width||t>this.height)return[0,0,0,255];var o=this._pInst||this,i=o._pixelDensity;if(o.loadPixels(),e=Math.floor(e),t=Math.floor(t),1===r&&1===a){var s=i*i*4*(t*this.width+e);return[o.pixels[s],o.pixels[s+1],o.pixels[s+2],o.pixels[s+3]]}var l=e*i,u=t*i,c=Math.min(r,o.width),p=Math.min(a,o.height),h=c*i,d=p*i,f=new n.Image(c,p);return f.canvas.getContext("2d").drawImage(this.canvas,l,u,h,d,0,0,c,p),f},n.Renderer2D.prototype.loadPixels=function(){var e=this._pixelDensity||this._pInst._pixelDensity,t=this.width*e,r=this.height*e,n=this.drawingContext.getImageData(0,0,t,r);this._pInst?(this._pInst._setProperty("imageData",n),this._pInst._setProperty("pixels",n.data)):(this._setProperty("imageData",n),this._setProperty("pixels",n.data))},n.Renderer2D.prototype.set=function(e,t,r){if(e=Math.floor(e),t=Math.floor(t),r instanceof n.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this.drawingContext.drawImage(r.canvas,e,t),this.loadPixels.call(this._pInst),this.drawingContext.restore();else{var a=this._pInst||this,o=0,i=0,s=0,l=0,u=4*(t*a._pixelDensity*(this.width*a._pixelDensity)+e*a._pixelDensity);if(a.imageData||a.loadPixels.call(a),"number"==typeof r)u<a.pixels.length&&(o=r,i=r,s=r,l=255);else if(r instanceof Array){if(r.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");u<a.pixels.length&&(o=r[0],i=r[1],s=r[2],l=r[3])}else r instanceof n.Color&&u<a.pixels.length&&(o=r.levels[0],i=r.levels[1],s=r.levels[2],l=r.levels[3]);for(var c=0;c<a._pixelDensity;c++)for(var p=0;p<a._pixelDensity;p++)u=4*((t*a._pixelDensity+p)*this.width*a._pixelDensity+(e*a._pixelDensity+c)),a.pixels[u]=o,a.pixels[u+1]=i,a.pixels[u+2]=s,a.pixels[u+3]=l}},n.Renderer2D.prototype.updatePixels=function(e,t,r,n){var a=this._pixelDensity||this._pInst._pixelDensity;void 0===e&&void 0===t&&void 0===r&&void 0===n&&(e=0,t=0,r=this.width,n=this.height),r*=a,n*=a,this._pInst?this.drawingContext.putImageData(this._pInst.imageData,e,t,0,0,r,n):this.drawingContext.putImageData(this.imageData,e,t,0,0,r,n)},n.Renderer2D.prototype._acuteArcToBezier=function(e,t){var r=t/2,n=Math.cos(r),a=Math.sin(r),o=1/Math.tan(r),i=e+r,s=Math.cos(i),l=Math.sin(i),u=(4-n)/3,c=a+(n-u)*o;return{ax:Math.cos(e),ay:Math.sin(e),bx:u*s+c*l,by:u*l-c*s,cx:u*s-c*l,cy:u*l+c*s,dx:Math.cos(e+t),dy:Math.sin(e+t)}},n.Renderer2D.prototype.arc=function(e,t,r,n,i,s,l){for(var u=this.drawingContext,c=a.arcModeAdjust(e,t,r,n,this._ellipseMode),p=c.w/2,h=c.h/2,d=1e-5,f=0,m=[];s-i>d;)f=Math.min(s-i,o.HALF_PI),m.push(this._acuteArcToBezier(i,f)),i+=f;return this._doFill&&(u.beginPath(),m.forEach(function(e,t){0===t&&u.moveTo(c.x+e.ax*p,c.y+e.ay*h),u.bezierCurveTo(c.x+e.bx*p,c.y+e.by*h,c.x+e.cx*p,c.y+e.cy*h,c.x+e.dx*p,c.y+e.dy*h)}),l!==o.PIE&&null!=l||u.lineTo(c.x,c.y),u.closePath(),u.fill()),this._doStroke&&(u.beginPath(),m.forEach(function(e,t){0===t&&u.moveTo(c.x+e.ax*p,c.y+e.ay*h),u.bezierCurveTo(c.x+e.bx*p,c.y+e.by*h,c.x+e.cx*p,c.y+e.cy*h,c.x+e.dx*p,c.y+e.dy*h)}),l===o.PIE?(u.lineTo(c.x,c.y),u.closePath()):l===o.CHORD&&u.closePath(),u.stroke()),this},n.Renderer2D.prototype.ellipse=function(e,t,r,n){var o=this.drawingContext,i=this._doFill,l=this._doStroke;if(i&&!l){if(o.fillStyle===s)return this}else if(!i&&l&&o.strokeStyle===s)return this;var u=a.modeAdjust(e,t,r,n,this._ellipseMode),c=.5522847498,p=u.w/2*c,h=u.h/2*c,d=u.x+u.w,f=u.y+u.h,m=u.x+u.w/2,g=u.y+u.h/2;o.beginPath(),o.moveTo(u.x,g),o.bezierCurveTo(u.x,g-h,m-p,u.y,m,u.y),o.bezierCurveTo(m+p,u.y,d,g-h,d,g),o.bezierCurveTo(d,g+h,m+p,f,m,f),o.bezierCurveTo(m-p,f,u.x,g+h,u.x,g),o.closePath(),i&&o.fill(),l&&o.stroke()},n.Renderer2D.prototype.line=function(e,t,r,n){var a=this.drawingContext;return this._doStroke?a.strokeStyle===s?this:(a.lineWidth%2===1&&a.translate(.5,.5),a.beginPath(),a.moveTo(e,t),a.lineTo(r,n),a.stroke(),a.lineWidth%2===1&&a.translate(-.5,-.5),this):this},n.Renderer2D.prototype.point=function(e,t){var r=this.drawingContext,n=r.strokeStyle,a=r.fillStyle;return this._doStroke?r.strokeStyle===s?this:(e=Math.round(e),t=Math.round(t),r.fillStyle=n,r.lineWidth>1?(r.beginPath(),r.arc(e,t,r.lineWidth/2,0,o.TWO_PI,!1),r.fill()):r.fillRect(e,t,1,1),void(r.fillStyle=a)):this},n.Renderer2D.prototype.quad=function(e,t,r,n,a,o,i,l){var u=this.drawingContext,c=this._doFill,p=this._doStroke;if(c&&!p){if(u.fillStyle===s)return this}else if(!c&&p&&u.strokeStyle===s)return this;return u.beginPath(),u.moveTo(e,t),u.lineTo(r,n),u.lineTo(a,o),u.lineTo(i,l),u.closePath(),c&&u.fill(),p&&u.stroke(),this},n.Renderer2D.prototype.rect=function(e){var t=e[0],r=e[1],n=e[2],o=e[3],i=e[4],l=e[5],u=e[6],c=e[7],p=this.drawingContext,h=this._doFill,d=this._doStroke;if(h&&!d){if(p.fillStyle===s)return this}else if(!h&&d&&p.strokeStyle===s)return this;var f=a.modeAdjust(t,r,n,o,this._rectMode);if(this._doStroke&&p.lineWidth%2===1&&p.translate(.5,.5),p.beginPath(),"undefined"==typeof i)p.rect(f.x,f.y,f.w,f.h);else{"undefined"==typeof l&&(l=i),"undefined"==typeof u&&(u=l),"undefined"==typeof c&&(c=u);var m=f.x,g=f.y,y=f.w,v=f.h,w=y/2,x=v/2;y<2*i&&(i=w),v<2*i&&(i=x),y<2*l&&(l=w),v<2*l&&(l=x),y<2*u&&(u=w),v<2*u&&(u=x),y<2*c&&(c=w),v<2*c&&(c=x),p.beginPath(),p.moveTo(m+i,g),p.arcTo(m+y,g,m+y,g+v,l),p.arcTo(m+y,g+v,m,g+v,u),p.arcTo(m,g+v,m,g,c),p.arcTo(m,g,m+y,g,i),p.closePath()}return this._doFill&&p.fill(),this._doStroke&&p.stroke(),this._doStroke&&p.lineWidth%2===1&&p.translate(-.5,-.5),this},n.Renderer2D.prototype.triangle=function(e,t,r,n,a,o){var i=this.drawingContext,l=this._doFill,u=this._doStroke;if(l&&!u){if(i.fillStyle===s)return this}else if(!l&&u&&i.strokeStyle===s)return this;i.beginPath(),i.moveTo(e,t),i.lineTo(r,n),i.lineTo(a,o),i.closePath(),l&&i.fill(),u&&i.stroke()},n.Renderer2D.prototype.endShape=function(e,t,r,n,a,i,s){if(0===t.length)return this;if(!this._doStroke&&!this._doFill)return this;var l,u=e===o.CLOSE;u&&!i&&t.push(t[0]);var c,p,h=t.length;if(!r||s!==o.POLYGON&&null!==s)if(!n||s!==o.POLYGON&&null!==s)if(!a||s!==o.POLYGON&&null!==s)if(s===o.POINTS)for(c=0;c<h;c++)l=t[c],this._doStroke&&this._pInst.stroke(l[6]),this._pInst.point(l[0],l[1]);else if(s===o.LINES)for(c=0;c+1<h;c+=2)l=t[c],
this._doStroke&&this._pInst.stroke(t[c+1][6]),this._pInst.line(l[0],l[1],t[c+1][0],t[c+1][1]);else if(s===o.TRIANGLES)for(c=0;c+2<h;c+=3)l=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(l[0],l[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(t[c+2][0],t[c+2][1]),this.drawingContext.lineTo(l[0],l[1]),this._doFill&&(this._pInst.fill(t[c+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(t[c+2][6]),this.drawingContext.stroke()),this.drawingContext.closePath();else if(s===o.TRIANGLE_STRIP)for(c=0;c+1<h;c++)l=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(l[0],l[1]),this._doStroke&&this._pInst.stroke(t[c+1][6]),this._doFill&&this._pInst.fill(t[c+1][5]),c+2<h&&(this.drawingContext.lineTo(t[c+2][0],t[c+2][1]),this._doStroke&&this._pInst.stroke(t[c+2][6]),this._doFill&&this._pInst.fill(t[c+2][5])),this._doFillStrokeClose();else if(s===o.TRIANGLE_FAN){if(h>2)for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[1][0],t[1][1]),this.drawingContext.lineTo(t[2][0],t[2][1]),this._doFill&&this._pInst.fill(t[2][5]),this._doStroke&&this._pInst.stroke(t[2][6]),this._doFillStrokeClose(),c=3;c<h;c++)l=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[c-1][0],t[c-1][1]),this.drawingContext.lineTo(l[0],l[1]),this._doFill&&this._pInst.fill(l[5]),this._doStroke&&this._pInst.stroke(l[6]),this._doFillStrokeClose()}else if(s===o.QUADS)for(c=0;c+3<h;c+=4){for(l=t[c],this.drawingContext.beginPath(),this.drawingContext.moveTo(l[0],l[1]),p=1;p<4;p++)this.drawingContext.lineTo(t[c+p][0],t[c+p][1]);this.drawingContext.lineTo(l[0],l[1]),this._doFill&&this._pInst.fill(t[c+3][5]),this._doStroke&&this._pInst.stroke(t[c+3][6]),this._doFillStrokeClose()}else if(s===o.QUAD_STRIP){if(h>3)for(c=0;c+1<h;c+=2)l=t[c],this.drawingContext.beginPath(),c+3<h?(this.drawingContext.moveTo(t[c+2][0],t[c+2][1]),this.drawingContext.lineTo(l[0],l[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this.drawingContext.lineTo(t[c+3][0],t[c+3][1]),this._doFill&&this._pInst.fill(t[c+3][5]),this._doStroke&&this._pInst.stroke(t[c+3][6])):(this.drawingContext.moveTo(l[0],l[1]),this.drawingContext.lineTo(t[c+1][0],t[c+1][1])),this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),c=1;c<h;c++)l=t[c],l.isVert&&(l.moveTo?this.drawingContext.moveTo(l[0],l[1]):this.drawingContext.lineTo(l[0],l[1]));this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),c=0;c<h;c++)t[c].isVert?t[c].moveTo?this.drawingContext.moveTo([0],t[c][1]):this.drawingContext.lineTo(t[c][0],t[c][1]):this.drawingContext.quadraticCurveTo(t[c][0],t[c][1],t[c][2],t[c][3]);this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),c=0;c<h;c++)t[c].isVert?t[c].moveTo?this.drawingContext.moveTo(t[c][0],t[c][1]):this.drawingContext.lineTo(t[c][0],t[c][1]):this.drawingContext.bezierCurveTo(t[c][0],t[c][1],t[c][2],t[c][3],t[c][4],t[c][5]);this._doFillStrokeClose()}else if(h>3){var d=[],f=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[1][0],t[1][1]),c=1;c+2<h;c++)l=t[c],d[0]=[l[0],l[1]],d[1]=[l[0]+(f*t[c+1][0]-f*t[c-1][0])/6,l[1]+(f*t[c+1][1]-f*t[c-1][1])/6],d[2]=[t[c+1][0]+(f*t[c][0]-f*t[c+2][0])/6,t[c+1][1]+(f*t[c][1]-f*t[c+2][1])/6],d[3]=[t[c+1][0],t[c+1][1]],this.drawingContext.bezierCurveTo(d[1][0],d[1][1],d[2][0],d[2][1],d[3][0],d[3][1]);u&&this.drawingContext.lineTo(t[c+1][0],t[c+1][1]),this._doFillStrokeClose()}return r=!1,n=!1,a=!1,i=!1,u&&t.pop(),this},n.Renderer2D.prototype.noSmooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!1:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!1:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!1:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!1),this},n.Renderer2D.prototype.smooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!0:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!0:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!0:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!0),this},n.Renderer2D.prototype.strokeCap=function(e){return e!==o.ROUND&&e!==o.SQUARE&&e!==o.PROJECT||(this.drawingContext.lineCap=e),this},n.Renderer2D.prototype.strokeJoin=function(e){return e!==o.ROUND&&e!==o.BEVEL&&e!==o.MITER||(this.drawingContext.lineJoin=e),this},n.Renderer2D.prototype.strokeWeight=function(e){return"undefined"==typeof e||0===e?this.drawingContext.lineWidth=1e-4:this.drawingContext.lineWidth=e,this},n.Renderer2D.prototype._getFill=function(){return this.drawingContext.fillStyle},n.Renderer2D.prototype._getStroke=function(){return this.drawingContext.strokeStyle},n.Renderer2D.prototype.bezier=function(e,t,r,n,a,o,i,s){return this._pInst.beginShape(),this._pInst.vertex(e,t),this._pInst.bezierVertex(r,n,a,o,i,s),this._pInst.endShape(),this},n.Renderer2D.prototype.curve=function(e,t,r,n,a,o,i,s){return this._pInst.beginShape(),this._pInst.curveVertex(e,t),this._pInst.curveVertex(r,n),this._pInst.curveVertex(a,o),this._pInst.curveVertex(i,s),this._pInst.endShape(),this},n.Renderer2D.prototype._doFillStrokeClose=function(){this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke(),this.drawingContext.closePath()},n.Renderer2D.prototype.applyMatrix=function(e,t,r,n,a,o){this.drawingContext.transform(e,t,r,n,a,o)},n.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},n.Renderer2D.prototype.rotate=function(e){this.drawingContext.rotate(e)},n.Renderer2D.prototype.scale=function(e,t){return this.drawingContext.scale(e,t),this},n.Renderer2D.prototype.shearX=function(e){return this._pInst._angleMode===o.DEGREES&&(e=this._pInst.degrees(e)),this.drawingContext.transform(1,0,this._pInst.tan(e),1,0,0),this},n.Renderer2D.prototype.shearY=function(e){return this._pInst._angleMode===o.DEGREES&&(e=this._pInst.degrees(e)),this.drawingContext.transform(1,this._pInst.tan(e),0,1,0,0),this},n.Renderer2D.prototype.translate=function(e,t){return this.drawingContext.translate(e,t),this},n.Renderer2D.prototype.text=function(e,t,r,n,a){var i,s,l,u,c,p,h,d,f,m,g=this._pInst,y=Number.MAX_VALUE;if(this._doFill||this._doStroke){if("string"!=typeof e&&(e=e.toString()),e=e.replace(/(\t)/g,"  "),i=e.split("\n"),"undefined"!=typeof n){for(f=0,l=0;l<i.length;l++)for(c="",d=i[l].split(" "),s=0;s<d.length;s++)p=c+d[s]+" ",h=this.textWidth(p),h>n?(c=d[s]+" ",f+=g.textLeading()):c=p;switch(this._rectMode===o.CENTER&&(t-=n/2,r-=a/2),this.drawingContext.textAlign){case o.CENTER:t+=n/2;break;case o.RIGHT:t+=n}if("undefined"!=typeof a){switch(this.drawingContext.textBaseline){case o.BOTTOM:r+=a-f;break;case o._CTX_MIDDLE:r+=(a-f)/2;break;case o.BASELINE:m=!0,this.drawingContext.textBaseline=o.TOP}y=r+a-g.textAscent()}for(l=0;l<i.length;l++){for(c="",d=i[l].split(" "),s=0;s<d.length;s++)p=c+d[s]+" ",h=this.textWidth(p),h>n&&c.length>0?(this._renderText(g,c,t,r,y),c=d[s]+" ",r+=g.textLeading()):c=p;this._renderText(g,c,t,r,y),r+=g.textLeading()}}else{var v=0,w=g.textAlign().vertical;for(w===o.CENTER?v=(i.length-1)*g.textLeading()/2:w===o.BOTTOM&&(v=(i.length-1)*g.textLeading()),u=0;u<i.length;u++)this._renderText(g,i[u],t,r-v,y),r+=g.textLeading()}return m&&(this.drawingContext.textBaseline=o.BASELINE),g}},n.Renderer2D.prototype._renderText=function(e,t,r,n,a){if(!(n>=a))return e.push(),this._isOpenType()?this._textFont._renderPath(t,r,n,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(t,r,n),this._doFill&&(this.drawingContext.fillStyle=this._fillSet?this.drawingContext.fillStyle:o._DEFAULT_TEXT_FILL,this.drawingContext.fillText(t,r,n))),e.pop(),e},n.Renderer2D.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):this.drawingContext.measureText(e).width},n.Renderer2D.prototype.textAlign=function(e,t){if(arguments.length)return e!==o.LEFT&&e!==o.RIGHT&&e!==o.CENTER||(this.drawingContext.textAlign=e),t!==o.TOP&&t!==o.BOTTOM&&t!==o.CENTER&&t!==o.BASELINE||(t===o.CENTER?this.drawingContext.textBaseline=o._CTX_MIDDLE:this.drawingContext.textBaseline=t),this._pInst;var r=this.drawingContext.textBaseline;return r===o._CTX_MIDDLE&&(r=o.CENTER),{horizontal:this.drawingContext.textAlign,vertical:r}},n.Renderer2D.prototype._applyTextProperties=function(){var e,t=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),e=this._textFont,this._isOpenType()&&(e=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font=this._textStyle+" "+this._textSize+"px "+e,t},n.Renderer2D.prototype.push=function(){this.drawingContext.save()},n.Renderer2D.prototype.pop=function(){this.drawingContext.restore()},t.exports=n.Renderer2D},{"../image/filters":54,"./canvas":35,"./constants":36,"./core":37,"./p5.Renderer":43}],45:[function(e,t,r){var n=e("./core"),a=e("./constants");e("./p5.Graphics"),e("./p5.Renderer2D"),e("../webgl/p5.RendererGL");var o="defaultCanvas0";n.prototype.createCanvas=function(e,t,r){var i,s,l=r||a.P2D;if(arguments[3]&&(i="boolean"==typeof arguments[3]&&arguments[3]),l===a.WEBGL)s=document.getElementById(o),s&&s.parentNode.removeChild(s),s=document.createElement("canvas"),s.id=o;else if(i){s=document.createElement("canvas");for(var u=0;document.getElementById("defaultCanvas"+u);)u++;o="defaultCanvas"+u,s.id=o}else s=this.canvas;return this._setupDone||(s.dataset.hidden=!0,s.style.visibility="hidden"),this._userNode?this._userNode.appendChild(s):document.body.appendChild(s),l===a.WEBGL?(this._setProperty("_renderer",new n.RendererGL(s,this,(!0))),this._isdefaultGraphics=!0):this._isdefaultGraphics||(this._setProperty("_renderer",new n.Renderer2D(s,this,(!0))),this._isdefaultGraphics=!0),this._renderer.resize(e,t),this._renderer._applyDefaults(),i&&this._elements.push(this._renderer),this._renderer},n.prototype.resizeCanvas=function(e,t,r){if(this._renderer){var n={};for(var a in this.drawingContext){var o=this.drawingContext[a];"object"!=typeof o&&"function"!=typeof o&&(n[a]=o)}this._renderer.resize(e,t);for(var i in n)this.drawingContext[i]=n[i];r||this.redraw()}},n.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},n.prototype.createGraphics=function(e,t,r){return new n.Graphics(e,t,r,this)},n.prototype.blendMode=function(e){if(e!==a.BLEND&&e!==a.DARKEST&&e!==a.LIGHTEST&&e!==a.DIFFERENCE&&e!==a.MULTIPLY&&e!==a.EXCLUSION&&e!==a.SCREEN&&e!==a.REPLACE&&e!==a.OVERLAY&&e!==a.HARD_LIGHT&&e!==a.SOFT_LIGHT&&e!==a.DODGE&&e!==a.BURN&&e!==a.ADD&&e!==a.NORMAL)throw new Error("Mode "+e+" not recognized.");this._renderer.blendMode(e)},t.exports=n},{"../webgl/p5.RendererGL":86,"./constants":36,"./core":37,"./p5.Graphics":42,"./p5.Renderer2D":44}],46:[function(e,t,r){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}(),window.performance=window.performance||{},window.performance.now=function(){var e=Date.now();return window.performance.now||window.performance.mozNow||window.performance.msNow||window.performance.oNow||window.performance.webkitNow||function(){return Date.now()-e}}(),function(){"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1})}()},{}],47:[function(e,t,r){var n=e("./core");n.prototype.exit=function(){throw"exit() not implemented, see remove()"},n.prototype.noLoop=function(){this._loop=!1},n.prototype.loop=function(){this._loop=!0,this._draw()},n.prototype.push=function(){this._renderer.push(),this._styles.push({_doStroke:this._renderer._doStroke,_strokeSet:this._renderer._strokeSet,_doFill:this._renderer._doFill,_fillSet:this._renderer._fillSet,_tint:this._renderer._tint,_imageMode:this._renderer._imageMode,_rectMode:this._renderer._rectMode,_ellipseMode:this._renderer._ellipseMode,_colorMode:this._renderer._colorMode,_textFont:this._renderer._textFont,_textLeading:this._renderer._textLeading,_textSize:this._renderer._textSize,_textStyle:this._renderer._textStyle})},n.prototype.pop=function(){this._renderer.pop();var e=this._styles.pop();for(var t in e)this._renderer[t]=e[t]},n.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},n.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},n.prototype.redraw=function(){var e=this.setup||window.setup,t=this.draw||window.draw;if("function"==typeof t){"undefined"==typeof e&&this.scale(this._pixelDensity,this._pixelDensity);var r=this;this._registeredMethods.pre.forEach(function(e){e.call(r)}),t(),this._registeredMethods.post.forEach(function(e){e.call(r)})}},n.prototype.size=function(){var e="size() is not a valid p5 function, to set the size of the ";throw e+="drawing canvas, please use createCanvas() instead"},t.exports=n},{"./core":37}],48:[function(e,t,r){var n=e("./core"),a=e("./constants");n.prototype.applyMatrix=function(e,t,r,n,a,o){return this._renderer.applyMatrix(e,t,r,n,a,o),this},n.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},n.prototype.printMatrix=function(){throw new Error("printMatrix() not implemented")},n.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},n.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},n.prototype.rotate=function(){for(var e,t=new Array(arguments.length),r=0;r<t.length;++r)t[r]=arguments[r];return this._angleMode===a.DEGREES?e=this.radians(t[0]):this._angleMode===a.RADIANS&&(e=t[0]),t.length>1?this._renderer.rotate(e,t[1]):this._renderer.rotate(e),this},n.prototype.rotateX=function(e){for(var t=new Array(arguments.length),r=0;r<t.length;++r)t[r]=arguments[r];if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";return this._validateParameters("rotateX",t,[["Number"]]),this._renderer.rotateX(e),this},n.prototype.rotateY=function(e){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";for(var t=new Array(arguments.length),r=0;r<t.length;++r)t[r]=arguments[r];return this._validateParameters("rotateY",t,[["Number"]]),this._renderer.rotateY(e),this},n.prototype.rotateZ=function(e){if(!this._renderer.isP3D)throw"not supported in p2d. Please use webgl mode";for(var t=new Array(arguments.length),r=0;r<t.length;++r)t[r]=arguments[r];return this._validateParameters("rotateZ",t,[["Number"]]),this._renderer.rotateZ(e),this},n.prototype.scale=function(){for(var e,t,r,a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];return a[0]instanceof n.Vector?(e=a[0].x,t=a[0].y,r=a[0].z):a[0]instanceof Array?(e=a[0][0],t=a[0][1],r=a[0][2]||1):1===a.length?e=t=r=a[0]:(e=a[0],t=a[1],r=a[2]||1),this._renderer.isP3D?this._renderer.scale.call(this._renderer,e,t,r):this._renderer.scale.call(this._renderer,e,t),this},n.prototype.shearX=function(e){return this._angleMode===a.DEGREES&&(e=this.radians(e)),this._renderer.shearX(e),this},n.prototype.shearY=function(e){return this._angleMode===a.DEGREES&&(e=this.radians(e)),this._renderer.shearY(e),this},n.prototype.translate=function(e,t,r){for(var n=new Array(arguments.length),a=0;a<n.length;++a)n[a]=arguments[a];return this._renderer.isP3D?(this._validateParameters("translate",n,[["Number","Number","Number"]]),this._renderer.translate(e,t,r)):(this._validateParameters("translate",n,[["Number","Number"]]),this._renderer.translate(e,t)),this},t.exports=n},{"./constants":36,"./core":37}],49:[function(e,t,r){var n=e("./core"),a=e("./constants"),o=null,i=[],s=[],l=!1,u=!1,c=!1,p=!1,h=!0;n.prototype.beginContour=function(){return s=[],p=!0,this},n.prototype.beginShape=function(e){return o=e===a.POINTS||e===a.LINES||e===a.TRIANGLES||e===a.TRIANGLE_FAN||e===a.TRIANGLE_STRIP||e===a.QUADS||e===a.QUAD_STRIP?e:null,this._renderer.isP3D?this._renderer.beginShape(e):(i=[],s=[]),this},n.prototype.bezierVertex=function(e,t,r,n,a,o){if(0===i.length)throw"vertex() must be used once before calling bezierVertex()";l=!0;for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return u.isVert=!1,p?s.push(u):i.push(u),this},n.prototype.curveVertex=function(e,t){return u=!0,this.vertex(e,t),this},n.prototype.endContour=function(){var e=s[0].slice();e.isVert=s[0].isVert,e.moveTo=!1,s.push(e),h&&(i.push(i[0]),h=!1);for(var t=0;t<s.length;t++)i.push(s[t]);return this},n.prototype.endShape=function(e){if(this._renderer.isP3D)this._renderer.endShape(e,u,l,c,p,o);else{if(0===i.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var t=e===a.CLOSE;t&&!p&&i.push(i[0]),this._renderer.endShape(e,i,u,l,c,p,o),u=!1,l=!1,c=!1,p=!1,h=!0,t&&i.pop()}return this},n.prototype.quadraticVertex=function(e,t,r,n){if(this._contourInited){var o={};return o.x=e,o.y=t,o.x3=r,o.y3=n,o.type=a.QUADRATIC,this._contourVertices.push(o),this}if(!(i.length>0))throw"vertex() must be used once before calling quadraticVertex()";c=!0;for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return l.isVert=!1,p?s.push(l):i.push(l),this},n.prototype.vertex=function(e,t,r){for(var n=new Array(arguments.length),a=0;a<n.length;++a)n[a]=arguments[a];if(this._renderer.isP3D)this._validateParameters("vertex",n,[["Number","Number","Number"]]),this._renderer.vertex(arguments[0],arguments[1],arguments[2]);else{this._validateParameters("vertex",n,[["Number","Number"],["Number","Number","Number"]]);var o=[];o.isVert=!0,o[0]=e,o[1]=t,o[2]=0,o[3]=0,o[4]=0,o[5]=this._renderer._getFill(),o[6]=this._renderer._getStroke(),r&&(o.moveTo=r),p?(0===s.length&&(o.moveTo=!0),s.push(o)):i.push(o)}return this},t.exports=n},{"./constants":36,"./core":37}],50:[function(e,t,r){var n=e("../core/core");n.prototype.deviceOrientation=void 0,n.prototype.accelerationX=0,n.prototype.accelerationY=0,n.prototype.accelerationZ=0,n.prototype.pAccelerationX=0,n.prototype.pAccelerationY=0,n.prototype.pAccelerationZ=0,n.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},n.prototype.rotationX=0,n.prototype.rotationY=0,n.prototype.rotationZ=0,n.prototype.pRotationX=0,n.prototype.pRotationY=0,n.prototype.pRotationZ=0;var a,o,i,s=0,l=0,u=0,c="clockwise",p="clockwise",h="clockwise";n.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},n.prototype.turnAxis=void 0;var d=.5,f=30;n.prototype.setMoveThreshold=function(e){"number"==typeof e&&(d=e)},n.prototype.setShakeThreshold=function(e){"number"==typeof e&&(f=e)},n.prototype._ondeviceorientation=function(e){this._updatePRotations(),this._setProperty("rotationX",e.beta),this._setProperty("rotationY",e.gamma),this._setProperty("rotationZ",e.alpha),this._handleMotion()},n.prototype._ondevicemotion=function(e){this._updatePAccelerations(),this._setProperty("accelerationX",2*e.acceleration.x),this._setProperty("accelerationY",2*e.acceleration.y),this._setProperty("accelerationZ",2*e.acceleration.z),this._handleMotion()},n.prototype._handleMotion=function(){90===window.orientation||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var e=this.deviceMoved||window.deviceMoved;"function"==typeof e&&(Math.abs(this.accelerationX-this.pAccelerationX)>d||Math.abs(this.accelerationY-this.pAccelerationY)>d||Math.abs(this.accelerationZ-this.pAccelerationZ)>d)&&e();var t=this.deviceTurned||window.deviceTurned;if("function"==typeof t){var r=this.rotationX+180,n=this.pRotationX+180,m=s+180;r-n>0&&r-n<270||r-n<-270?c="clockwise":(r-n<0||r-n>270)&&(c="counter-clockwise"),c!==a&&(m=r),Math.abs(r-m)>90&&Math.abs(r-m)<270&&(m=r,this._setProperty("turnAxis","X"),t()),a=c,s=m-180;var g=this.rotationY+180,y=this.pRotationY+180,v=l+180;g-y>0&&g-y<270||g-y<-270?p="clockwise":(g-y<0||g-this.pRotationY>270)&&(p="counter-clockwise"),p!==o&&(v=g),Math.abs(g-v)>90&&Math.abs(g-v)<270&&(v=g,this._setProperty("turnAxis","Y"),t()),o=p,l=v-180,this.rotationZ-this.pRotationZ>0&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?h="clockwise":(this.rotationZ-this.pRotationZ<0||this.rotationZ-this.pRotationZ>270)&&(h="counter-clockwise"),h!==i&&(u=this.rotationZ),Math.abs(this.rotationZ-u)>90&&Math.abs(this.rotationZ-u)<270&&(u=this.rotationZ,this._setProperty("turnAxis","Z"),t()),i=h,this._setProperty("turnAxis",void 0)}var w=this.deviceShaken||window.deviceShaken;if("function"==typeof w){var x,b;null!==this.pAccelerationX&&(x=Math.abs(this.accelerationX-this.pAccelerationX),b=Math.abs(this.accelerationY-this.pAccelerationY)),x+b>f&&w()}},t.exports=n},{"../core/core":37}],51:[function(e,t,r){var n=e("../core/core"),a={};n.prototype.isKeyPressed=!1,n.prototype.keyIsPressed=!1,n.prototype.key="",n.prototype.keyCode=0,n.prototype._onkeydown=function(e){if(!a[e.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",e.which),a[e.which]=!0;var t=String.fromCharCode(e.which);t||(t=e.which),this._setProperty("key",t);var r=this.keyPressed||window.keyPressed;if("function"==typeof r&&!e.charCode){var n=r(e);n===!1&&e.preventDefault()}}},n.prototype._onkeyup=function(e){var t=this.keyReleased||window.keyReleased;this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1),this._setProperty("_lastKeyCodeTyped",null),a[e.which]=!1;var r=String.fromCharCode(e.which);if(r||(r=e.which),this._setProperty("key",r),this._setProperty("keyCode",e.which),"function"==typeof t){var n=t(e);n===!1&&e.preventDefault()}},n.prototype._onkeypress=function(e){if(e.which!==this._lastKeyCodeTyped){this._setProperty("keyCode",e.which),this._setProperty("_lastKeyCodeTyped",e.which),this._setProperty("key",String.fromCharCode(e.which));var t=this.keyTyped||window.keyTyped;if("function"==typeof t){var r=t(e);r===!1&&e.preventDefault()}}},n.prototype._onblur=function(e){a={}},n.prototype.keyIsDown=function(e){return a[e]},t.exports=n},{"../core/core":37}],52:[function(e,t,r){function n(e,t){var r=e.getBoundingClientRect();return{x:t.clientX-r.left,y:t.clientY-r.top}}var a=e("../core/core"),o=e("../core/constants");a.prototype._hasMouseInteracted=!1,a.prototype.mouseX=0,a.prototype.mouseY=0,a.prototype.pmouseX=0,a.prototype.pmouseY=0,a.prototype.winMouseX=0,a.prototype.winMouseY=0,a.prototype.pwinMouseX=0,a.prototype.pwinMouseY=0,a.prototype.mouseButton=0,a.prototype.mouseIsPressed=!1,a.prototype.isMousePressed=!1,a.prototype._updateNextMouseCoords=function(e){var t=this.mouseX,r=this.mouseY;if("touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||e.touches)t=this.touchX,r=this.touchY;else if(null!==this._curElement){var a=n(this._curElement.elt,e);t=a.x,r=a.y}this._setProperty("mouseX",t),this._setProperty("mouseY",r),this._setProperty("winMouseX",e.pageX),this._setProperty("winMouseY",e.pageY),this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},a.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY)},a.prototype._setMouseButton=function(e){1===e.button?this._setProperty("mouseButton",o.CENTER):2===e.button?this._setProperty("mouseButton",o.RIGHT):this._setProperty("mouseButton",o.LEFT)},a.prototype._onmousemove=function(e){var t,r=this._isGlobal?window:this;this._updateNextMouseCoords(e),this._updateNextTouchCoords(e),this.isMousePressed?"function"==typeof r.mouseDragged?(t=r.mouseDragged(e),t===!1&&e.preventDefault()):"function"==typeof r.touchMoved&&(t=r.touchMoved(e),t===!1&&e.preventDefault()):"function"==typeof r.mouseMoved&&(t=r.mouseMoved(e),t===!1&&e.preventDefault())},a.prototype._onmousedown=function(e){var t,r=this._isGlobal?window:this;this._setProperty("isMousePressed",!0),this._setProperty("mouseIsPressed",!0),this._setMouseButton(e),this._updateNextMouseCoords(e),this._updateNextTouchCoords(e),"function"==typeof r.mousePressed?(t=r.mousePressed(e),t===!1&&e.preventDefault()):"function"==typeof r.touchStarted&&(t=r.touchStarted(e),t===!1&&e.preventDefault())},a.prototype._onmouseup=function(e){var t,r=this._isGlobal?window:this;this._setProperty("isMousePressed",!1),this._setProperty("mouseIsPressed",!1),"function"==typeof r.mouseReleased?(t=r.mouseReleased(e),t===!1&&e.preventDefault()):"function"==typeof r.touchEnded&&(t=r.touchEnded(e),t===!1&&e.preventDefault())},a.prototype._ondragend=a.prototype._onmouseup,a.prototype._ondragover=a.prototype._onmousemove,a.prototype._onclick=function(e){var t=this._isGlobal?window:this;if("function"==typeof t.mouseClicked){var r=t.mouseClicked(e);r===!1&&e.preventDefault()}},a.prototype._onwheel=function(e){var t=this._isGlobal?window:this;if("function"==typeof t.mouseWheel){e.delta=e.deltaY;var r=t.mouseWheel(e);r===!1&&e.preventDefault()}},t.exports=a},{"../core/constants":36,"../core/core":37}],53:[function(e,t,r){function n(e,t,r){r=r||0;var n=e.getBoundingClientRect(),a=t.touches[r]||t.changedTouches[r];return{x:a.clientX-n.left,y:a.clientY-n.top,id:a.identifier}}var a=e("../core/core");a.prototype._hasTouchInteracted=!1,a.prototype.touchX=0,a.prototype.touchY=0,a.prototype.ptouchX=0,a.prototype.ptouchY=0,a.prototype.touches=[],a.prototype.touchIsDown=!1,a.prototype._updateNextTouchCoords=function(e){var t=this.touchX,r=this.touchY;if("mousedown"!==e.type&&"mousemove"!==e.type&&"mouseup"!==e.type&&e.touches){if(null!==this._curElement){var a=n(this._curElement.elt,e,0);t=a.x,r=a.y;for(var o=[],i=0;i<e.touches.length;i++)o[i]=n(this._curElement.elt,e,i);this._setProperty("touches",o)}}else t=this.mouseX,r=this.mouseY;this._setProperty("touchX",t),this._setProperty("touchY",r),this._hasTouchInteracted||(this._updateTouchCoords(),this._setProperty("_hasTouchInteracted",!0))},a.prototype._updateTouchCoords=function(){this._setProperty("ptouchX",this.touchX),this._setProperty("ptouchY",this.touchY)},a.prototype._ontouchstart=function(e){var t,r=this._isGlobal?window:this;this._updateNextTouchCoords(e),this._updateNextMouseCoords(e),this._setProperty("touchIsDown",!0),"function"==typeof r.touchStarted?(t=r.touchStarted(e),t===!1&&e.preventDefault()):"function"==typeof r.mousePressed&&(t=r.mousePressed(e),t===!1&&e.preventDefault())},a.prototype._ontouchmove=function(e){var t,r=this._isGlobal?window:this;this._updateNextTouchCoords(e),this._updateNextMouseCoords(e),"function"==typeof r.touchMoved?(t=r.touchMoved(e),t===!1&&e.preventDefault()):"function"==typeof r.mouseDragged&&(t=r.mouseDragged(e),t===!1&&e.preventDefault())},a.prototype._ontouchend=function(e){this._updateNextTouchCoords(e),this._updateNextMouseCoords(e),0===this.touches.length&&this._setProperty("touchIsDown",!1);var t,r=this._isGlobal?window:this;"function"==typeof r.touchEnded?(t=r.touchEnded(e),t===!1&&e.preventDefault()):"function"==typeof r.mouseReleased&&(t=r.mouseReleased(e),t===!1&&e.preventDefault())},t.exports=a},{"../core/core":37}],54:[function(e,t,r){function n(e){var t=3.5*e|0;if(t=t<1?1:t<248?t:248,i!==t){i=t,s=1+i<<1,l=new Int32Array(s),u=new Array(s);for(var r=0;r<s;r++)u[r]=new Int32Array(256);for(var n,a,o,c,p=1,h=t-1;p<t;p++){l[t+p]=l[h]=a=h*h,o=u[t+p],c=u[h--];for(var d=0;d<256;d++)o[d]=c[d]=a*d}n=l[t]=t*t,o=u[t];for(var f=0;f<256;f++)o[f]=n*f}}function a(e,t){for(var r=o._toPixels(e),a=e.width,c=e.height,p=a*c,h=new Int32Array(p),d=0;d<p;d++)h[d]=o._getARGB(r,d);var f,m,g,y,v,w,x,b,_,S,C=new Int32Array(p),T=new Int32Array(p),E=new Int32Array(p),R=new Int32Array(p),k=0;n(t);var M,A,I,P;for(A=0;A<c;A++){for(M=0;M<a;M++){if(y=g=m=v=f=0,w=M-i,w<0)S=-w,w=0;else{if(w>=a)break;S=0}for(I=S;I<s&&!(w>=a);I++){var N=h[w+k];P=u[I],v+=P[(N&-16777216)>>>24],m+=P[(16711680&N)>>16],g+=P[(65280&N)>>8],y+=P[255&N],f+=l[I],w++}x=k+M,C[x]=v/f,T[x]=m/f,E[x]=g/f,R[x]=y/f}k+=a}for(k=0,b=-i,_=b*a,A=0;A<c;A++){for(M=0;M<a;M++){if(y=g=m=v=f=0,b<0)S=x=-b,w=M;else{if(b>=c)break;S=0,x=b,w=M+_}for(I=S;I<s&&!(x>=c);I++)P=u[I],v+=P[C[w]],m+=P[T[w]],g+=P[E[w]],y+=P[R[w]],f+=l[I],x++,w+=a;h[M+k]=v/f<<24|m/f<<16|g/f<<8|y/f}k+=a,_+=a,b++}o._setPixels(r,h)}var o={};o._toPixels=function(e){return e instanceof ImageData?e.data:e.getContext("2d").getImageData(0,0,e.width,e.height).data},o._getARGB=function(e,t){var r=4*t;return e[r+3]<<24&4278190080|e[r]<<16&16711680|e[r+1]<<8&65280|255&e[r+2]},o._setPixels=function(e,t){for(var r=0,n=0,a=e.length;n<a;n++)r=4*n,e[r+0]=(16711680&t[n])>>>16,e[r+1]=(65280&t[n])>>>8,e[r+2]=255&t[n],e[r+3]=(4278190080&t[n])>>>24},o._toImageData=function(e){return e instanceof ImageData?e:e.getContext("2d").getImageData(0,0,e.width,e.height)},o._createImageData=function(e,t){return o._tmpCanvas=document.createElement("canvas"),o._tmpCtx=o._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(e,t)},o.apply=function(e,t,r){var n=e.getContext("2d"),a=n.getImageData(0,0,e.width,e.height),o=t(a,r);o instanceof ImageData?n.putImageData(o,0,0,0,0,e.width,e.height):n.putImageData(a,0,0,0,0,e.width,e.height)},o.threshold=function(e,t){var r=o._toPixels(e);void 0===t&&(t=.5);for(var n=Math.floor(255*t),a=0;a<r.length;a+=4){var i,s=r[a],l=r[a+1],u=r[a+2],c=.2126*s+.7152*l+.0722*u;i=c>=n?255:0,r[a]=r[a+1]=r[a+2]=i}},o.gray=function(e){for(var t=o._toPixels(e),r=0;r<t.length;r+=4){var n=t[r],a=t[r+1],i=t[r+2],s=.2126*n+.7152*a+.0722*i;t[r]=t[r+1]=t[r+2]=s}},o.opaque=function(e){for(var t=o._toPixels(e),r=0;r<t.length;r+=4)t[r+3]=255;return t},o.invert=function(e){for(var t=o._toPixels(e),r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]},o.posterize=function(e,t){var r=o._toPixels(e);if(t<2||t>255)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var n=t-1,a=0;a<r.length;a+=4){var i=r[a],s=r[a+1],l=r[a+2];r[a]=255*(i*t>>8)/n,r[a+1]=255*(s*t>>8)/n,r[a+2]=255*(l*t>>8)/n}},o.dilate=function(e){for(var t,r,n,a,i,s,l,u,c,p,h,d,f,m,g,y,v,w=o._toPixels(e),x=0,b=w.length?w.length/4:0,_=new Int32Array(b);x<b;)for(t=x,r=x+e.width;x<r;)n=a=o._getARGB(w,x),l=x-1,s=x+1,u=x-e.width,c=x+e.width,l<t&&(l=x),s>=r&&(s=x),u<0&&(u=0),c>=b&&(c=x),d=o._getARGB(w,u),h=o._getARGB(w,l),f=o._getARGB(w,c),p=o._getARGB(w,s),i=77*(n>>16&255)+151*(n>>8&255)+28*(255&n),g=77*(h>>16&255)+151*(h>>8&255)+28*(255&h),m=77*(p>>16&255)+151*(p>>8&255)+28*(255&p),y=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),v=77*(f>>16&255)+151*(f>>8&255)+28*(255&f),g>i&&(a=h,i=g),m>i&&(a=p,i=m),y>i&&(a=d,i=y),v>i&&(a=f,i=v),_[x++]=a;o._setPixels(w,_)},o.erode=function(e){for(var t,r,n,a,i,s,l,u,c,p,h,d,f,m,g,y,v,w=o._toPixels(e),x=0,b=w.length?w.length/4:0,_=new Int32Array(b);x<b;)for(t=x,r=x+e.width;x<r;)n=a=o._getARGB(w,x),l=x-1,s=x+1,u=x-e.width,c=x+e.width,l<t&&(l=x),s>=r&&(s=x),u<0&&(u=0),c>=b&&(c=x),d=o._getARGB(w,u),h=o._getARGB(w,l),f=o._getARGB(w,c),p=o._getARGB(w,s),i=77*(n>>16&255)+151*(n>>8&255)+28*(255&n),g=77*(h>>16&255)+151*(h>>8&255)+28*(255&h),m=77*(p>>16&255)+151*(p>>8&255)+28*(255&p),y=77*(d>>16&255)+151*(d>>8&255)+28*(255&d),v=77*(f>>16&255)+151*(f>>8&255)+28*(255&f),
g<i&&(a=h,i=g),m<i&&(a=p,i=m),y<i&&(a=d,i=y),v<i&&(a=f,i=v),_[x++]=a;o._setPixels(w,_)};var i,s,l,u;o.blur=function(e,t){a(e,t)},t.exports=o},{}],55:[function(e,t,r){var n=e("../core/core"),a=[];n.prototype.createImage=function(e,t){return new n.Image(e,t)},/**
 *  Save the current canvas as an image. In Safari, this will open the
 *  image in the window and the user must provide their own
 *  filename on save-as. Other browsers will either save the
 *  file immediately, or prompt the user with a dialogue window.
 *
 *  @method saveCanvas
 *  @param  {[selectedCanvas]} canvas a variable representing a
 *                             specific html5 canvas (optional)
 *  @param  {[String]} filename
 *  @param  {[String]} extension 'jpg' or 'png'
 *  @example
 *  <div class='norender'><code>
 *  function setup() {
 *    var c = createCanvas(100, 100);
 *    background(255, 0, 0);
 *    saveCanvas(c, 'myCanvas', 'jpg');
 *  }
 *  </code></div>
 *  <div class='norender'><code>
 *  // note that this example has the same result as above
 *  // if no canvas is specified, defaults to main canvas
 *  function setup() {
 *    createCanvas(100, 100);
 *    background(255, 0, 0);
 *    saveCanvas('myCanvas', 'jpg');
 *  }
 *  </code></div>
 *  <div class='norender'><code>
 *  // all of the following are valid
 *  saveCanvas(c, 'myCanvas', 'jpg');
 *  saveCanvas(c, 'myCanvas');
 *  saveCanvas(c);
 *  saveCanvas('myCanvas', 'png');
 *  saveCanvas('myCanvas');
 *  saveCanvas();
 *  </code></div>
 */
n.prototype.saveCanvas=function(){var e,t,r;if(3===arguments.length?(e=arguments[0],t=arguments[1],r=arguments[2]):2===arguments.length?"object"==typeof arguments[0]?(e=arguments[0],t=arguments[1]):(t=arguments[0],r=arguments[1]):1===arguments.length&&("object"==typeof arguments[0]?e=arguments[0]:t=arguments[0]),e instanceof n.Element&&(e=e.elt),e instanceof HTMLCanvasElement||(e=null),r||(r=n.prototype._checkFileExtension(t,r)[1],""===r&&(r="png")),e||this._curElement&&this._curElement.elt&&(e=this._curElement.elt),n.prototype._isSafari()){var a="Hello, Safari user!\n";a+="Now capturing a screenshot...\n",a+="To save this image,\n",a+="go to File --> Save As.\n",alert(a),window.location.href=e.toDataURL()}else{var o;if("undefined"==typeof r)r="png",o="image/png";else switch(r){case"png":o="image/png";break;case"jpeg":o="image/jpeg";break;case"jpg":o="image/jpeg";break;default:o="image/png"}var i="image/octet-stream",s=e.toDataURL(o);s=s.replace(o,i),n.prototype.downloadFile(s,t,r)}},n.prototype.saveFrames=function(e,t,r,o,i){var s=r||3;s=n.prototype.constrain(s,0,15),s=1e3*s;var l=o||15;l=n.prototype.constrain(l,0,22);var u=0,c=n.prototype._makeFrame,p=this._curElement.elt,h=setInterval(function(){c(e+u,t,p),u++},1e3/l);setTimeout(function(){if(clearInterval(h),i)i(a);else for(var e=0;e<a.length;e++){var t=a[e];n.prototype.downloadFile(t.imageData,t.filename,t.ext)}a=[]},s+.01)},n.prototype._makeFrame=function(e,t,r){var n;n=this?this._curElement.elt:r;var o;if(t)switch(t.toLowerCase()){case"png":o="image/png";break;case"jpeg":o="image/jpeg";break;case"jpg":o="image/jpeg";break;default:o="image/png"}else t="png",o="image/png";var i="image/octet-stream",s=n.toDataURL(o);s=s.replace(o,i);var l={};l.imageData=s,l.filename=e,l.ext=t,a.push(l)},t.exports=n},{"../core/core":37}],56:[function(e,t,r){function n(e,t){return e>0&&e<t?e:t}var a=e("../core/core"),o=e("./filters"),i=e("../core/canvas"),s=e("../core/constants");e("../core/error_helpers"),a.prototype.loadImage=function(e,t,r){var n=new Image,o=new a.Image(1,1,this),i=a._getDecrementPreload.apply(this,arguments);return n.onload=function(){o.width=o.canvas.width=n.width,o.height=o.canvas.height=n.height,o.drawingContext.drawImage(n,0,0),"function"==typeof t&&t(o),i&&t!==i&&i()},n.onerror=function(e){a._friendlyFileLoadError(0,n.src),"function"==typeof r&&r!==i&&r(e)},0!==e.indexOf("data:image/")&&(n.crossOrigin="Anonymous"),n.src=e,o},a.prototype.image=function(e,t,r,a,o,s,l,u,c){if(arguments.length<=5)if(s=t||0,l=r||0,t=0,r=0,e.elt&&e.elt.videoWidth&&!e.canvas){var p=e.elt.videoWidth,h=e.elt.videoHeight;u=a||e.elt.width,c=o||e.elt.width*h/p,a=p,o=h}else u=a||e.width,c=o||e.height,a=e.width,o=e.height;else{if(9!==arguments.length)throw"Wrong number of arguments to image()";t=t||0,r=r||0,a=n(a,e.width),o=n(o,e.height),s=s||0,l=l||0,u=u||e.width,c=c||e.height}var d=i.modeAdjust(s,l,u,c,this._renderer._imageMode);this._renderer.image(e,t,r,a,o,d.x,d.y,d.w,d.h)},a.prototype.tint=function(){var e=this.color.apply(this,arguments);this._renderer._tint=e.levels},a.prototype.noTint=function(){this._renderer._tint=null},a.prototype._getTintedImageCanvas=function(e){if(!e.canvas)return e;var t=o._toPixels(e.canvas),r=document.createElement("canvas");r.width=e.canvas.width,r.height=e.canvas.height;for(var n=r.getContext("2d"),a=n.createImageData(e.canvas.width,e.canvas.height),i=a.data,s=0;s<t.length;s+=4){var l=t[s],u=t[s+1],c=t[s+2],p=t[s+3];i[s]=l*this._renderer._tint[0]/255,i[s+1]=u*this._renderer._tint[1]/255,i[s+2]=c*this._renderer._tint[2]/255,i[s+3]=p*this._renderer._tint[3]/255}return n.putImageData(a,0,0),r},a.prototype.imageMode=function(e){e!==s.CORNER&&e!==s.CORNERS&&e!==s.CENTER||(this._renderer._imageMode=e)},t.exports=a},{"../core/canvas":35,"../core/constants":36,"../core/core":37,"../core/error_helpers":40,"./filters":54}],57:[function(e,t,r){var n=e("../core/core"),a=e("./filters");n.Image=function(e,t){/**
   * Image width.
   * @property width
   * @example
   * <div><code>
   * var img;
   * function preload() {
   *   img = loadImage("assets/rockies.jpg");
   * }
   *
   * function setup() {
   *   createCanvas(100, 100);
   *   image(img, 0, 0);
   *   for (var i=0; i < img.width; i++) {
   *     var c = img.get(i, img.height/2);
   *     stroke(c);
   *     line(i, height/2, i, height);
   *   }
   * }
   * </code></div>
   */
this.width=e,/**
   * Image height.
   * @property height
   * @example
   * <div><code>
   * var img;
   * function preload() {
   *   img = loadImage("assets/rockies.jpg");
   * }
   *
   * function setup() {
   *   createCanvas(100, 100);
   *   image(img, 0, 0);
   *   for (var i=0; i < img.height; i++) {
   *     var c = img.get(img.width/2, i);
   *     stroke(c);
   *     line(0, i, width/2, i);
   *   }
   * }
   * </code></div>
   */
this.height=t,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),this._pixelDensity=1,this.isTexture=!1,this.pixels=[]},n.Image.prototype._setProperty=function(e,t){this[e]=t},n.Image.prototype.loadPixels=function(){n.Renderer2D.prototype.loadPixels.call(this)},n.Image.prototype.updatePixels=function(e,t,r,a){n.Renderer2D.prototype.updatePixels.call(this,e,t,r,a)},/**
 * Get a region of pixels from an image.
 *
 * If no params are passed, those whole image is returned,
 * if x and y are the only params passed a single pixel is extracted
 * if all params are passed a rectangle region is extracted and a p5.Image
 * is returned.
 *
 * Returns undefined if the region is outside the bounds of the image
 *
 * @method get
 * @param  {Number}               [x] x-coordinate of the pixel
 * @param  {Number}               [y] y-coordinate of the pixel
 * @param  {Number}               [w] width
 * @param  {Number}               [h] height
 * @return {Array/Color | p5.Image}     color of pixel at x,y in array format
 *                                    [R, G, B, A] or p5.Image
 * @example
 * <div><code>
 * var myImage;
 * var c;
 *
 * function preload() {
 *   myImage = loadImage("assets/rockies.jpg");
 * }
 *
 * function setup() {
 *   background(myImage);
 *   noStroke();
 *   c = myImage.get(60, 90);
 *   fill(c);
 *   rect(25, 25, 50, 50);
 * }
 *
 * //get() returns color here
 * </code></div>
 */
n.Image.prototype.get=function(e,t,r,a){return n.Renderer2D.prototype.get.call(this,e,t,r,a)},n.Image.prototype.set=function(e,t,r){n.Renderer2D.prototype.set.call(this,e,t,r)},n.Image.prototype.resize=function(e,t){0===e&&0===t?(e=this.canvas.width,t=this.canvas.height):0===e?e=this.canvas.width*t/this.canvas.height:0===t&&(t=this.canvas.height*e/this.canvas.width);var r=document.createElement("canvas");r.width=e,r.height=t,r.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,r.width,r.height),this.canvas.width=this.width=e,this.canvas.height=this.height=t,this.drawingContext.drawImage(r,0,0,e,t,0,0,e,t),this.pixels.length>0&&this.loadPixels()},n.Image.prototype.copy=function(){n.prototype.copy.apply(this,arguments)},n.Image.prototype.mask=function(e){void 0===e&&(e=this);var t=this.drawingContext.globalCompositeOperation,r=1;e instanceof n.Renderer&&(r=e._pInst._pixelDensity);var a=[e,0,0,r*e.width,r*e.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",this.copy.apply(this,a),this.drawingContext.globalCompositeOperation=t},n.Image.prototype.filter=function(e,t){a.apply(this.canvas,a[e.toLowerCase()],t)},n.Image.prototype.blend=function(){n.prototype.blend.apply(this,arguments)},n.Image.prototype.save=function(e,t){var r;if(t)switch(t.toLowerCase()){case"png":r="image/png";break;case"jpeg":r="image/jpeg";break;case"jpg":r="image/jpeg";break;default:r="image/png"}else t="png",r="image/png";var a="image/octet-stream",o=this.canvas.toDataURL(r);o=o.replace(r,a),n.prototype.downloadFile(o,e,t)},t.exports=n.Image},{"../core/core":37,"./filters":54}],58:[function(e,t,r){var n=e("../core/core"),a=e("./filters");e("../color/p5.Color"),n.prototype.pixels=[],n.prototype.blend=function(){this._renderer?this._renderer.blend.apply(this._renderer,arguments):n.Renderer2D.prototype.blend.apply(this,arguments)},n.prototype.copy=function(){n.Renderer2D._copyHelper.apply(this,arguments)},n.prototype.filter=function(e,t){a.apply(this.canvas,a[e.toLowerCase()],t)},/**
 * Returns an array of [R,G,B,A] values for any pixel or grabs a section of
 * an image. If no parameters are specified, the entire image is returned.
 * Use the x and y parameters to get the value of one pixel. Get a section of
 * the display window by specifying additional w and h parameters. When
 * getting an image, the x and y parameters define the coordinates for the
 * upper-left corner of the image, regardless of the current imageMode().
 * <br><br>
 * If the pixel requested is outside of the image window, [0,0,0,255] is
 * returned. To get the numbers scaled according to the current color ranges
 * and taking into account colorMode, use getColor instead of get.
 * <br><br>
 * Getting the color of a single pixel with get(x, y) is easy, but not as fast
 * as grabbing the data directly from pixels[]. The equivalent statement to
 * get(x, y) using pixels[] with pixel density d is
 * <code>
 * var off = (y * width + x) * d * 4;
 * [pixels[off],
 * pixels[off+1],
 * pixels[off+2],
 * pixels[off+3]]</code>
 * <br><br>
 * See the reference for pixels[] for more information.
 *
 * @method get
 * @param  {Number}         [x] x-coordinate of the pixel
 * @param  {Number}         [y] y-coordinate of the pixel
 * @param  {Number}         [w] width
 * @param  {Number}         [h] height
 * @return {Array|p5.Image}     values of pixel at x,y in array format
 *                              [R, G, B, A] or p5.Image
 * @example
 * <div>
 * <code>
 * var img;
 * function preload() {
 *   img = loadImage("assets/rockies.jpg");
 * }
 * function setup() {
 *   image(img, 0, 0);
 *   var c = get();
 *   image(c, width/2, 0);
 * }
 * </code>
 * </div>
 *
 * <div>
 * <code>
 * var img;
 * function preload() {
 *   img = loadImage("assets/rockies.jpg");
 * }
 * function setup() {
 *   image(img, 0, 0);
 *   var c = get(50, 90);
 *   fill(c);
 *   noStroke();
 *   rect(25, 25, 50, 50);
 * }
 * </code>
 * </div>
 */
n.prototype.get=function(e,t,r,n){return this._renderer.get(e,t,r,n)},n.prototype.loadPixels=function(){this._renderer.loadPixels()},n.prototype.set=function(e,t,r){this._renderer.set(e,t,r)},n.prototype.updatePixels=function(e,t,r,n){0!==this.pixels.length&&this._renderer.updatePixels(e,t,r,n)},t.exports=n},{"../color/p5.Color":31,"../core/core":37,"./filters":54}],59:[function(e,t,r){function n(e,t){var r={};if(t=t||[],"undefined"==typeof t)for(var n=0;n<e.length;n++)t[n.toString()]=n;for(var a=0;a<t.length;a++){var o=t[a],i=e[a];r[o]=i}return r}function a(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function o(e,t){t&&t!==!0&&"true"!==t||(t=""),e||(e="untitled");var r="";return e&&e.indexOf(".")>-1&&(r=e.split(".").pop()),t&&r!==t&&(r=t,e=e+"."+r),[e,r]}function i(e){document.body.removeChild(e.target)}var s=e("../core/core"),l=e("reqwest"),u=e("opentype.js");e("../core/error_helpers"),s._getDecrementPreload=function(){var e=arguments[arguments.length-1];return(window.preload||this&&this.preload)&&"function"==typeof e?e:null},s.prototype.loadFont=function(e,t,r){var n=new s.Font(this),a=s._getDecrementPreload.apply(this,arguments);return u.load(e,function(o,i){if(o){if("undefined"!=typeof r&&r!==a)return r(o);throw o}n.font=i,"undefined"!=typeof t&&t(n),a&&t!==a&&a();var s,l,u=["ttf","otf","woff","woff2"],c=e.split("\\").pop().split("/").pop(),p=c.lastIndexOf("."),h=p<1?null:c.substr(p+1);u.indexOf(h)>-1&&(s=c.substr(0,p),l=document.createElement("style"),l.appendChild(document.createTextNode("\n@font-face {\nfont-family: "+s+";\nsrc: url("+e+");\n}\n")),document.head.appendChild(l))}),n},s.prototype.createInput=function(){throw"not yet implemented"},s.prototype.createReader=function(){throw"not yet implemented"},s.prototype.loadBytes=function(){throw"not yet implemented"},s.prototype.loadJSON=function(){for(var e,t=arguments[0],r=arguments[1],n=s._getDecrementPreload.apply(this,arguments),a=[],o="json",i=2;i<arguments.length;i++){var u=arguments[i];"string"==typeof u?"jsonp"!==u&&"json"!==u||(o=u):"function"==typeof u&&(e=u)}return l({url:t,type:o,crossOrigin:!0,error:function(t){e?e(t):console.log(t.statusText)},success:function(e){for(var t in e)a[t]=e[t];"undefined"!=typeof r&&r(e),n&&r!==n&&n()}}),a},s.prototype.loadStrings=function(e,t,r){var n=[],a=new XMLHttpRequest,o=s._getDecrementPreload.apply(this,arguments);return a.addEventListener("error",function(e){r?r(e):console.log(e.responseText)}),a.open("GET",e,!0),a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status){var e=a.responseText.match(/[^\r\n]+/g);for(var i in e)n[i]=e[i];"undefined"!=typeof t&&t(n),o&&t!==o&&o()}else r?r(a):console.log(a.statusText)},a.send(null),n},s.prototype.loadTable=function(e){for(var t=null,r=[],a=!1,o=",",i=!1,u=s._getDecrementPreload.apply(this,arguments),c=1;c<arguments.length;c++)if("function"==typeof arguments[c]&&arguments[c]!==u)t=arguments[c];else if("string"==typeof arguments[c])if(r.push(arguments[c]),"header"===arguments[c]&&(a=!0),"csv"===arguments[c]){if(i)throw new Error("Cannot set multiple separator types.");o=",",i=!0}else if("tsv"===arguments[c]){if(i)throw new Error("Cannot set multiple separator types.");o="\t",i=!0}var p=new s.Table;return l({url:e,crossOrigin:!0,type:"csv"}).then(function(e){e=e.responseText;for(var r,i={},l=0,h=1,d=2,f=4,m='"',g="\r",y="\n",v=[],w=0,x=null,b=function(){i.escaped=!1,x=[],S()},_=function(){i.currentState=f,v.push(x),x=null},S=function(){i.currentState=l,i.token=""},C=function(){x.push(i.token),S()};;){if(r=e[w++],null==r){if(i.escaped)throw new Error("Unclosed quote in file.");if(x){C(),_();break}}if(null===x&&b(),i.currentState===l){if(r===m){i.escaped=!0,i.currentState=h;continue}i.currentState=h}i.currentState===h&&i.escaped?r===m?e[w]===m?(i.token+=m,w++):(i.escaped=!1,i.currentState=d):i.token+=r:r===g?(e[w]===y&&w++,C(),_()):r===y?(C(),_()):r===o?C():i.currentState===h&&(i.token+=r)}if(a)p.columns=v.shift();else for(c=0;c<v[0].length;c++)p.columns[c]="null";var T;for(c=0;c<v.length&&(c!==v.length-1||1!==v[c].length||"undefined"!==v[c][0]);c++)T=new s.TableRow,T.arr=v[c],T.obj=n(v[c],p.columns),p.addRow(T);null!==t&&t(p),u&&t!==u&&u()}).fail(function(r,n){s._friendlyFileLoadError(2,e),"undefined"!=typeof t&&t!==u&&t(!1)}),p},s.prototype.parseXML=function(e){var t,r=new s.XML;if(e.children.length){for(t=0;t<e.children.length;t++){var n=parseXML(e.children[t]);r.addChild(n)}r.setName(e.nodeName),r._setCont(e.textContent),r._setAttributes(e);for(var a=0;a<r.children.length;a++)r.children[a].parent=r;return r}return r.setName(e.nodeName),r._setCont(e.textContent),r._setAttributes(e),r},s.prototype.loadXML=function(e,t,r){var n={},a=s._getDecrementPreload.apply(this,arguments);return l({url:e,type:"xml",crossOrigin:!0,error:function(e){r?r(e):console.log(e.statusText)}}).then(function(e){var r=parseXML(e.documentElement);for(var o in r)n[o]=r[o];"undefined"!=typeof t&&t(n),a&&t!==a&&a()}),n},s.prototype.selectFolder=function(){throw"not yet implemented"},s.prototype.selectInput=function(){throw"not yet implemented"},s.prototype.httpGet=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];e.push("GET"),s.prototype.httpDo.apply(this,e)},s.prototype.httpPost=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];e.push("POST"),s.prototype.httpDo.apply(this,e)},s.prototype.httpDo=function(){if("object"==typeof arguments[0])l(arguments[0]);else{for(var e,t,r="GET",n=arguments[0],a={},o="",i=1;i<arguments.length;i++){var s=arguments[i];"string"==typeof s?"GET"===s||"POST"===s||"PUT"===s?r=s:o=s:"object"==typeof s?a=s:"function"==typeof s&&(e?t=s:e=s)}""===o&&(o=n.indexOf("json")!==-1?"json":n.indexOf("xml")!==-1?"xml":"text"),l({url:n,method:r,data:a,type:o,crossOrigin:!0,success:function(t){"undefined"!=typeof e&&e("text"===o?t.response:t)},error:function(e){t?t(e):console.log(e.statusText)}})}},window.URL=window.URL||window.webkitURL,s.prototype._pWriters=[],s.prototype.beginRaw=function(){throw"not yet implemented"},s.prototype.beginRecord=function(){throw"not yet implemented"},s.prototype.createOutput=function(){throw"not yet implemented"},s.prototype.createWriter=function(e,t){var r;for(var n in s.prototype._pWriters)if(s.prototype._pWriters[n].name===e)return r=new s.PrintWriter(e+window.millis(),t),s.prototype._pWriters.push(r),r;return r=new s.PrintWriter(e,t),s.prototype._pWriters.push(r),r},s.prototype.endRaw=function(){throw"not yet implemented"},s.prototype.endRecord=function(){throw"not yet implemented"},s.PrintWriter=function(e,t){var r=this;this.name=e,this.content="",this.print=function(e){this.content+=e},this.println=function(e){this.content+=e+"\n"},this.flush=function(){this.content=""},this.close=function(){var n=[];n.push(this.content),s.prototype.writeFile(n,e,t);for(var a in s.prototype._pWriters)s.prototype._pWriters[a].name===this.name&&s.prototype._pWriters.splice(a,1);r.flush(),r={}}},s.prototype.saveBytes=function(){throw"not yet implemented"},s.prototype.save=function(e,t,r){var n=arguments,a=this._curElement.elt;if(0===n.length)return void s.prototype.saveCanvas(a);if(n[0]instanceof s.Renderer||n[0]instanceof s.Graphics)return void s.prototype.saveCanvas(n[0].elt,n[1],n[2]);if(1===n.length&&"string"==typeof n[0])s.prototype.saveCanvas(a,n[0]);else{var i=o(n[1],n[2])[1];switch(i){case"json":return void s.prototype.saveJSON(n[0],n[1],n[2]);case"txt":return void s.prototype.saveStrings(n[0],n[1],n[2]);default:n[0]instanceof Array?s.prototype.saveStrings(n[0],n[1],n[2]):n[0]instanceof s.Table?s.prototype.saveTable(n[0],n[1],n[2],n[3]):n[0]instanceof s.Image?s.prototype.saveCanvas(n[0].canvas,n[1]):n[0]instanceof s.SoundFile&&s.prototype.saveSound(n[0],n[1],n[2],n[3])}}},s.prototype.saveJSON=function(e,t,r){var n;n=r?JSON.stringify(e):JSON.stringify(e,void 0,2),console.log(n),this.saveStrings(n.split("\n"),t,"json")},s.prototype.saveJSONObject=s.prototype.saveJSON,s.prototype.saveJSONArray=s.prototype.saveJSON,s.prototype.saveStream=function(){throw"not yet implemented"},s.prototype.saveStrings=function(e,t,r){for(var n=r||"txt",a=this.createWriter(t,n),o=0;o<e.length;o++)o<e.length-1?a.println(e[o]):a.print(e[o]);a.close(),a.flush()},s.prototype.saveXML=function(){throw"not yet implemented"},s.prototype.selectOutput=function(){throw"not yet implemented"},s.prototype.saveTable=function(e,t,r){var n=this.createWriter(t,r),o=e.columns,i=",";if("tsv"===r&&(i="\t"),"html"!==r){if("0"!==o[0])for(var s=0;s<o.length;s++)s<o.length-1?n.print(o[s]+i):n.println(o[s]);for(var l=0;l<e.rows.length;l++){var u;for(u=0;u<e.rows[l].arr.length;u++)u<e.rows[l].arr.length-1?n.print(e.rows[l].arr[u]+i):l<e.rows.length-1?n.println(e.rows[l].arr[u]):n.print(e.rows[l].arr[u])}}else{n.println("<html>"),n.println("<head>");var c='  <meta http-equiv="content-type" content';if(c+='="text/html;charset=utf-8" />',n.println(c),n.println("</head>"),n.println("<body>"),n.println("  <table>"),"0"!==o[0]){n.println("    <tr>");for(var p=0;p<o.length;p++){var h=a(o[p]);n.println("      <td>"+h),n.println("      </td>")}n.println("    </tr>")}for(var d=0;d<e.rows.length;d++){n.println("    <tr>");for(var f=0;f<e.columns.length;f++){var m=e.rows[d].getString(f),g=a(m);n.println("      <td>"+g),n.println("      </td>")}n.println("    </tr>")}n.println("  </table>"),n.println("</body>"),n.print("</html>")}n.close(),n.flush()},s.prototype.writeFile=function(e,t,r){var n="application/octet-stream";s.prototype._isSafari()&&(n="text/plain");var a=new Blob(e,{type:n}),o=window.URL.createObjectURL(a);s.prototype.downloadFile(o,t,r)},s.prototype.downloadFile=function(e,t,r){var n=o(t,r),a=n[0],l=n[1],u=document.createElement("a");if(u.href=e,u.download=a,u.onclick=i,u.style.display="none",document.body.appendChild(u),s.prototype._isSafari()){var c="Hello, Safari user! To download this file...\n";c+="1. Go to File --> Save As.\n",c+='2. Choose "Page Source" as the Format.\n',c+='3. Name it with this extension: ."'+l+'"',alert(c)}u.click(),e=null},s.prototype._checkFileExtension=o,s.prototype._isSafari=function(){var e=Object.prototype.toString.call(window.HTMLElement);return e.indexOf("Constructor")>0},t.exports=s},{"../core/core":37,"../core/error_helpers":40,"opentype.js":8,reqwest:27}],60:[function(e,t,r){var n=e("../core/core");n.Table=function(e){this.columns=[],this.rows=[]},n.Table.prototype.addRow=function(e){var t=e||new n.TableRow;if("undefined"==typeof t.arr||"undefined"==typeof t.obj)throw"invalid TableRow: "+t;return t.table=this,this.rows.push(t),t},n.Table.prototype.removeRow=function(e){this.rows[e].table=null;var t=this.rows.splice(e+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(t)},/**
 * Returns a reference to the specified p5.TableRow. The reference
 * can then be used to get and set values of the selected row.
 *
 * @method  getRow
 * @param  {Number}   rowID ID number of the row to get
 * @return {TableRow} p5.TableRow object
 *
 * @example
	* <div class="norender">
	* <code>
	* // Given the CSV file "mammals.csv"
	* // in the project's "assets" folder:
	* //
	* // id,species,name
	* // 0,Capra hircus,Goat
	* // 1,Panthera pardus,Leopard
	* // 2,Equus zebra,Zebra
	*
	* var table;
	*
	* function preload() {
	*   //my table is comma separated value "csv"
	*   //and has a header specifying the columns labels
	*   table = loadTable("assets/mammals.csv", "csv", "header");
	* }
	*
	* function setup() {
	*   var row = table.getRow(1);
	*   //print it column by column
	*   //note: a row is an object, not an array
	*   for (var c = 0; c < table.getColumnCount(); c++)
	*     print(row.getString(c));
	* }
	* </code>
	* </div>
 */
n.Table.prototype.getRow=function(e){return this.rows[e]},n.Table.prototype.getRows=function(){return this.rows},n.Table.prototype.findRow=function(e,t){if("string"==typeof t){for(var r=0;r<this.rows.length;r++)if(this.rows[r].obj[t]===e)return this.rows[r]}else for(var n=0;n<this.rows.length;n++)if(this.rows[n].arr[t]===e)return this.rows[n];return null},n.Table.prototype.findRows=function(e,t){var r=[];if("string"==typeof t)for(var n=0;n<this.rows.length;n++)this.rows[n].obj[t]===e&&r.push(this.rows[n]);else for(var a=0;a<this.rows.length;a++)this.rows[a].arr[t]===e&&r.push(this.rows[a]);return r},n.Table.prototype.matchRow=function(e,t){if("number"==typeof t){for(var r=0;r<this.rows.length;r++)if(this.rows[r].arr[t].match(e))return this.rows[r]}else for(var n=0;n<this.rows.length;n++)if(this.rows[n].obj[t].match(e))return this.rows[n];return null},n.Table.prototype.matchRows=function(e,t){var r=[];if("number"==typeof t)for(var n=0;n<this.rows.length;n++)this.rows[n].arr[t].match(e)&&r.push(this.rows[n]);else for(var a=0;a<this.rows.length;a++)this.rows[a].obj[t].match(e)&&r.push(this.rows[a]);return r},n.Table.prototype.getColumn=function(e){var t=[];if("string"==typeof e)for(var r=0;r<this.rows.length;r++)t.push(this.rows[r].obj[e]);else for(var n=0;n<this.rows.length;n++)t.push(this.rows[n].arr[e]);return t},n.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},n.Table.prototype.addColumn=function(e){var t=e||null;this.columns.push(t)},n.Table.prototype.getColumnCount=function(){return this.columns.length},n.Table.prototype.getRowCount=function(){return this.rows.length},n.Table.prototype.removeTokens=function(e,t){for(var r=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},n=[],a=0;a<e.length;a++)n.push(r(e.charAt(a)));var o=new RegExp(n.join("|"),"g");if("undefined"==typeof t)for(var i=0;i<this.columns.length;i++)for(var s=0;s<this.rows.length;s++){var l=this.rows[s].arr[i];l=l.replace(o,""),this.rows[s].arr[i]=l,this.rows[s].obj[this.columns[i]]=l}else if("string"==typeof t)for(var u=0;u<this.rows.length;u++){var c=this.rows[u].obj[t];c=c.replace(o,""),this.rows[u].obj[t]=c;var p=this.columns.indexOf(t);this.rows[u].arr[p]=c}else for(var h=0;h<this.rows.length;h++){var d=this.rows[h].arr[t];d=d.replace(o,""),this.rows[h].arr[t]=d,this.rows[h].obj[this.columns[t]]=d}},n.Table.prototype.trim=function(e){var t=new RegExp(" ","g");if("undefined"==typeof e)for(var r=0;r<this.columns.length;r++)for(var n=0;n<this.rows.length;n++){var a=this.rows[n].arr[r];a=a.replace(t,""),this.rows[n].arr[r]=a,this.rows[n].obj[this.columns[r]]=a}else if("string"==typeof e)for(var o=0;o<this.rows.length;o++){var i=this.rows[o].obj[e];i=i.replace(t,""),this.rows[o].obj[e]=i;var s=this.columns.indexOf(e);this.rows[o].arr[s]=i}else for(var l=0;l<this.rows.length;l++){var u=this.rows[l].arr[e];u=u.replace(t,""),this.rows[l].arr[e]=u,this.rows[l].obj[this.columns[e]]=u}},n.Table.prototype.removeColumn=function(e){var t,r;"string"==typeof e?(t=e,r=this.columns.indexOf(e),console.log("string")):(r=e,t=this.columns[e]);var n=this.columns.splice(r+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(n);for(var a=0;a<this.rows.length;a++){var o=this.rows[a].arr,i=o.splice(r+1,o.length);o.pop(),this.rows[a].arr=o.concat(i),delete this.rows[a].obj[t]}},n.Table.prototype.set=function(e,t,r){this.rows[e].set(t,r)},n.Table.prototype.setNum=function(e,t,r){this.rows[e].setNum(t,r)},n.Table.prototype.setString=function(e,t,r){this.rows[e].setString(t,r)},n.Table.prototype.get=function(e,t){return this.rows[e].get(t)},n.Table.prototype.getNum=function(e,t){return this.rows[e].getNum(t)},n.Table.prototype.getString=function(e,t){return this.rows[e].getString(t)},n.Table.prototype.getObject=function(e){for(var t,r,n,a={},o=0;o<this.rows.length;o++)if(t=this.rows[o].obj,"string"==typeof e){if(r=this.columns.indexOf(e),!(r>=0))throw'This table has no column named "'+e+'"';n=t[e],a[n]=t}else a[o]=this.rows[o].obj;return a},n.Table.prototype.getArray=function(){for(var e=[],t=0;t<this.rows.length;t++)e.push(this.rows[t].arr);return e},t.exports=n.Table},{"../core/core":37}],61:[function(e,t,r){var n=e("../core/core");n.TableRow=function(e,t){var r=[],n={};e&&(t=t||",",r=e.split(t));for(var a=0;a<r.length;a++){var o=a,i=r[a];n[o]=i}this.arr=r,this.obj=n,this.table=null},n.TableRow.prototype.set=function(e,t){if("string"==typeof e){var r=this.table.columns.indexOf(e);if(!(r>=0))throw'This table has no column named "'+e+'"';this.obj[e]=t,this.arr[r]=t}else{if(!(e<this.table.columns.length))throw"Column #"+e+" is out of the range of this table";this.arr[e]=t;var n=this.table.columns[e];this.obj[n]=t}},n.TableRow.prototype.setNum=function(e,t){var r=parseFloat(t,10);this.set(e,r)},n.TableRow.prototype.setString=function(e,t){var r=t.toString();this.set(e,r)},n.TableRow.prototype.get=function(e){return"string"==typeof e?this.obj[e]:this.arr[e]},n.TableRow.prototype.getNum=function(e){var t;if(t="string"==typeof e?parseFloat(this.obj[e],10):parseFloat(this.arr[e],10),"NaN"===t.toString())throw"Error: "+this.obj[e]+" is NaN (Not a Number)";return t},n.TableRow.prototype.getString=function(e){return"string"==typeof e?this.obj[e].toString():this.arr[e].toString()},t.exports=n.TableRow},{"../core/core":37}],62:[function(e,t,r){var n=e("../core/core");n.XML=function(){this.name=null,this.attributes={},this.children=[],this.parent=null,this.content=null},n.XML.prototype.getParent=function(){return this.parent},n.XML.prototype.getName=function(){return this.name},n.XML.prototype.setName=function(e){this.name=e},n.XML.prototype.hasChildren=function(){return this.children.length>0},n.XML.prototype.listChildren=function(){return this.children.map(function(e){return e.name})},n.XML.prototype.getChildren=function(e){return e?this.children.filter(function(t){return t.name===e}):this.children},n.XML.prototype.getChild=function(e){return"string"==typeof e?this.children.find(function(t){return t.name===e}):this.children[e]},n.XML.prototype.addChild=function(e){e instanceof n.XML&&this.children.push(e)},n.XML.prototype.removeChild=function(e){var t=-1;if("string"==typeof e){for(var r=0;r<this.children.length;r++)if(this.children[r].name===e){t=r;break}}else t=e;t!==-1&&this.children.splice(t,1)},n.XML.prototype.getAttributeCount=function(){return Object.keys(this.attributes).length},n.XML.prototype.listAttributes=function(){return Object.keys(this.attributes)},n.XML.prototype.hasAttribute=function(e){return!!this.attributes[e]},n.XML.prototype.getNumber=function(e,t){return Number(this.attributes[e])||t||0},n.XML.prototype.getString=function(e,t){return String(this.attributes[e])||t||null},n.XML.prototype.setAttribute=function(e,t){this.attributes[e]&&(this.attributes[e]=t)},n.XML.prototype.getContent=function(e){return this.content||e||null},n.XML.prototype.setContent=function(e){this.children.length||(this.content=e)},n.XML.prototype._setCont=function(e){var t;t=e,t=t.replace(/\s\s+/g,","),this.content=t},n.XML.prototype._setAttributes=function(e){var t,r={};for(t=0;t<e.attributes.length;t++)r[e.attributes[t].nodeName]=e.attributes[t].nodeValue;this.attributes=r},t.exports=n.XML},{"../core/core":37}],63:[function(e,t,r){var n=e("../core/core");n.prototype.abs=Math.abs,n.prototype.ceil=Math.ceil,n.prototype.constrain=function(e,t,r){return Math.max(Math.min(e,r),t)},n.prototype.dist=function(e,t,r,n,a,o){return 4===arguments.length?Math.sqrt((r-e)*(r-e)+(n-t)*(n-t)):6===arguments.length?Math.sqrt((n-e)*(n-e)+(a-t)*(a-t)+(o-r)*(o-r)):void 0},n.prototype.exp=Math.exp,n.prototype.floor=Math.floor,n.prototype.lerp=function(e,t,r){return r*(t-e)+e},n.prototype.log=Math.log,n.prototype.mag=function(e,t){return Math.sqrt(e*e+t*t)},n.prototype.map=function(e,t,r,n,a){return(e-t)/(r-t)*(a-n)+n},n.prototype.max=function(){return arguments[0]instanceof Array?Math.max.apply(null,arguments[0]):Math.max.apply(null,arguments)},n.prototype.min=function(){return arguments[0]instanceof Array?Math.min.apply(null,arguments[0]):Math.min.apply(null,arguments)},n.prototype.norm=function(e,t,r){return this.map(e,t,r,0,1)},n.prototype.pow=Math.pow,n.prototype.round=Math.round,n.prototype.sq=function(e){return e*e},n.prototype.sqrt=Math.sqrt,t.exports=n},{"../core/core":37}],64:[function(e,t,r){var n=e("../core/core");n.prototype.createVector=function(e,t,r){return this instanceof n?new n.Vector(this,arguments):new n.Vector(e,t,r)},t.exports=n},{"../core/core":37}],65:[function(e,t,r){var n,a=e("../core/core"),o=4,i=1<<o,s=8,l=1<<s,u=4095,c=4,p=.5,h=function(e){return.5*(1-Math.cos(e*Math.PI))};a.prototype.noise=function(e,t,r){if(t=t||0,r=r||0,null==n){n=new Array(u+1);for(var a=0;a<u+1;a++)n[a]=Math.random()}e<0&&(e=-e),t<0&&(t=-t),r<0&&(r=-r);for(var d,f,m,g,y,v=Math.floor(e),w=Math.floor(t),x=Math.floor(r),b=e-v,_=t-w,S=r-x,C=0,T=.5,E=0;E<c;E++){var R=v+(w<<o)+(x<<s);d=h(b),f=h(_),m=n[R&u],m+=d*(n[R+1&u]-m),g=n[R+i&u],g+=d*(n[R+i+1&u]-g),m+=f*(g-m),R+=l,g=n[R&u],g+=d*(n[R+1&u]-g),y=n[R+i&u],y+=d*(n[R+i+1&u]-y),g+=f*(y-g),m+=h(S)*(g-m),C+=m*T,T*=p,v<<=1,b*=2,w<<=1,_*=2,x<<=1,S*=2,b>=1&&(v++,b--),_>=1&&(w++,_--),S>=1&&(x++,S--)}return C},a.prototype.noiseDetail=function(e,t){e>0&&(c=e),t>0&&(p=t)},a.prototype.noiseSeed=function(e){var t=function(){var e,t,r=4294967296,n=1664525,a=1013904223;return{setSeed:function(n){t=e=(null==n?Math.random()*r:n)>>>0},getSeed:function(){return e},rand:function(){return t=(n*t+a)%r,t/r}}}();t.setSeed(e),n=new Array(u+1);for(var r=0;r<u+1;r++)n[r]=t.rand()},t.exports=a},{"../core/core":37}],66:[function(e,t,r){var n=e("../core/core"),a=e("./polargeometry"),o=e("../core/constants");n.Vector=function(){var e,t,r;arguments[0]instanceof n?(this.p5=arguments[0],e=arguments[1][0]||0,t=arguments[1][1]||0,r=arguments[1][2]||0):(e=arguments[0]||0,t=arguments[1]||0,r=arguments[2]||0),this.x=e,this.y=t,this.z=r},n.Vector.prototype.toString=function(){return"p5.Vector Object : ["+this.x+", "+this.y+", "+this.z+"]"},n.Vector.prototype.set=function(e,t,r){return e instanceof n.Vector?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this):e instanceof Array?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0,this):(this.x=e||0,this.y=t||0,this.z=r||0,this)},n.Vector.prototype.copy=function(){return this.p5?new n.Vector(this.p5,[this.x,this.y,this.z]):new n.Vector(this.x,this.y,this.z)},n.Vector.prototype.add=function(e,t,r){return e instanceof n.Vector?(this.x+=e.x||0,this.y+=e.y||0,this.z+=e.z||0,this):e instanceof Array?(this.x+=e[0]||0,this.y+=e[1]||0,this.z+=e[2]||0,this):(this.x+=e||0,this.y+=t||0,this.z+=r||0,this)},n.Vector.prototype.sub=function(e,t,r){return e instanceof n.Vector?(this.x-=e.x||0,this.y-=e.y||0,this.z-=e.z||0,this):e instanceof Array?(this.x-=e[0]||0,this.y-=e[1]||0,this.z-=e[2]||0,this):(this.x-=e||0,this.y-=t||0,this.z-=r||0,this)},n.Vector.prototype.mult=function(e){return this.x*=e||0,this.y*=e||0,this.z*=e||0,this},n.Vector.prototype.div=function(e){return this.x/=e,this.y/=e,this.z/=e,this},n.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())},n.Vector.prototype.magSq=function(){var e=this.x,t=this.y,r=this.z;return e*e+t*t+r*r},n.Vector.prototype.dot=function(e,t,r){return e instanceof n.Vector?this.dot(e.x,e.y,e.z):this.x*(e||0)+this.y*(t||0)+this.z*(r||0)},n.Vector.prototype.cross=function(e){var t=this.y*e.z-this.z*e.y,r=this.z*e.x-this.x*e.z,a=this.x*e.y-this.y*e.x;return this.p5?new n.Vector(this.p5,[t,r,a]):new n.Vector(t,r,a)},n.Vector.prototype.dist=function(e){var t=e.copy().sub(this);return t.mag()},n.Vector.prototype.normalize=function(){return this.div(this.mag())},n.Vector.prototype.limit=function(e){var t=this.magSq();return t>e*e&&(this.div(Math.sqrt(t)),this.mult(e)),this},n.Vector.prototype.setMag=function(e){return this.normalize().mult(e)},n.Vector.prototype.heading=function(){var e=Math.atan2(this.y,this.x);return this.p5?this.p5._angleMode===o.RADIANS?e:a.radiansToDegrees(e):e},n.Vector.prototype.rotate=function(e){this.p5&&this.p5._angleMode===o.DEGREES&&(e=a.degreesToRadians(e));var t=this.heading()+e,r=this.mag();return this.x=Math.cos(t)*r,this.y=Math.sin(t)*r,this},n.Vector.prototype.lerp=function(e,t,r,a){return e instanceof n.Vector?this.lerp(e.x,e.y,e.z,t):(this.x+=(e-this.x)*a||0,this.y+=(t-this.y)*a||0,this.z+=(r-this.z)*a||0,this)},n.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},n.Vector.prototype.equals=function(e,t,r){var a,o,i;return e instanceof n.Vector?(a=e.x||0,o=e.y||0,i=e.z||0):e instanceof Array?(a=e[0]||0,o=e[1]||0,i=e[2]||0):(a=e||0,o=t||0,i=r||0),this.x===a&&this.y===o&&this.z===i},n.Vector.fromAngle=function(e){return this.p5&&this.p5._angleMode===o.DEGREES&&(e=a.degreesToRadians(e)),this.p5?new n.Vector(this.p5,[Math.cos(e),Math.sin(e),0]):new n.Vector(Math.cos(e),Math.sin(e),0)},n.Vector.random2D=function(){var e;return e=this.p5?this.p5._angleMode===o.DEGREES?this.p5.random(360):this.p5.random(o.TWO_PI):Math.random()*Math.PI*2,this.fromAngle(e)},n.Vector.random3D=function(){var e,t;this.p5?(e=this.p5.random(0,o.TWO_PI),t=this.p5.random(-1,1)):(e=Math.random()*Math.PI*2,t=2*Math.random()-1);var r=Math.sqrt(1-t*t)*Math.cos(e),a=Math.sqrt(1-t*t)*Math.sin(e);return this.p5?new n.Vector(this.p5,[r,a,t]):new n.Vector(r,a,t)},n.Vector.add=function(e,t,r){return r?r.set(e):r=e.copy(),r.add(t),r},n.Vector.sub=function(e,t,r){return r?r.set(e):r=e.copy(),r.sub(t),r},n.Vector.mult=function(e,t,r){return r?r.set(e):r=e.copy(),r.mult(t),r},n.Vector.div=function(e,t,r){return r?r.set(e):r=e.copy(),r.div(t),r},n.Vector.dot=function(e,t){return e.dot(t)},n.Vector.cross=function(e,t){return e.cross(t)},n.Vector.dist=function(e,t){return e.dist(t)},n.Vector.lerp=function(e,t,r,n){return n?n.set(e):n=e.copy(),n.lerp(t,r),n},n.Vector.angleBetween=function(e,t){var r=Math.acos(e.dot(t)/(e.mag()*t.mag()));return this.p5&&this.p5._angleMode===o.DEGREES&&(r=a.radiansToDegrees(r)),r},n.Vector.mag=function(e){var t=e.x,r=e.y,n=e.z,a=t*t+r*r+n*n;return Math.sqrt(a)},t.exports=n.Vector},{"../core/constants":36,"../core/core":37,"./polargeometry":67}],67:[function(e,t,r){t.exports={degreesToRadians:function(e){return 2*Math.PI*e/360},radiansToDegrees:function(e){return 360*e/(2*Math.PI)}}},{}],68:[function(e,t,r){var n=e("../core/core"),a=!1,o=function(){var e,t,r=4294967296,n=1664525,a=1013904223;return{setSeed:function(n){t=e=(null==n?Math.random()*r:n)>>>0},getSeed:function(){return e},rand:function(){return t=(n*t+a)%r,t/r}}}();n.prototype.randomSeed=function(e){o.setSeed(e),a=!0},n.prototype.random=function(e,t){var r;if(r=a?o.rand():Math.random(),0===arguments.length)return r;if(1===arguments.length)return arguments[0]instanceof Array?arguments[0][Math.floor(r*arguments[0].length)]:r*e;if(e>t){var n=e;e=t,t=n}return r*(t-e)+e};var i,s=!1;n.prototype.randomGaussian=function(e,t){var r,n,a,o;if(s)r=i,s=!1;else{do n=this.random(2)-1,a=this.random(2)-1,o=n*n+a*a;while(o>=1);o=Math.sqrt(-2*Math.log(o)/o),r=n*o,i=a*o,s=!0}var l=e||0,u=t||1;return r*u+l},t.exports=n},{"../core/core":37}],69:[function(e,t,r){var n=e("../core/core"),a=e("./polargeometry"),o=e("../core/constants");n.prototype._angleMode=o.RADIANS,/**
 * The inverse of cos(), returns the arc cosine of a value. This function
 * expects the values in the range of -1 to 1 and values are returned in
 * the range 0 to PI (3.1415927).
 *
 * @method acos
 * @param  {Number} value the value whose arc cosine is to be returned
 * @return {Number}       the arc cosine of the given value
 *
 * @example
 * <div class= “norender">
 * <code>
 * var a = PI;
 * var c = cos(a);
 * var ac = acos(c);
 * // Prints: "3.1415927 : -1.0 : 3.1415927"
 * println(a + " : " + c + " : " +  ac);
 * </code>
 * </div>
 *
 * <div class= “norender">
 * <code>
 * var a = PI + PI/4.0;
 * var c = cos(a);
 * var ac = acos(c);
 * // Prints: "3.926991 : -0.70710665 : 2.3561943"
 * println(a + " : " + c + " : " +  ac);
 * </code>
 * </div>
 */
n.prototype.acos=function(e){return this._angleMode===o.RADIANS?Math.acos(e):a.radiansToDegrees(Math.acos(e))},n.prototype.asin=function(e){return this._angleMode===o.RADIANS?Math.asin(e):a.radiansToDegrees(Math.asin(e))},n.prototype.atan=function(e){return this._angleMode===o.RADIANS?Math.atan(e):a.radiansToDegrees(Math.atan(e))},n.prototype.atan2=function(e,t){return this._angleMode===o.RADIANS?Math.atan2(e,t):a.radiansToDegrees(Math.atan2(e,t))},n.prototype.cos=function(e){return this._angleMode===o.RADIANS?Math.cos(e):Math.cos(this.radians(e))},n.prototype.sin=function(e){return this._angleMode===o.RADIANS?Math.sin(e):Math.sin(this.radians(e))},n.prototype.tan=function(e){return this._angleMode===o.RADIANS?Math.tan(e):Math.tan(this.radians(e))},n.prototype.degrees=function(e){return a.radiansToDegrees(e)},n.prototype.radians=function(e){return a.degreesToRadians(e)},n.prototype.angleMode=function(e){e!==o.DEGREES&&e!==o.RADIANS||(this._angleMode=e)},t.exports=n},{"../core/constants":36,"../core/core":37,"./polargeometry":67}],70:[function(e,t,r){var n=e("../core/core");n.prototype.textAlign=function(e,t){return this._renderer.textAlign.apply(this._renderer,arguments)},n.prototype.textLeading=function(e){return this._renderer.textLeading.apply(this._renderer,arguments)},n.prototype.textSize=function(e){return this._renderer.textSize.apply(this._renderer,arguments)},n.prototype.textStyle=function(e){return this._renderer.textStyle.apply(this._renderer,arguments)},n.prototype.textWidth=function(e){return this._renderer.textWidth.apply(this._renderer,arguments)},n.prototype.textAscent=function(){return this._renderer.textAscent()},n.prototype.textDescent=function(){return this._renderer.textDescent()},n.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},t.exports=n},{"../core/core":37}],71:[function(e,t,r){var n=e("../core/core"),a=e("../core/constants");e("../core/error_helpers"),n.prototype.text=function(e,t,r,n,a){for(var o=new Array(arguments.length),i=0;i<o.length;++i)o[i]=arguments[i];return this._validateParameters("text",o,[["*","Number","Number"],["*","Number","Number","Number","Number"]]),this._renderer._doFill||this._renderer._doStroke?this._renderer.text.apply(this._renderer,arguments):this},n.prototype.textFont=function(e,t){if(arguments.length){if(!e)throw Error("null font passed to textFont");return this._renderer._setProperty("_textFont",e),t&&(this._renderer._setProperty("_textSize",t),this._renderer._setProperty("_textLeading",t*a._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this},t.exports=n},{"../core/constants":36,"../core/core":37,"../core/error_helpers":40}],72:[function(e,t,r){function n(e,t){for(var r=s(t,{sampleFactor:.1,simplifyThreshold:0}),n=d(e,0,1),o=n/(n*r.sampleFactor),i=[],l=0;l<n;l+=o)i.push(d(e,l));return r.simplifyThreshold&&a(i,r.simplifyThreshold),i}function a(e,t){t="undefined"==typeof t?0:t;for(var r=0,n=e.length-1;e.length>3&&n>=0;--n)u(l(e,n-1),l(e,n),l(e,n+1),t)&&(e.splice(n%e.length,1),r++);return r}function o(e){for(var t,r=[],n=0;n<e.length;n++)"M"===e[n].type&&(t&&r.push(t),t=[]),t.push(i(e[n]));return r.push(t),r}function i(e){var t=[e.type];return"M"===e.type||"L"===e.type?t.push(e.x,e.y):"C"===e.type?t.push(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type&&t.push(e.x1,e.y1,e.x,e.y),t}function s(e,t){if("object"!=typeof e)e=t;else for(var r in t)"undefined"==typeof e[r]&&(e[r]=t[r]);return e}function l(e,t){var r=e.length;return e[t<0?t%r+r:t%r]}function u(e,t,r,n){if(!n)return 0===c(e,t,r);"undefined"==typeof u.tmpPoint1&&(u.tmpPoint1=[],u.tmpPoint2=[]);var a=u.tmpPoint1,o=u.tmpPoint2;a.x=t.x-e.x,a.y=t.y-e.y,o.x=r.x-t.x,o.y=r.y-t.y;var i=a.x*o.x+a.y*o.y,s=Math.sqrt(a.x*a.x+a.y*a.y),l=Math.sqrt(o.x*o.x+o.y*o.y),p=Math.acos(i/(s*l));return p<n}function c(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}
// Portions of below code copyright 2008 Dmitry Baranovskiy (via MIT license)
function p(e,t,r,n,a,o,i,s,l){var u=1-l,c=Math.pow(u,3),p=Math.pow(u,2),h=l*l,d=h*l,f=c*e+3*p*l*r+3*u*l*l*a+d*i,m=c*t+3*p*l*n+3*u*l*l*o+d*s,g=e+2*l*(r-e)+h*(a-2*r+e),y=t+2*l*(n-t)+h*(o-2*n+t),v=r+2*l*(a-r)+h*(i-2*a+r),w=n+2*l*(o-n)+h*(s-2*o+n),x=u*e+l*r,b=u*t+l*n,_=u*a+l*i,S=u*o+l*s,C=90-180*Math.atan2(g-v,y-w)/Math.PI;return(g>v||y<w)&&(C+=180),{x:f,y:m,m:{x:g,y:y},n:{x:v,y:w},start:{x:x,y:b},end:{x:_,y:S},alpha:C}}function h(e,t,r,n,a,o,i,s,l){return null==l?x(e,t,r,n,a,o,i,s):p(e,t,r,n,a,o,i,s,b(e,t,r,n,a,o,i,s,l))}function d(e,t,r){e=m(e);for(var n,a,o,i,s,l="",u={},c=0,d=0,f=e.length;d<f;d++){if(o=e[d],"M"===o[0])n=+o[1],a=+o[2];else{if(i=h(n,a,o[1],o[2],o[3],o[4],o[5],o[6]),c+i>t&&!r)return s=h(n,a,o[1],o[2],o[3],o[4],o[5],o[6],t-c),{x:s.x,y:s.y,alpha:s.alpha};c+=i,n=+o[5],a=+o[6]}l+=o.shift()+o}return u.end=l,s=r?c:p(n,a,o[0],o[1],o[2],o[3],o[4],o[5],1),s.alpha&&(s={x:s.x,y:s.y,alpha:s.alpha}),s}function f(e){var t=[],r=0,n=0,a=0,o=0,i=0;"M"===e[0][0]&&(r=+e[0][1],n=+e[0][2],a=r,o=n,i++,t[0]=["M",r,n]);for(var s,l,u,c=3===e.length&&"M"===e[0][0]&&"R"===e[1][0].toUpperCase()&&"Z"===e[2][0].toUpperCase(),p=i,h=e.length;p<h;p++){if(t.push(l=[]),u=e[p],u[0]!==String.prototype.toUpperCase.call(u[0]))switch(l[0]=String.prototype.toUpperCase.call(u[0]),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+(u[6]+r),l[7]=+(u[7]+n);break;case"V":l[1]=+u[1]+n;break;case"H":l[1]=+u[1]+r;break;case"R":s=[r,n].concat(u.slice(1));for(var d=2,f=s.length;d<f;d++)s[d]=+s[d]+r,s[++d]=+s[d]+n;t.pop(),t=t.concat(y(s,c));break;case"M":a=+u[1]+r,o=+u[2]+n;break;default:for(d=1,f=u.length;d<f;d++)l[d]=+u[d]+(d%2?r:n)}else if("R"===u[0])s=[r,n].concat(u.slice(1)),t.pop(),t=t.concat(y(s,c)),l=["R"].concat(u.slice(-2));else for(var m=0,g=u.length;m<g;m++)l[m]=u[m];switch(l[0]){case"Z":r=a,n=o;break;case"H":r=l[1];break;case"V":n=l[1];break;case"M":a=l[l.length-2],o=l[l.length-1];break;default:r=l[l.length-2],n=l[l.length-1]}}return t}function m(e,t){for(var r=f(e),n=t&&f(t),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},i=(function(e,t,r){var n,a,o={T:1,Q:1};if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in o||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(g.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":"C"===r||"S"===r?(n=2*t.x-t.bx,a=2*t.y-t.by):(n=t.x,a=t.y),e=["C",n,a].concat(e.slice(1));break;case"T":"Q"===r||"T"===r?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(w(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(w(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(v(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(v(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(v(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(v(t.x,t.y,t.X,t.Y))}return e}),s=function(e,t){if(e[t].length>7){e[t].shift();for(var a=e[t];a.length;)u[t]="A",n&&(c[t]="A"),e.splice(t++,0,["C"].concat(a.splice(0,6)));e.splice(t,1),m=Math.max(r.length,n&&n.length||0)}},l=function(e,t,a,o,i){e&&t&&"M"===e[i][0]&&"M"!==t[i][0]&&(t.splice(i,0,["M",o.x,o.y]),a.bx=0,a.by=0,a.x=e[i][1],a.y=e[i][2],m=Math.max(r.length,n&&n.length||0))},u=[],c=[],p="",h="",d=0,m=Math.max(r.length,n&&n.length||0);d<m;d++){r[d]&&(p=r[d][0]),"C"!==p&&(u[d]=p,d&&(h=u[d-1])),r[d]=i(r[d],a,h),"A"!==u[d]&&"C"===p&&(u[d]="C"),s(r,d),n&&(n[d]&&(p=n[d][0]),"C"!==p&&(c[d]=p,d&&(h=c[d-1])),n[d]=i(n[d],o,h),"A"!==c[d]&&"C"===p&&(c[d]="C"),s(n,d)),l(r,n,a,o,d),l(n,r,o,a,d);var y=r[d],x=n&&n[d],b=y.length,_=n&&x.length;a.x=y[b-2],a.y=y[b-1],a.bx=parseFloat(y[b-4])||a.x,a.by=parseFloat(y[b-3])||a.y,o.bx=n&&(parseFloat(x[_-4])||o.x),o.by=n&&(parseFloat(x[_-3])||o.y),o.x=n&&x[_-2],o.y=n&&x[_-1]}return n?[r,n]:r}function g(e,t,r,n,a,o,i,s,l,u){var c,p,h,d,f,m=Math.PI,y=120*m/180,v=m/180*(+a||0),w=[],x=function(e,t,r){var n=e*Math.cos(r)-t*Math.sin(r),a=e*Math.sin(r)+t*Math.cos(r);return{x:n,y:a}};if(u)c=u[0],p=u[1],h=u[2],d=u[3];else{f=x(e,t,-v),e=f.x,t=f.y,f=x(s,l,-v),s=f.x,l=f.y;var b=(e-s)/2,_=(t-l)/2,S=b*b/(r*r)+_*_/(n*n);S>1&&(S=Math.sqrt(S),r=S*r,n=S*n);var C=r*r,T=n*n,E=(o===i?-1:1)*Math.sqrt(Math.abs((C*T-C*_*_-T*b*b)/(C*_*_+T*b*b)));h=E*r*_/n+(e+s)/2,d=E*-n*b/r+(t+l)/2,c=Math.asin(((t-d)/n).toFixed(9)),p=Math.asin(((l-d)/n).toFixed(9)),c=e<h?m-c:c,p=s<h?m-p:p,c<0&&(c=2*m+c),p<0&&(p=2*m+p),i&&c>p&&(c-=2*m),!i&&p>c&&(p-=2*m)}var R=p-c;if(Math.abs(R)>y){var k=p,M=s,A=l;p=c+y*(i&&p>c?1:-1),s=h+r*Math.cos(p),l=d+n*Math.sin(p),w=g(s,l,r,n,a,0,i,M,A,[p,k,h,d])}R=p-c;var I=Math.cos(c),P=Math.sin(c),N=Math.cos(p),L=Math.sin(p),O=Math.tan(R/4),B=4/3*r*O,D=4/3*n*O,U=[e,t],F=[e+B*P,t-D*I],z=[s+B*L,l-D*N],G=[s,l];if(F[0]=2*U[0]-F[0],F[1]=2*U[1]-F[1],u)return[F,z,G].concat(w);w=[F,z,G].concat(w).join().split(",");for(var H=[],q=0,V=w.length;q<V;q++)H[q]=q%2?x(w[q-1],w[q],v).y:x(w[q],w[q+1],v).x;return H}function y(e,t){for(var r=[],n=0,a=e.length;a-2*!t>n;n+=2){var o=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?a-4===n?o[3]={x:+e[0],y:+e[1]}:a-2===n&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[a-2],y:+e[a-1]}:a-4===n?o[3]=o[2]:n||(o[0]={x:+e[n],y:+e[n+1]}),r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r}function v(e,t,r,n){return[e,t,r,n,r,n]}function w(e,t,r,n,a,o){var i=1/3,s=2/3;return[i*e+s*r,i*t+s*n,i*a+s*r,i*o+s*n,a,o]}function x(e,t,r,n,a,o,i,s,l){null==l&&(l=1),l=l>1?1:l<0?0:l;for(var u=l/2,c=12,p=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],h=0,d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0;f<c;f++){var m=u*p[f]+u,g=_(m,e,r,a,i),y=_(m,t,n,o,s),v=g*g+y*y;h+=d[f]*Math.sqrt(v)}return u*h}function b(e,t,r,n,a,o,i,s,l){if(!(l<0||x(e,t,r,n,a,o,i,s)<l)){var u,c=1,p=c/2,h=c-p,d=.01;for(u=x(e,t,r,n,a,o,i,s,h);Math.abs(u-l)>d;)p/=2,h+=(u<l?1:-1)*p,u=x(e,t,r,n,a,o,i,s,h);return h}}function _(e,t,r,n,a){var o=-3*t+9*r-9*n+3*a,i=e*o+6*t-12*r+6*n;return e*i-3*t+3*r}function S(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];t=e.length;for(var r="";t--;)r+=e[t]===Object(e[t])?JSON.stringify(e[t]):e[t];return r}var C=e("../core/core"),T=e("../core/constants");C.Font=function(e){this.parent=e,this.cache={},this.font=void 0},C.Font.prototype.list=function(){throw"not yet implemented"},C.Font.prototype.textBounds=function(e,t,r,n,a){t=void 0!==t?t:0,r=void 0!==r?r:0,n=n||this.parent._renderer._textSize;var o=a&&a.renderer&&a.renderer._pInst||this.parent,i=o._renderer.drawingContext,s=i.textAlign||T.LEFT,l=i.textBaseline||T.BASELINE,u=this.cache[S("textBounds",e,t,r,n,s,l)];if(!u){var c,p,h,d,f=[],m=[],g=this,y=this._scale(n);this.font.forEachGlyph(e,t,r,n,a,function(e,t,r,a){f.push(t),m.push(r);var o=e.getMetrics();"space"!==e.name?(f.push(t+o.xMax*y),m.push(r+-o.yMin*y),m.push(r+-o.yMax*y)):f.push(t+g.font.charToGlyph(" ").advanceWidth*g._scale(n))}),c=Math.min.apply(null,f),p=Math.min.apply(null,m),h=Math.max.apply(null,f),d=Math.max.apply(null,m),u={x:c,y:p,h:d-p,w:h-c,advance:c-t};var v=u.w+u.advance,w=this._handleAlignment(o,i,e,u.x,u.y,v);u.x=w.x,u.y=w.y,this.cache[S("textBounds",e,t,r,n,s,l)]=u}return u},C.Font.prototype.textToPoints=function(e,t,r,a,i){var s=0,l=[],u=this._getGlyphs(e);a=a||this.parent._renderer._textSize;for(var c=0;c<u.length;c++){for(var p=u[c].getPath(t,r,a),h=o(p.commands),d=0;d<h.length;d++)for(var f=n(h[d],i),m=0;m<f.length;m++)f[m].x+=s,l.push(f[m]);s+=u[c].advanceWidth*this._scale(a)}return l},C.Font.prototype._getGlyphs=function(e){return this.font.stringToGlyphs(e)},C.Font.prototype._getPath=function(e,t,r,n){var a=n&&n.renderer&&n.renderer._pInst||this.parent,o=a._renderer.drawingContext,i=this._handleAlignment(a,o,e,t,r);return this.font.getPath(e,i.x,i.y,a._renderer._textSize,n)},C.Font.prototype._getPathData=function(e,t,r,n){var a=3;return"string"==typeof e&&arguments.length>2?e=this._getPath(e,t,r,n):"object"==typeof t&&(n=t),n&&"number"==typeof n.decimals&&(a=n.decimals),e.toPathData(a)},C.Font.prototype._getSVG=function(e,t,r,n){var a=3;return"string"==typeof e&&arguments.length>2?e=this._getPath(e,t,r,n):"object"==typeof t&&(n=t),n&&("number"==typeof n.decimals&&(a=n.decimals),"number"==typeof n.strokeWidth&&(e.strokeWidth=n.strokeWidth),"undefined"!=typeof n.fill&&(e.fill=n.fill),"undefined"!=typeof n.stroke&&(e.stroke=n.stroke)),e.toSVG(a)},C.Font.prototype._renderPath=function(e,t,r,n){var a,o=n&&n.renderer||this.parent._renderer,i=o.drawingContext;a="object"==typeof e&&e.commands?e.commands:this._getPath(e,t,r,n).commands,i.beginPath();for(var s=0;s<a.length;s+=1){var l=a[s];"M"===l.type?i.moveTo(l.x,l.y):"L"===l.type?i.lineTo(l.x,l.y):"C"===l.type?i.bezierCurveTo(l.x1,l.y1,l.x2,l.y2,l.x,l.y):"Q"===l.type?i.quadraticCurveTo(l.x1,l.y1,l.x,l.y):"Z"===l.type&&i.closePath()}return o._doStroke&&o._strokeSet&&i.stroke(),o._doFill&&(i.fillStyle=o._fillSet?i.fillStyle:T._DEFAULT_TEXT_FILL,i.fill()),this},C.Font.prototype._textWidth=function(e,t){if(" "===e)return this.font.charToGlyph(" ").advanceWidth*this._scale(t);var r=this.textBounds(e,0,0,t);return r.w+r.advance},C.Font.prototype._textAscent=function(e){return this.font.ascender*this._scale(e)},C.Font.prototype._textDescent=function(e){return-this.font.descender*this._scale(e)},C.Font.prototype._scale=function(e){return 1/this.font.unitsPerEm*(e||this.parent._renderer._textSize)},C.Font.prototype._handleAlignment=function(e,t,r,n,a,o){var i=e._renderer._textSize,s=this._textAscent(i),l=this._textDescent(i);return o=void 0!==o?o:this._textWidth(r,i),t.textAlign===T.CENTER?n-=o/2:t.textAlign===T.RIGHT&&(n-=o),t.textBaseline===T.TOP?a+=s:t.textBaseline===T._CTX_MIDDLE?a+=s/2:t.textBaseline===T.BOTTOM&&(a-=l),{x:n,y:a}},t.exports=C.Font},{"../core/constants":36,"../core/core":37}],73:[function(e,t,r){var n=e("../core/core");n.prototype.append=function(e,t){return e.push(t),e},n.prototype.arrayCopy=function(e,t,r,n,a){var o,i;"undefined"!=typeof a?(i=Math.min(a,e.length),o=n,e=e.slice(t,i+t)):("undefined"!=typeof r?(i=r,i=Math.min(i,e.length)):i=e.length,o=0,r=t,e=e.slice(0,i)),Array.prototype.splice.apply(r,[o,i].concat(e))},n.prototype.concat=function(e,t){return e.concat(t)},n.prototype.reverse=function(e){return e.reverse()},n.prototype.shorten=function(e){return e.pop(),e},n.prototype.shuffle=function(e,t){var r=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(e);e=t||r?e:e.slice();for(var n,a,o=e.length;o>1;)n=Math.random()*o|0,a=e[--o],e[o]=e[n],e[n]=a;return e},n.prototype.sort=function(e,t){var r=t?e.slice(0,Math.min(t,e.length)):e,n=t?e.slice(Math.min(t,e.length)):[];return r="string"==typeof r[0]?r.sort():r.sort(function(e,t){return e-t}),r.concat(n)},n.prototype.splice=function(e,t,r){return Array.prototype.splice.apply(e,[r,0].concat(t)),e},n.prototype.subset=function(e,t,r){return"undefined"!=typeof r?e.slice(t,t+r):e.slice(t,e.length)},t.exports=n},{"../core/core":37}],74:[function(e,t,r){var n=e("../core/core");n.prototype["float"]=function(e){return parseFloat(e)},n.prototype["int"]=function(e,t){return"string"==typeof e?(t=t||10,parseInt(e,t)):"number"==typeof e?0|e:"boolean"==typeof e?e?1:0:e instanceof Array?e.map(function(e){return n.prototype["int"](e,t)}):void 0},n.prototype.str=function(e){return e instanceof Array?e.map(n.prototype.str):String(e)},n.prototype["boolean"]=function(e){return"number"==typeof e?0!==e:"string"==typeof e?"true"===e.toLowerCase():"boolean"==typeof e?e:e instanceof Array?e.map(n.prototype["boolean"]):void 0},n.prototype["byte"]=function(e){var t=n.prototype["int"](e,10);return"number"==typeof t?(t+128)%256-128:t instanceof Array?t.map(n.prototype["byte"]):void 0},n.prototype["char"]=function(e){return"number"!=typeof e||isNaN(e)?e instanceof Array?e.map(n.prototype["char"]):"string"==typeof e?n.prototype["char"](parseInt(e,10)):void 0:String.fromCharCode(e)},n.prototype.unchar=function(e){return"string"==typeof e&&1===e.length?e.charCodeAt(0):e instanceof Array?e.map(n.prototype.unchar):void 0},n.prototype.hex=function(e,t){if(t=void 0===t||null===t?t=8:t,e instanceof Array)return e.map(function(e){return n.prototype.hex(e,t)});if("number"==typeof e){e<0&&(e=4294967295+e+1);for(var r=Number(e).toString(16).toUpperCase();r.length<t;)r="0"+r;return r.length>=t&&(r=r.substring(r.length-t,r.length)),r}},n.prototype.unhex=function(e){return e instanceof Array?e.map(n.prototype.unhex):parseInt("0x"+e,16)},t.exports=n},{"../core/core":37}],75:[function(e,t,r){function n(){var e=arguments[0],t=e<0,r=t?e.toString().substring(1):e.toString(),n=r.indexOf("."),a=n!==-1?r.substring(0,n):r,o=n!==-1?r.substring(n+1):"",i=t?"-":"";if(3===arguments.length){var s="";(n!==-1||arguments[2]-o.length>0)&&(s="."),o.length>arguments[2]&&(o=o.substring(0,arguments[2]));for(var l=0;l<arguments[1]-a.length;l++)i+="0";i+=a,i+=s,i+=o;for(var u=0;u<arguments[2]-o.length;u++)i+="0";return i}for(var c=0;c<Math.max(arguments[1]-a.length,0);c++)i+="0";return i+=r}function a(){var e=arguments[0].toString(),t=e.indexOf("."),r=t!==-1?e.substring(t):"",n=t!==-1?e.substring(0,t):e;if(n=n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===arguments[1])r="";else if(void 0!==arguments[1])if(arguments[1]>r.length){r+=t===-1?".":"";for(var a=arguments[1]-r.length+1,o=0;o<a;o++)r+="0"}else r=r.substring(0,arguments[1]+1);return n+r}function o(){return parseFloat(arguments[0])>0?"+"+arguments[0].toString():arguments[0].toString()}function i(){return parseFloat(arguments[0])>0?" "+arguments[0].toString():arguments[0].toString()}var s=e("../core/core");s.prototype.join=function(e,t){return e.join(t)},s.prototype.match=function(e,t){return e.match(t)},s.prototype.matchAll=function(e,t){for(var r=new RegExp(t,"g"),n=r.exec(e),a=[];null!==n;)a.push(n),n=r.exec(e);return a},s.prototype.nf=function(){if(arguments[0]instanceof Array){var e=arguments[1],t=arguments[2];return arguments[0].map(function(r){return n(r,e,t)})}var r=Object.prototype.toString.call(arguments[0]);return"[object Arguments]"===r?3===arguments[0].length?this.nf(arguments[0][0],arguments[0][1],arguments[0][2]):2===arguments[0].length?this.nf(arguments[0][0],arguments[0][1]):this.nf(arguments[0][0]):n.apply(this,arguments)},s.prototype.nfc=function(){if(arguments[0]instanceof Array){var e=arguments[1];return arguments[0].map(function(t){return a(t,e)})}return a.apply(this,arguments)},s.prototype.nfp=function(){var e=this.nf.apply(this,arguments);return e instanceof Array?e.map(o):o(e)},s.prototype.nfs=function(){var e=this.nf.apply(this,arguments);return e instanceof Array?e.map(i):i(e)},s.prototype.split=function(e,t){return e.split(t)},s.prototype.splitTokens=function(){var e,t,r,n;return n=arguments[1],arguments.length>1?(r=/\]/g.exec(n),t=/\[/g.exec(n),t&&r?(n=n.slice(0,r.index)+n.slice(r.index+1),t=/\[/g.exec(n),n=n.slice(0,t.index)+n.slice(t.index+1),e=new RegExp("[\\["+n+"\\]]","g")):r?(n=n.slice(0,r.index)+n.slice(r.index+1),e=new RegExp("["+n+"\\]]","g")):t?(n=n.slice(0,t.index)+n.slice(t.index+1),e=new RegExp("["+n+"\\[]","g")):e=new RegExp("["+n+"]","g")):e=/\s/g,arguments[0].split(e).filter(function(e){return e})},s.prototype.trim=function(e){return e instanceof Array?e.map(this.trim):e.trim()},t.exports=s},{"../core/core":37}],76:[function(e,t,r){var n=e("../core/core");n.prototype.day=function(){return(new Date).getDate()},n.prototype.hour=function(){return(new Date).getHours()},n.prototype.minute=function(){return(new Date).getMinutes()},n.prototype.millis=function(){return window.performance.now()},n.prototype.month=function(){return(new Date).getMonth()+1},n.prototype.second=function(){return(new Date).getSeconds()},n.prototype.year=function(){return(new Date).getFullYear()},t.exports=n},{"../core/core":37}],77:[function(e,t,r){var n=e("../core/core");n.prototype.camera=function(e,t,r){for(var n=new Array(arguments.length),a=0;a<n.length;++a)n[a]=arguments[a];this._validateParameters("camera",n,["Number","Number","Number"]),this._renderer.translate(-e,-t,-r)},n.prototype.perspective=function(e,t,r,a){for(var o=new Array(arguments.length),i=0;i<o.length;++i)o[i]=arguments[i];this._validateParameters("perspective",o,["Number","Number","Number","Number"]),this._renderer.uPMatrix=n.Matrix.identity(),this._renderer.uPMatrix.perspective(e,t,r,a),this._renderer._isSetCamera=!0},n.prototype.ortho=function(e,t,r,a,o,i){for(var s=new Array(arguments.length),l=0;l<s.length;++l)s[l]=arguments[l];this._validateParameters("ortho",s,["Number","Number","Number","Number","Number","Number"]),e/=this.width,t/=this.width,a/=this.height,r/=this.height,this._renderer.uPMatrix=n.Matrix.identity(),this._renderer.uPMatrix.ortho(e,t,r,a,o,i),this._renderer._isSetCamera=!0},t.exports=n},{"../core/core":37}],78:[function(e,t,r){var n=e("../core/core");n.prototype.orbitControl=function(){return this.mouseIsPressed&&(this.rotateY((this.mouseX-this.width/2)/(this.width/2)),this.rotateX((this.mouseY-this.height/2)/(this.width/2))),this},t.exports=n},{"../core/core":37}],79:[function(e,t,r){var n=e("../core/core");n.prototype.ambientLight=function(e,t,r,n){var a=this._renderer.GL,o=this._renderer._getShader("lightVert","lightTextureFrag");a.useProgram(o),o.uAmbientColor=a.getUniformLocation(o,"uAmbientColor["+this._renderer.ambientLightCount+"]");var i=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),s=i._array;return a.uniform3f(o.uAmbientColor,s[0],s[1],s[2]),o.uMaterialColor=a.getUniformLocation(o,"uMaterialColor"),a.uniform4f(o.uMaterialColor,1,1,1,1),this._renderer.ambientLightCount++,o.uAmbientLightCount=a.getUniformLocation(o,"uAmbientLightCount"),a.uniform1i(o.uAmbientLightCount,this._renderer.ambientLightCount),this},n.prototype.directionalLight=function(e,t,r,n,a,o,i){var s=this._renderer.GL,l=this._renderer._getShader("lightVert","lightTextureFrag");s.useProgram(l),l.uDirectionalColor=s.getUniformLocation(l,"uDirectionalColor["+this._renderer.directionalLightCount+"]");var u=this._renderer._pInst.color.apply(this._renderer._pInst,[e,t,r]),c=u._array;s.uniform3f(l.uDirectionalColor,c[0],c[1],c[2]);for(var p,h,d,f=new Array(arguments.length),m=0;m<f.length;++m)f[m]=arguments[m];if("number"==typeof f[f.length-1])p=f[f.length-3],h=f[f.length-2],d=f[f.length-1];else try{p=f[f.length-1].x,h=f[f.length-1].y,d=f[f.length-1].z}catch(g){throw g}return l.uLightingDirection=s.getUniformLocation(l,"uLightingDirection["+this._renderer.directionalLightCount+"]"),s.uniform3f(l.uLightingDirection,p,h,d),l.uMaterialColor=s.getUniformLocation(l,"uMaterialColor"),s.uniform4f(l.uMaterialColor,1,1,1,1),this._renderer.directionalLightCount++,l.uDirectionalLightCount=s.getUniformLocation(l,"uDirectionalLightCount"),s.uniform1i(l.uDirectionalLightCount,this._renderer.directionalLightCount),this},n.prototype.pointLight=function(e,t,r,n,a,o,i){var s=this._renderer.GL,l=this._renderer._getShader("lightVert","lightTextureFrag");s.useProgram(l),l.uPointLightColor=s.getUniformLocation(l,"uPointLightColor["+this._renderer.pointLightCount+"]");var u=this._renderer._pInst.color.apply(this._renderer._pInst,[e,t,r]),c=u._array;s.uniform3f(l.uPointLightColor,c[0],c[1],c[2]);for(var p,h,d,f=new Array(arguments.length),m=0;m<f.length;++m)f[m]=arguments[m];if("number"==typeof f[f.length-1])p=f[f.length-3],h=f[f.length-2],d=f[f.length-1];else try{p=f[f.length-1].x,h=f[f.length-1].y,d=f[f.length-1].z}catch(g){throw g}return l.uPointLightLocation=s.getUniformLocation(l,"uPointLightLocation["+this._renderer.pointLightCount+"]"),s.uniform3f(l.uPointLightLocation,p,h,d),l.uMaterialColor=s.getUniformLocation(l,"uMaterialColor"),s.uniform4f(l.uMaterialColor,1,1,1,1),this._renderer.pointLightCount++,l.uPointLightCount=s.getUniformLocation(l,"uPointLightCount"),s.uniform1i(l.uPointLightCount,this._renderer.pointLightCount),this},t.exports=n},{"../core/core":37}],80:[function(e,t,r){function n(e,t){for(var r={v:[],vt:[],vn:[]},n={},o=0;o<t.length;++o){var i=t[o].trim().split(/\b\s+/);if(i.length>0)if("v"===i[0]||"vn"===i[0]){var s=new a.Vector(parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]));r[i[0]].push(s)}else if("vt"===i[0]){var l=[parseFloat(i[1]),parseFloat(i[2])];r[i[0]].push(l)}else if("f"===i[0])for(var u=3;u<i.length;++u){for(var c=[],p=[1,u-1,u],h=0;h<p.length;++h){var d=i[p[h]],f=0;if(void 0!==n[d])f=n[d];else{for(var m=d.split("/"),g=0;g<m.length;g++)m[g]=parseInt(m[g])-1;f=n[d]=e.vertices.length,e.vertices.push(r.v[m[0]].copy()),r.vt[m[1]]?e.uvs.push(r.vt[m[1]].slice()):e.uvs.push([0,0]),r.vn[m[2]]&&e.vertexNormals.push(r.vn[m[2]].copy())}c.push(f)}e.faces.push(c)}}return 0===e.vertexNormals.length&&e.computeNormals(),e}var a=e("../core/core");e("./p5.Geometry"),a.prototype.loadModel=function(){var e,t,r,o=arguments[0];"boolean"==typeof arguments[1]?(e=arguments[1],t=arguments[2],r=arguments[3]):(e=!1,t=arguments[1],r=arguments[2]);var i=new a.Geometry;return i.gid=o+"|"+e,this.loadStrings(o,function(r){n(i,r),e&&i.normalize(),"function"==typeof t&&t(i)}.bind(this),r),i},a.prototype.model=function(e){e.vertices.length>0&&(this._renderer.geometryInHash(e.gid)||this._renderer.createBuffers(e.gid,e),this._renderer.drawBuffers(e.gid))},t.exports=a},{"../core/core":37,"./p5.Geometry":82}],81:[function(e,t,r){var n=e("../core/core");n.prototype.normalMaterial=function(){return this._renderer._getShader("normalVert","normalFrag"),this},n.prototype.texture=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var r=this._renderer.GL,a=this._renderer._getShader("lightVert","lightTextureFrag");r.useProgram(a);var o;if(e[0].isTexture)e[0]instanceof n.Graphics||"undefined"!=typeof n.MediaElement&&e[0]instanceof n.MediaElement?o=e[0].elt:e[0]instanceof n.Image&&(o=e[0].canvas),this._renderer._bind.call(this,e[0].tex,o);else{if(e[0]instanceof n.Image)o=e[0].canvas;else if("undefined"!=typeof n.MediaElement&&e[0]instanceof n.MediaElement){if(!e[0].loadedmetadata)return;o=e[0].elt}else e[0]instanceof n.Graphics&&(o=e[0].elt);var i=r.createTexture();e[0]._setProperty("tex",i),e[0]._setProperty("isTexture",!0),this._renderer._bind.call(this,i,o)}return r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,e[0].tex),r.uniform1i(r.getUniformLocation(a,"isTexture"),!0),r.uniform1i(r.getUniformLocation(a,"uSampler"),0),this},n.RendererGL.prototype._bind=function(e,t){var r=this._renderer.GL;r.bindTexture(r.TEXTURE_2D,e),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,t),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.bindTexture(r.TEXTURE_2D,null)},n.prototype.ambientMaterial=function(e,t,r,n){var a=this._renderer.GL,o=this._renderer._getShader("lightVert","lightTextureFrag");a.useProgram(o),o.uMaterialColor=a.getUniformLocation(o,"uMaterialColor");var i=this._renderer._applyColorBlend.apply(this._renderer,arguments);return a.uniform4f(o.uMaterialColor,i[0],i[1],i[2],i[3]),o.uSpecular=a.getUniformLocation(o,"uSpecular"),a.uniform1i(o.uSpecular,!1),a.uniform1i(a.getUniformLocation(o,"isTexture"),!1),this},n.prototype.specularMaterial=function(e,t,r,n){var a=this._renderer.GL,o=this._renderer._getShader("lightVert","lightTextureFrag");a.useProgram(o),a.uniform1i(a.getUniformLocation(o,"isTexture"),!1),o.uMaterialColor=a.getUniformLocation(o,"uMaterialColor");var i=this._renderer._applyColorBlend.apply(this._renderer,arguments);return a.uniform4f(o.uMaterialColor,i[0],i[1],i[2],i[3]),o.uSpecular=a.getUniformLocation(o,"uSpecular"),a.uniform1i(o.uSpecular,!0),this},n.RendererGL.prototype._applyColorBlend=function(e,t,r,n){var a=this.GL,o=this._pInst.color.apply(this._pInst,arguments),i=o._array;return i[i.length-1]<1?(a.depthMask(!1),a.enable(a.BLEND),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA)):(a.depthMask(!0),a.disable(a.BLEND)),i},t.exports=n},{"../core/core":37}],82:[function(e,t,r){var n=e("../core/core");n.Geometry=function(e,t,r){return this.vertices=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.detailX=void 0!==e?e:1,this.detailY=void 0!==t?t:1,r instanceof Function&&r.call(this),this},n.Geometry.prototype.computeFaces=function(){for(var e,t,r,n,a=this.detailX+1,o=0;o<this.detailY;o++)for(var i=0;i<this.detailX;i++)e=o*a+i,t=o*a+i+1,r=(o+1)*a+i+1,n=(o+1)*a+i,this.faces.push([e,t,n]),this.faces.push([n,t,r]);return this},n.Geometry.prototype._getFaceNormal=function(e,t){var r=this.faces[e],a=this.vertices[r[t%3]],o=this.vertices[r[(t+1)%3]],i=this.vertices[r[(t+2)%3]],s=n.Vector.cross(n.Vector.sub(o,a),n.Vector.sub(i,a)),l=n.Vector.mag(s)/(n.Vector.mag(n.Vector.sub(o,a))*n.Vector.mag(n.Vector.sub(i,a)));return s=s.normalize(),s.mult(Math.asin(l))},n.Geometry.prototype.computeNormals=function(){for(var e=0;e<this.vertices.length;e++){for(var t=new n.Vector,r=0;r<this.faces.length;r++)this.faces[r][0]!==e&&this.faces[r][1]!==e&&this.faces[r][2]!==e||(t=t.add(this._getFaceNormal(r,e)));t=t.normalize(),this.vertexNormals.push(t)}return this},n.Geometry.prototype.averageNormals=function(){for(var e=0;e<=this.detailY;e++){var t=this.detailX+1,r=n.Vector.add(this.vertexNormals[e*t],this.vertexNormals[e*t+this.detailX]);r=n.Vector.div(r,2),this.vertexNormals[e*t]=r,this.vertexNormals[e*t+this.detailX]=r}return this},n.Geometry.prototype.averagePoleNormals=function(){for(var e=new n.Vector(0,0,0),t=0;t<this.detailX;t++)e.add(this.vertexNormals[t]);for(e=n.Vector.div(e,this.detailX),t=0;t<this.detailX;t++)this.vertexNormals[t]=e;for(e=new n.Vector(0,0,0),t=this.vertices.length-1;t>this.vertices.length-1-this.detailX;t--)e.add(this.vertexNormals[t]);for(e=n.Vector.div(e,this.detailX),t=this.vertices.length-1;t>this.vertices.length-1-this.detailX;t--)this.vertexNormals[t]=e;return this},n.Geometry.prototype.normalize=function(){if(this.vertices.length>0){for(var e=this.vertices[0].copy(),t=this.vertices[0].copy(),r=0;r<this.vertices.length;r++)e.x=Math.max(e.x,this.vertices[r].x),t.x=Math.min(t.x,this.vertices[r].x),e.y=Math.max(e.y,this.vertices[r].y),t.y=Math.min(t.y,this.vertices[r].y),e.z=Math.max(e.z,this.vertices[r].z),t.z=Math.min(t.z,this.vertices[r].z);var a=n.Vector.lerp(e,t,.5),o=n.Vector.sub(e,t),i=Math.max(Math.max(o.x,o.y),o.z),s=200/i;for(r=0;r<this.vertices.length;r++)this.vertices[r].sub(a),this.vertices[r].mult(s)}return this},t.exports=n.Geometry},{"../core/core":37}],83:[function(e,t,r){var n=e("../core/core"),a=e("../math/polargeometry"),o=e("../core/constants"),i="undefined"!=typeof Float32Array?Float32Array:Array;n.Matrix=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];return e[0]instanceof n?(this.p5=e[0],"mat3"===e[1]?this.mat3=e[2]||new i([1,0,0,0,1,0,0,0,1]):this.mat4=e[1]||new i([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])):"mat3"===e[0]?this.mat3=e[1]||new i([1,0,0,0,1,0,0,0,1]):this.mat4=e[0]||new i([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},n.Matrix.prototype.set=function(e){return e instanceof n.Matrix?(this.mat4=e.mat4,this):e instanceof i?(this.mat4=e,this):this},n.Matrix.prototype.get=function(){return new n.Matrix(this.mat4)},n.Matrix.prototype.copy=function(){var e=new n.Matrix;return e.mat4[0]=this.mat4[0],e.mat4[1]=this.mat4[1],e.mat4[2]=this.mat4[2],e.mat4[3]=this.mat4[3],e.mat4[4]=this.mat4[4],e.mat4[5]=this.mat4[5],e.mat4[6]=this.mat4[6],e.mat4[7]=this.mat4[7],e.mat4[8]=this.mat4[8],e.mat4[9]=this.mat4[9],e.mat4[10]=this.mat4[10],e.mat4[11]=this.mat4[11],e.mat4[12]=this.mat4[12],e.mat4[13]=this.mat4[13],e.mat4[14]=this.mat4[14],e.mat4[15]=this.mat4[15],e},n.Matrix.identity=function(){return new n.Matrix},n.Matrix.prototype.transpose=function(e){var t,r,a,o,s,l;return e instanceof n.Matrix?(t=e.mat4[1],r=e.mat4[2],a=e.mat4[3],o=e.mat4[6],s=e.mat4[7],l=e.mat4[11],this.mat4[0]=e.mat4[0],this.mat4[1]=e.mat4[4],this.mat4[2]=e.mat4[8],this.mat4[3]=e.mat4[12],this.mat4[4]=t,this.mat4[5]=e.mat4[5],this.mat4[6]=e.mat4[9],this.mat4[7]=e.mat4[13],this.mat4[8]=r,this.mat4[9]=o,this.mat4[10]=e.mat4[10],this.mat4[11]=e.mat4[14],this.mat4[12]=a,this.mat4[13]=s,this.mat4[14]=l,this.mat4[15]=e.mat4[15]):e instanceof i&&(t=e[1],r=e[2],a=e[3],o=e[6],s=e[7],l=e[11],this.mat4[0]=e[0],this.mat4[1]=e[4],this.mat4[2]=e[8],this.mat4[3]=e[12],this.mat4[4]=t,this.mat4[5]=e[5],this.mat4[6]=e[9],this.mat4[7]=e[13],this.mat4[8]=r,this.mat4[9]=o,this.mat4[10]=e[10],this.mat4[11]=e[14],this.mat4[12]=a,this.mat4[13]=s,this.mat4[14]=l,this.mat4[15]=e[15]),this},n.Matrix.prototype.invert=function(e){var t,r,a,o,s,l,u,c,p,h,d,f,m,g,y,v;e instanceof n.Matrix?(t=e.mat4[0],r=e.mat4[1],a=e.mat4[2],o=e.mat4[3],s=e.mat4[4],l=e.mat4[5],u=e.mat4[6],c=e.mat4[7],p=e.mat4[8],h=e.mat4[9],d=e.mat4[10],f=e.mat4[11],m=e.mat4[12],g=e.mat4[13],y=e.mat4[14],v=e.mat4[15]):e instanceof i&&(t=e[0],r=e[1],a=e[2],o=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],d=e[10],f=e[11],m=e[12],g=e[13],y=e[14],v=e[15]);var w=t*l-r*s,x=t*u-a*s,b=t*c-o*s,_=r*u-a*l,S=r*c-o*l,C=a*c-o*u,T=p*g-h*m,E=p*y-d*m,R=p*v-f*m,k=h*y-d*g,M=h*v-f*g,A=d*v-f*y,I=w*A-x*M+b*k+_*R-S*E+C*T;return I?(I=1/I,this.mat4[0]=(l*A-u*M+c*k)*I,this.mat4[1]=(a*M-r*A-o*k)*I,this.mat4[2]=(g*C-y*S+v*_)*I,this.mat4[3]=(d*S-h*C-f*_)*I,this.mat4[4]=(u*R-s*A-c*E)*I,this.mat4[5]=(t*A-a*R+o*E)*I,this.mat4[6]=(y*b-m*C-v*x)*I,this.mat4[7]=(p*C-d*b+f*x)*I,this.mat4[8]=(s*M-l*R+c*T)*I,this.mat4[9]=(r*R-t*M-o*T)*I,this.mat4[10]=(m*S-g*b+v*w)*I,this.mat4[11]=(h*b-p*S-f*w)*I,this.mat4[12]=(l*E-s*k-u*T)*I,this.mat4[13]=(t*k-r*E+a*T)*I,this.mat4[14]=(g*x-m*_-y*w)*I,this.mat4[15]=(p*_-h*x+d*w)*I,this):null},n.Matrix.prototype.invert3x3=function(){var e=this.mat3[0],t=this.mat3[1],r=this.mat3[2],n=this.mat3[3],a=this.mat3[4],o=this.mat3[5],i=this.mat3[6],s=this.mat3[7],l=this.mat3[8],u=l*a-o*s,c=-l*n+o*i,p=s*n-a*i,h=e*u+t*c+r*p;return h?(h=1/h,this.mat3[0]=u*h,this.mat3[1]=(-l*t+r*s)*h,this.mat3[2]=(o*t-r*a)*h,this.mat3[3]=c*h,this.mat3[4]=(l*e-r*i)*h,this.mat3[5]=(-o*e+r*n)*h,this.mat3[6]=p*h,this.mat3[7]=(-s*e+t*i)*h,this.mat3[8]=(a*e-t*n)*h,this):null},n.Matrix.prototype.transpose3x3=function(e){var t=e[1],r=e[2],n=e[5];return this.mat3[1]=e[3],this.mat3[2]=e[6],this.mat3[3]=t,this.mat3[5]=e[7],this.mat3[6]=r,this.mat3[7]=n,this},n.Matrix.prototype.inverseTranspose=function(e){return void 0===this.mat3?console.error("sorry, this function only works with mat3"):(this.mat3[0]=e.mat4[0],this.mat3[1]=e.mat4[1],this.mat3[2]=e.mat4[2],this.mat3[3]=e.mat4[4],this.mat3[4]=e.mat4[5],this.mat3[5]=e.mat4[6],this.mat3[6]=e.mat4[8],this.mat3[7]=e.mat4[9],this.mat3[8]=e.mat4[10]),this.invert3x3().transpose3x3(this.mat3),this},n.Matrix.prototype.determinant=function(){var e=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],t=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],r=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],n=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],a=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],o=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],i=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],s=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],l=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],u=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],c=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13],p=this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14];return e*p-t*c+r*u+n*l-a*s+o*i},n.Matrix.prototype.mult=function(e){var t=new i(16),r=new i(16);e instanceof n.Matrix?r=e.mat4:e instanceof i&&(r=e);var a=this.mat4[0],o=this.mat4[1],s=this.mat4[2],l=this.mat4[3];return t[0]=a*r[0]+o*r[4]+s*r[8]+l*r[12],t[1]=a*r[1]+o*r[5]+s*r[9]+l*r[13],t[2]=a*r[2]+o*r[6]+s*r[10]+l*r[14],t[3]=a*r[3]+o*r[7]+s*r[11]+l*r[15],a=this.mat4[4],o=this.mat4[5],s=this.mat4[6],l=this.mat4[7],t[4]=a*r[0]+o*r[4]+s*r[8]+l*r[12],t[5]=a*r[1]+o*r[5]+s*r[9]+l*r[13],t[6]=a*r[2]+o*r[6]+s*r[10]+l*r[14],t[7]=a*r[3]+o*r[7]+s*r[11]+l*r[15],a=this.mat4[8],
o=this.mat4[9],s=this.mat4[10],l=this.mat4[11],t[8]=a*r[0]+o*r[4]+s*r[8]+l*r[12],t[9]=a*r[1]+o*r[5]+s*r[9]+l*r[13],t[10]=a*r[2]+o*r[6]+s*r[10]+l*r[14],t[11]=a*r[3]+o*r[7]+s*r[11]+l*r[15],a=this.mat4[12],o=this.mat4[13],s=this.mat4[14],l=this.mat4[15],t[12]=a*r[0]+o*r[4]+s*r[8]+l*r[12],t[13]=a*r[1]+o*r[5]+s*r[9]+l*r[13],t[14]=a*r[2]+o*r[6]+s*r[10]+l*r[14],t[15]=a*r[3]+o*r[7]+s*r[11]+l*r[15],this.mat4=t,this},n.Matrix.prototype.scale=function(){for(var e,t,r,a=new Array(arguments.length),o=0;o<a.length;++o)a[o]=arguments[o];a[0]instanceof n.Vector?(e=a[0].x,t=a[0].y,r=a[0].z):a[0]instanceof Array&&(e=a[0][0],t=a[0][1],r=a[0][2]);var s=new i(16);return s[0]=this.mat4[0]*e,s[1]=this.mat4[1]*e,s[2]=this.mat4[2]*e,s[3]=this.mat4[3]*e,s[4]=this.mat4[4]*t,s[5]=this.mat4[5]*t,s[6]=this.mat4[6]*t,s[7]=this.mat4[7]*t,s[8]=this.mat4[8]*r,s[9]=this.mat4[9]*r,s[10]=this.mat4[10]*r,s[11]=this.mat4[11]*r,s[12]=this.mat4[12],s[13]=this.mat4[13],s[14]=this.mat4[14],s[15]=this.mat4[15],this.mat4=s,this},n.Matrix.prototype.rotate=function(e,t){var r,i,s,l,u;this.p5?this.p5._angleMode===o.DEGREES&&(l=a.degreesToRadians(e)):l=e,t instanceof n.Vector?(r=t.x,i=t.y,s=t.z):t instanceof Array&&(r=t[0],i=t[1],s=t[2]),u=Math.sqrt(r*r+i*i+s*s),r*=1/u,i*=1/u,s*=1/u;var c=this.mat4[0],p=this.mat4[1],h=this.mat4[2],d=this.mat4[3],f=this.mat4[4],m=this.mat4[5],g=this.mat4[6],y=this.mat4[7],v=this.mat4[8],w=this.mat4[9],x=this.mat4[10],b=this.mat4[11],_=Math.sin(l),S=Math.cos(l),C=1-S,T=r*r*C+S,E=i*r*C+s*_,R=s*r*C-i*_,k=r*i*C-s*_,M=i*i*C+S,A=s*i*C+r*_,I=r*s*C+i*_,P=i*s*C-r*_,N=s*s*C+S;return this.mat4[0]=c*T+f*E+v*R,this.mat4[1]=p*T+m*E+w*R,this.mat4[2]=h*T+g*E+x*R,this.mat4[3]=d*T+y*E+b*R,this.mat4[4]=c*k+f*M+v*A,this.mat4[5]=p*k+m*M+w*A,this.mat4[6]=h*k+g*M+x*A,this.mat4[7]=d*k+y*M+b*A,this.mat4[8]=c*I+f*P+v*N,this.mat4[9]=p*I+m*P+w*N,this.mat4[10]=h*I+g*P+x*N,this.mat4[11]=d*I+y*P+b*N,this},n.Matrix.prototype.translate=function(e){var t=e[0],r=e[1],n=e[2]||0;this.mat4[12]=this.mat4[0]*t+this.mat4[4]*r+this.mat4[8]*n+this.mat4[12],this.mat4[13]=this.mat4[1]*t+this.mat4[5]*r+this.mat4[9]*n+this.mat4[13],this.mat4[14]=this.mat4[2]*t+this.mat4[6]*r+this.mat4[10]*n+this.mat4[14],this.mat4[15]=this.mat4[3]*t+this.mat4[7]*r+this.mat4[11]*n+this.mat4[15]},n.Matrix.prototype.rotateX=function(e){this.rotate(e,[1,0,0])},n.Matrix.prototype.rotateY=function(e){this.rotate(e,[0,1,0])},n.Matrix.prototype.rotateZ=function(e){this.rotate(e,[0,0,1])},n.Matrix.prototype.perspective=function(e,t,r,n){var a=1/Math.tan(e/2),o=1/(r-n);return this.mat4[0]=a/t,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=a,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(n+r)*o,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*n*r*o,this.mat4[15]=0,this},n.Matrix.prototype.ortho=function(e,t,r,n,a,o){var i=1/(e-t),s=1/(r-n),l=1/(a-o);return this.mat4[0]=-2*i,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*s,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*l,this.mat4[11]=0,this.mat4[12]=(e+t)*i,this.mat4[13]=(n+r)*s,this.mat4[14]=(o+a)*l,this.mat4[15]=1,this},t.exports=n.Matrix},{"../core/constants":36,"../core/core":37,"../math/polargeometry":67}],84:[function(e,t,r){var n=e("../core/core"),a=e("../core/constants");n.RendererGL.prototype.beginShape=function(e){return this.immediateMode.shapeMode=void 0!==e?e:a.LINE_STRIP,void 0===this.immediateMode.vertexPositions?(this.immediateMode.vertexPositions=[],this.immediateMode.vertexColors=[],this.immediateMode.vertexBuffer=this.GL.createBuffer(),this.immediateMode.colorBuffer=this.GL.createBuffer()):(this.immediateMode.vertexPositions.length=0,this.immediateMode.vertexColors.length=0),this.isImmediateDrawing=!0,this},n.RendererGL.prototype.vertex=function(e,t,r){this.immediateMode.vertexPositions.push(e,t,r);var n=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.vertexColors.push(n[0],n[1],n[2],n[3]),this},n.RendererGL.prototype.endShape=function(e,t,r,n,o,i){var s=this.GL;if(this._bindImmediateBuffers(this.immediateMode.vertexPositions,this.immediateMode.vertexColors),e)if("fill"===this.drawMode)switch(this.immediateMode.shapeMode){case a.LINE_STRIP:this.immediateMode.shapeMode=a.TRIANGLE_FAN;break;case a.LINES:this.immediateMode.shapeMode=a.TRIANGLE_FAN;break;case a.TRIANGLES:this.immediateMode.shapeMode=a.TRIANGLE_FAN}else switch(this.immediateMode.shapeMode){case a.LINE_STRIP:this.immediateMode.shapeMode=a.LINE_LOOP;break;case a.LINES:this.immediateMode.shapeMode=a.LINE_LOOP}if(this.immediateMode.shapeMode===a.QUADS||this.immediateMode.shapeMode===a.QUAD_STRIP)throw new Error("sorry, "+this.immediateMode.shapeMode+" not yet implemented in webgl mode.");return s.enable(s.BLEND),s.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.vertexPositions.length/3),this.immediateMode.vertexPositions.length=0,this.immediateMode.vertexColors.length=0,this.isImmediateDrawing=!1,this},n.RendererGL.prototype._bindImmediateBuffers=function(e,t){this._setDefaultCamera();var r=this.GL,n=this._getCurShaderId(),a=this.mHash[n];return a.vertexPositionAttribute=r.getAttribLocation(a,"aPosition"),r.enableVertexAttribArray(a.vertexPositionAttribute),r.bindBuffer(r.ARRAY_BUFFER,this.immediateMode.vertexBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(e),r.DYNAMIC_DRAW),r.vertexAttribPointer(a.vertexPositionAttribute,3,r.FLOAT,!1,0,0),a.vertexColorAttribute=r.getAttribLocation(a,"aVertexColor"),r.enableVertexAttribArray(a.vertexColorAttribute),r.bindBuffer(r.ARRAY_BUFFER,this.immediateMode.colorBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.DYNAMIC_DRAW),r.vertexAttribPointer(a.vertexColorAttribute,4,r.FLOAT,!1,0,0),this._setMatrixUniforms(n),this},n.RendererGL.prototype._getColorVertexShader=function(){var e,t=this.GL,r="immediateVert|vertexColorFrag";return this.materialInHash(r)?e=this.mHash[r]:(e=this._initShaders("immediateVert","vertexColorFrag",!0),this.mHash[r]=e,e.vertexColorAttribute=t.getAttribLocation(e,"aVertexColor"),t.enableVertexAttribArray(e.vertexColorAttribute)),e},t.exports=n.RendererGL},{"../core/constants":36,"../core/core":37}],85:[function(e,t,r){function n(e){return e.length>0?e.reduce(function(e,t){return e.concat(t)}):[]}function a(e){return n(e.map(function(e){return[e.x,e.y,e.z]}))}var o=e("../core/core"),i=0;o.RendererGL.prototype._initBufferDefaults=function(e){if(i++,i>1e3){var t=Object.keys(this.gHash)[0];delete this.gHash[t],i--}var r=this.GL;this.gHash[e]={},this.gHash[e].vertexBuffer=r.createBuffer(),this.gHash[e].normalBuffer=r.createBuffer(),this.gHash[e].uvBuffer=r.createBuffer(),this.gHash[e].indexBuffer=r.createBuffer()},o.RendererGL.prototype.createBuffers=function(e,t){var r=this.GL;this._setDefaultCamera(),this._initBufferDefaults(e);var o=this.mHash[this._getCurShaderId()];this.gHash[e].numberOfItems=3*t.faces.length,r.bindBuffer(r.ARRAY_BUFFER,this.gHash[e].vertexBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(a(t.vertices)),r.STATIC_DRAW),o.vertexPositionAttribute=r.getAttribLocation(o,"aPosition"),r.enableVertexAttribArray(o.vertexPositionAttribute),r.vertexAttribPointer(o.vertexPositionAttribute,3,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.gHash[e].normalBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(a(t.vertexNormals)),r.STATIC_DRAW),o.vertexNormalAttribute=r.getAttribLocation(o,"aNormal"),r.enableVertexAttribArray(o.vertexNormalAttribute),r.vertexAttribPointer(o.vertexNormalAttribute,3,r.FLOAT,!1,0,0),r.bindBuffer(r.ARRAY_BUFFER,this.gHash[e].uvBuffer),r.bufferData(r.ARRAY_BUFFER,new Float32Array(n(t.uvs)),r.STATIC_DRAW),o.textureCoordAttribute=r.getAttribLocation(o,"aTexCoord"),r.enableVertexAttribArray(o.textureCoordAttribute),r.vertexAttribPointer(o.textureCoordAttribute,2,r.FLOAT,!1,0,0),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,this.gHash[e].indexBuffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(n(t.faces)),r.STATIC_DRAW)},o.RendererGL.prototype.drawBuffers=function(e){this._setDefaultCamera();var t=this.GL,r=this._getCurShaderId(),n=this.mHash[r];return t.bindBuffer(t.ARRAY_BUFFER,this.gHash[e].vertexBuffer),t.vertexAttribPointer(n.vertexPositionAttribute,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this.gHash[e].normalBuffer),t.vertexAttribPointer(n.vertexNormalAttribute,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,this.gHash[e].uvBuffer),t.vertexAttribPointer(n.textureCoordAttribute,2,t.FLOAT,!1,0,0),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.gHash[e].indexBuffer),this._setMatrixUniforms(r),t.drawElements(t.TRIANGLES,this.gHash[e].numberOfItems,t.UNSIGNED_SHORT,0),this},t.exports=o.RendererGL},{"../core/core":37}],86:[function(e,t,r){var n=e("../core/core"),a=e("./shader");e("../core/p5.Renderer"),e("./p5.Matrix");var o=[],i=1e3,s={alpha:!0,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};n.RendererGL=function(e,t,r){return n.Renderer.call(this,e,t,r),this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0,this._isSetCamera=!1,this.uMVMatrix=new n.Matrix,this.uPMatrix=new n.Matrix,this.uNMatrix=new n.Matrix("mat3"),this.gHash={},this.mHash={},this.isImmediateDrawing=!1,this.immediateMode={},this.curFillColor=[.5,.5,.5,1],this.curStrokeColor=[.5,.5,.5,1],this.pointSize=5,this},n.RendererGL.prototype=Object.create(n.Renderer.prototype),n.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",s)||this.canvas.getContext("experimental-webgl",s),null===this.drawingContext)throw new Error("Error creating webgl context");console.log("p5.RendererGL: enabled webgl context");var e=this.drawingContext;e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight)}catch(t){throw new Error(t)}},n.RendererGL.prototype._setDefaultCamera=function(){if(!this._isSetCamera){var e=this.width,t=this.height;this.uPMatrix=n.Matrix.identity(),this.uPMatrix.perspective(60/180*Math.PI,e/t,.1,100),this._isSetCamera=!0}},n.RendererGL.prototype._update=function(){this.uMVMatrix=n.Matrix.identity(),this.translate(0,0,-800),this.ambientLightCount=0,this.directionalLightCount=0,this.pointLightCount=0},n.RendererGL.prototype.background=function(){var e=this.GL,t=this._pInst.color.apply(this._pInst,arguments),r=t.levels[0]/255,n=t.levels[1]/255,a=t.levels[2]/255,o=t.levels[3]/255;e.clearColor(r,n,a,o),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)},n.RendererGL.prototype._initShaders=function(e,t,r){var n=this.GL,o=n.createShader(n.VERTEX_SHADER);if(n.shaderSource(o,a[e]),n.compileShader(o),!n.getShaderParameter(o,n.COMPILE_STATUS))return alert("Yikes! An error occurred compiling the shaders:"+n.getShaderInfoLog(o)),null;var i=n.createShader(n.FRAGMENT_SHADER);if(n.shaderSource(i,a[t]),n.compileShader(i),!n.getShaderParameter(i,n.COMPILE_STATUS))return alert("Darn! An error occurred compiling the shaders:"+n.getShaderInfoLog(i)),null;var s=n.createProgram();return n.attachShader(s,o),n.attachShader(s,i),n.linkProgram(s),n.getProgramParameter(s,n.LINK_STATUS)||alert("Snap! Error linking shader program"),this._getLocation(s,r),s},n.RendererGL.prototype._getLocation=function(e,t){var r=this.GL;r.useProgram(e),e.uResolution=r.getUniformLocation(e,"uResolution"),r.uniform1f(e.uResolution,i),e.uPMatrixUniform=r.getUniformLocation(e,"uProjectionMatrix"),e.uMVMatrixUniform=r.getUniformLocation(e,"uModelViewMatrix"),void 0===t&&(e.uNMatrixUniform=r.getUniformLocation(e,"uNormalMatrix"),e.samplerUniform=r.getUniformLocation(e,"uSampler"))},n.RendererGL.prototype._setUniform1f=function(e,t,r){var n=this.GL,a=this.mHash[e];return n.useProgram(a),a[t]=n.getUniformLocation(a,t),n.uniform1f(a[t],r),this},n.RendererGL.prototype._setMatrixUniforms=function(e){var t=this.GL,r=this.mHash[e];t.useProgram(r),t.uniformMatrix4fv(r.uPMatrixUniform,!1,this.uPMatrix.mat4),t.uniformMatrix4fv(r.uMVMatrixUniform,!1,this.uMVMatrix.mat4),this.uNMatrix.inverseTranspose(this.uMVMatrix),t.uniformMatrix3fv(r.uNMatrixUniform,!1,this.uNMatrix.mat3)},n.RendererGL.prototype._getShader=function(e,t,r){var n=e+"|"+t;if(!this.materialInHash(n)){var a=this._initShaders(e,t,r);this.mHash[n]=a}return this.curShaderId=n,this.mHash[this.curShaderId]},n.RendererGL.prototype._getCurShaderId=function(){var e,t;return"fill"!==this.drawMode&&void 0===this.curShaderId?(e="normalVert|normalFrag",t=this._initShaders("normalVert","normalFrag"),this.mHash[e]=t,this.curShaderId=e):this.isImmediateDrawing&&"fill"===this.drawMode&&(e="immediateVert|vertexColorFrag",t=this._initShaders("immediateVert","vertexColorFrag"),this.mHash[e]=t,this.curShaderId=e),this.curShaderId},n.RendererGL.prototype.fill=function(e,t,r,n){var a,o=this.GL,i=this._renderer._applyColorBlend.apply(this._renderer,arguments);return this.curFillColor=i,this.drawMode="fill",this.isImmediateDrawing?(a=this._getShader("immediateVert","vertexColorFrag"),o.useProgram(a)):(a=this._getShader("normalVert","basicFrag"),o.useProgram(a),a.uMaterialColor=o.getUniformLocation(a,"uMaterialColor"),o.uniform4f(a.uMaterialColor,i[0],i[1],i[2],i[3])),this},n.RendererGL.prototype.stroke=function(e,t,r,n){var a=this._pInst.color.apply(this._pInst,arguments),o=a._array;return this.curStrokeColor=o,this.drawMode="stroke",this},n.RendererGL.prototype._strokeCheck=function(){if("stroke"===this.drawMode)throw new Error("stroke for shapes in 3D not yet implemented, use fill for now :(")},n.RendererGL.prototype.strokeWeight=function(e){return this.pointSize=e,this},n.RendererGL.prototype.geometryInHash=function(e){return void 0!==this.gHash[e]},n.RendererGL.prototype.materialInHash=function(e){return void 0!==this.mHash[e]},n.RendererGL.prototype.resize=function(e,t){var r=this.GL;n.Renderer.prototype.resize.call(this,e,t),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight)},n.RendererGL.prototype.clear=function(){var e=this.GL;e.clearColor(arguments[0],arguments[1],arguments[2],arguments[3]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)},n.RendererGL.prototype.translate=function(e,t,r){return e/=i,t=-t/i,r/=i,this.uMVMatrix.translate([e,t,r]),this},n.RendererGL.prototype.scale=function(e,t,r){return this.uMVMatrix.scale([e,t,r]),this},n.RendererGL.prototype.rotate=function(e,t){return this.uMVMatrix.rotate(e,t),this},n.RendererGL.prototype.rotateX=function(e){return this.rotate(e,[1,0,0]),this},n.RendererGL.prototype.rotateY=function(e){return this.rotate(e,[0,1,0]),this},n.RendererGL.prototype.rotateZ=function(e){return this.rotate(e,[0,0,1]),this},n.RendererGL.prototype.push=function(){o.push(this.uMVMatrix.copy())},n.RendererGL.prototype.pop=function(){if(0===o.length)throw new Error("Invalid popMatrix!");this.uMVMatrix=o.pop()},n.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=n.Matrix.identity(),this.translate(0,0,-800),this},n.RendererGL.prototype._applyTextProperties=function(){console.error("text commands not yet implemented in webgl")},t.exports=n.RendererGL},{"../core/core":37,"../core/p5.Renderer":43,"./p5.Matrix":83,"./shader":88}],87:[function(e,t,r){var n=e("../core/core");e("./p5.Geometry"),n.prototype.plane=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var r=e[0]||50,a=e[1]||r,o="number"==typeof e[2]?e[2]:1,i="number"==typeof e[3]?e[3]:1,s="plane|"+r+"|"+a+"|"+o+"|"+i;if(!this._renderer.geometryInHash(s)){var l=function(){for(var e,t,o,i=0;i<=this.detailY;i++){t=i/this.detailY;for(var s=0;s<=this.detailX;s++)e=s/this.detailX,o=new n.Vector(r*e-r/2,a*t-a/2,0),this.vertices.push(o),this.uvs.push([e,t])}},u=new n.Geometry(o,i,l);u.computeFaces().computeNormals(),this._renderer.createBuffers(s,u)}this._renderer.drawBuffers(s)},n.prototype.box=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var r=e[0]||50,a=e[1]||r,o=e[2]||r,i="number"==typeof e[3]?e[3]:4,s="number"==typeof e[4]?e[4]:4,l="box|"+r+"|"+a+"|"+o+"|"+i+"|"+s;if(!this._renderer.geometryInHash(l)){var u=function(){for(var e=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]],t=0,i=0;i<e.length;i++){for(var s=e[i],l=4*i,u=0;u<4;u++){var c=s[u],p=new n.Vector((2*(1&c)-1)*r/2,((2&c)-1)*a/2,((4&c)/2-1)*o/2);this.vertices.push(p),this.uvs.push([1&u,(2&u)/2]),t++}this.faces.push([l,l+1,l+2]),this.faces.push([l+2,l+1,l+3])}},c=new n.Geometry(i,s,u);c.computeNormals(),this._renderer.createBuffers(l,c)}return this._renderer.drawBuffers(l),this},n.prototype.sphere=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var r=e[0]||50,a="number"==typeof e[1]?e[1]:24,o="number"==typeof e[2]?e[2]:16,i="sphere|"+r+"|"+a+"|"+o;if(!this._renderer.geometryInHash(i)){var s=function(){for(var e,t,a,o=0;o<=this.detailY;o++){t=o/this.detailY;for(var i=0;i<=this.detailX;i++){e=i/this.detailX;var s=2*Math.PI*e,l=Math.PI*t-Math.PI/2;a=new n.Vector(r*Math.cos(l)*Math.sin(s),r*Math.sin(l),r*Math.cos(l)*Math.cos(s)),this.vertices.push(a),this.uvs.push([e,t])}}},l=new n.Geometry(a,o,s);l.computeFaces().computeNormals().averageNormals().averagePoleNormals(),this._renderer.createBuffers(i,l)}return this._renderer.drawBuffers(i),this};var a=function(e,t,r,a,o,i,s){a=a<3?3:a,o=o<1?1:o,i=void 0===i||i,s=void 0===s||s;var l,u,c=(i?2:0)+(s?2:0),p=a+1,h=Math.atan2(e-t,r),d=i?-2:0,f=o+(s?2:0);for(l=d;l<=f;++l){var m,g=l/o,y=r*g;for(l<0?(y=0,g=1,m=e):l>o?(y=r,g=1,m=t):m=e+(t-e)*(l/o),l!==-2&&l!==o+2||(m=0,g=0),y-=r/2,u=0;u<p;++u)this.vertices.push(new n.Vector(Math.sin(u*Math.PI*2/a)*m,y,Math.cos(u*Math.PI*2/a)*m)),this.vertexNormals.push(new n.Vector(l<0||l>o?0:Math.sin(u*Math.PI*2/a)*Math.cos(h),l<0?-1:l>o?1:Math.sin(h),l<0||l>o?0:Math.cos(u*Math.PI*2/a)*Math.cos(h))),this.uvs.push([u/a,g])}for(l=0;l<o+c;++l)for(u=0;u<a;++u)this.faces.push([p*(l+0)+0+u,p*(l+0)+1+u,p*(l+1)+1+u]),this.faces.push([p*(l+0)+0+u,p*(l+1)+1+u,p*(l+1)+0+u])};n.prototype.cylinder=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var r=e[0]||50,o=e[1]||r,i="number"==typeof e[2]?e[2]:24,s="number"==typeof e[3]?e[3]:16,l="cylinder|"+r+"|"+o+"|"+i+"|"+s;if(!this._renderer.geometryInHash(l)){var u=new n.Geometry(i,s);a.call(u,r,r,o,i,s,!0,!0),u.computeNormals(),this._renderer.createBuffers(l,u)}return this._renderer.drawBuffers(l),this},n.prototype.cone=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var r=e[0]||50,o=e[1]||r,i="number"==typeof e[2]?e[2]:24,s="number"==typeof e[3]?e[3]:16,l="cone|"+r+"|"+o+"|"+i+"|"+s;if(!this._renderer.geometryInHash(l)){var u=new n.Geometry(i,s);a.call(u,r,0,o,i,s,!0,!0),u.computeNormals(),this._renderer.createBuffers(l,u)}return this._renderer.drawBuffers(l),this},n.prototype.ellipsoid=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var r="number"==typeof e[3]?e[3]:24,a="number"==typeof e[4]?e[4]:24,o=e[0]||50,i=e[1]||o,s=e[2]||o,l="ellipsoid|"+o+"|"+i+"|"+s+"|"+r+"|"+a;if(!this._renderer.geometryInHash(l)){var u=function(){for(var e,t,r,a=0;a<=this.detailY;a++){t=a/this.detailY;for(var l=0;l<=this.detailX;l++){e=l/this.detailX;var u=2*Math.PI*e,c=Math.PI*t-Math.PI/2;r=new n.Vector(o*Math.cos(c)*Math.sin(u),i*Math.sin(c),s*Math.cos(c)*Math.cos(u)),this.vertices.push(r),this.uvs.push([e,t])}}},c=new n.Geometry(r,a,u);c.computeFaces().computeNormals(),this._renderer.createBuffers(l,c)}return this._renderer.drawBuffers(l),this},n.prototype.torus=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var r="number"==typeof e[2]?e[2]:24,a="number"==typeof e[3]?e[3]:16,o=e[0]||50,i=e[1]||10,s="torus|"+o+"|"+i+"|"+r+"|"+a;if(!this._renderer.geometryInHash(s)){var l=function(){for(var e,t,r,a=0;a<=this.detailY;a++){t=a/this.detailY;for(var s=0;s<=this.detailX;s++){e=s/this.detailX;var l=2*Math.PI*e,u=2*Math.PI*t;r=new n.Vector((o+i*Math.cos(u))*Math.cos(l),(o+i*Math.cos(u))*Math.sin(l),i*Math.sin(u)),this.vertices.push(r),this.uvs.push([e,t])}}},u=new n.Geometry(r,a,l);u.computeFaces().computeNormals().averageNormals(),this._renderer.createBuffers(s,u)}return this._renderer.drawBuffers(s),this},n.RendererGL.prototype.point=function(e,t,r){return console.log("point not yet implemented in webgl"),this},n.RendererGL.prototype.triangle=function(e){var t=e[0],r=e[1],a=e[2],o=e[3],i=e[4],s=e[5],l=e[6],u=e[7],c=e[8],p="tri|"+t+"|"+r+"|"+a+"|"+o+"|"+i+"|"+s+l+"|"+u+"|"+c;if(!this.geometryInHash(p)){var h=function(){var e=[];e.push(new n.Vector(t,r,a)),e.push(new n.Vector(o,i,s)),e.push(new n.Vector(l,u,c)),this.vertices=e,this.faces=[[0,1,2]],this.uvs=[[0,0],[0,1],[1,1]]},d=new n.Geometry(1,1,h);d.computeNormals(),this.createBuffers(p,d)}return this.drawBuffers(p),this},n.RendererGL.prototype.ellipse=function(e){var t=e[0],r=e[1],a=e[2],o=e[3],i=e[4],s=e[5]||24,l=e[6]||16,u="ellipse|"+e[0]+"|"+e[1]+"|"+e[2]+"|"+e[3]+"|"+e[4];if(!this.geometryInHash(u)){var c=function(){for(var e,s,l,u=0;u<=this.detailY;u++){s=u/this.detailY;for(var c=0;c<=this.detailX;c++){e=c/this.detailX;var p=2*Math.PI*e;if(0===s)l=new n.Vector(t,r,a);else{var h=t+o*Math.sin(p),d=r+i*Math.cos(p),f=a;l=new n.Vector(h,d,f)}this.vertices.push(l),this.uvs.push([e,s])}}},p=new n.Geometry(s,l,c);p.computeFaces().computeNormals(),this.createBuffers(u,p)}return this.drawBuffers(u),this},n.RendererGL.prototype.rect=function(e){var t="rect|"+e[0]+"|"+e[1]+"|"+e[2]+"|"+e[3]+"|"+e[4],r=e[0],a=e[1],o=e[2],i=e[3],s=e[4],l=e[5]||24,u=e[6]||16;if(!this.geometryInHash(t)){var c=function(){for(var e,t,l,u=0;u<=this.detailY;u++){t=u/this.detailY;for(var c=0;c<=this.detailX;c++)e=c/this.detailX,l=new n.Vector((r+i)*e,(a+s)*t,o),this.vertices.push(l),this.uvs.push([e,t])}},p=new n.Geometry(l,u,c);p.computeFaces().computeNormals(),this.createBuffers(t,p)}return this.drawBuffers(t),this},n.RendererGL.prototype.quad=function(){for(var e=new Array(arguments.length),t=0;t<e.length;++t)e[t]=arguments[t];var r=e[0],a=e[1],o=e[2],i=e[3],s=e[4],l=e[5],u=e[6],c=e[7],p=e[8],h=e[9],d=e[10],f=e[11],m="quad|"+r+"|"+a+"|"+o+"|"+i+"|"+s+"|"+l+u+"|"+c+"|"+p+h+"|"+d+"|"+f;if(!this.geometryInHash(m)){var g=function(){this.vertices.push(new n.Vector(r,a,o)),this.vertices.push(new n.Vector(i,s,l)),this.vertices.push(new n.Vector(u,c,p)),this.vertices.push(new n.Vector(h,d,f)),this.uvs.push([0,0],[1,0],[1,1],[0,1])},y=new n.Geometry(2,2,g);y.computeNormals(),y.faces=[[0,1,2],[2,3,0]],this.createBuffers(m,y)}return this.drawBuffers(m),this},n.RendererGL.prototype.bezier=function(e){var t=e[12]||20;this.beginShape();for(var r=[0,0,0,0],n=[0,0,0],a=0;a<=t;a++)r[0]=Math.pow(1-a/t,3),r[1]=3*(a/t)*Math.pow(1-a/t,2),r[2]=3*Math.pow(a/t,2)*(1-a/t),r[3]=Math.pow(a/t,3),n[0]=e[0]*r[0]+e[3]*r[1]+e[6]*r[2]+e[9]*r[3],n[1]=e[1]*r[0]+e[4]*r[1]+e[7]*r[2]+e[10]*r[3],n[2]=e[2]*r[0]+e[5]*r[1]+e[8]*r[2]+e[11]*r[3],this.vertex(n[0],n[1],n[2]);return this.endShape(),this},n.RendererGL.prototype.curve=function(e){var t=e[12];this.beginShape();for(var r=[0,0,0,0],n=[0,0,0],a=0;a<=t;a++)r[0]=.5*Math.pow(a/t,3),r[1]=.5*Math.pow(a/t,2),r[2]=a/t*.5,r[3]=.5,n[0]=r[0]*(-e[0]+3*e[3]-3*e[6]+e[9])+r[1]*(2*e[0]-5*e[3]+4*e[6]-e[9])+r[2]*(-e[0]+e[6])+r[3]*(2*e[3]),n[1]=r[0]*(-e[1]+3*e[4]-3*e[7]+e[10])+r[1]*(2*e[1]-5*e[4]+4*e[7]-e[10])+r[2]*(-e[1]+e[7])+r[3]*(2*e[4]),n[2]=r[0]*(-e[2]+3*e[5]-3*e[8]+e[11])+r[1]*(2*e[2]-5*e[5]+4*e[8]-e[11])+r[2]*(-e[2]+e[8])+r[3]*(2*e[5]),this.vertex(n[0],n[1],n[2]);return this.endShape(),this},t.exports=n},{"../core/core":37,"./p5.Geometry":82}],88:[function(e,t,r){t.exports={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition / uResolution *vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition / uResolution * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform float uResolution;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = vec3( uNormalMatrix * aNormal );\n  vVertTexCoord = aTexCoord;\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform float uResolution;\nuniform int uAmbientLightCount;\nuniform int uDirectionalLightCount;\nuniform int uPointLightCount;\n\nuniform vec3 uAmbientColor[8];\nuniform vec3 uLightingDirection[8];\nuniform vec3 uDirectionalColor[8];\nuniform vec3 uPointLightLocation[8];\nuniform vec3 uPointLightColor[8];\nuniform bool uSpecular;\n\nvarying vec3 vVertexNormal;\nvarying vec2 vVertTexCoord;\nvarying vec3 vLightWeighting;\n\nvec3 ambientLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 directionalLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor2 = vec3(0.0, 0.0, 0.0);\n\nvoid main(void){\n\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\n  vec3 vertexNormal = vec3( uNormalMatrix * aNormal );\n  vVertexNormal = vertexNormal;\n  vVertTexCoord = aTexCoord;\n\n  vec4 mvPosition = uModelViewMatrix * vec4(aPosition / uResolution, 1.0);\n  vec3 eyeDirection = normalize(-mvPosition.xyz);\n\n  float shininess = 32.0;\n  float specularFactor = 2.0;\n  float diffuseFactor = 0.3;\n\n  for(int i = 0; i < 8; i++){\n    if(uAmbientLightCount == i) break;\n    ambientLightFactor += uAmbientColor[i];\n  }\n\n  for(int j = 0; j < 8; j++){\n    if(uDirectionalLightCount == j) break;\n    vec3 dir = uLightingDirection[j];\n    float directionalLightWeighting = max(dot(vertexNormal, dir), 0.0);\n    directionalLightFactor += uDirectionalColor[j] * directionalLightWeighting;\n  }\n\n  for(int k = 0; k < 8; k++){\n    if(uPointLightCount == k) break;\n    vec3 loc = uPointLightLocation[k];\n    //loc = loc / uResolution;\n    vec3 lightDirection = normalize(loc - mvPosition.xyz);\n\n    float directionalLightWeighting = max(dot(vertexNormal, lightDirection), 0.0);\n    pointLightFactor += uPointLightColor[k] * directionalLightWeighting;\n\n    //factor2 for specular\n    vec3 reflectionDirection = reflect(-lightDirection, vertexNormal);\n    float specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n\n    pointLightFactor2 += uPointLightColor[k] * (specularFactor * specularLightWeighting\n      +  directionalLightWeighting * diffuseFactor);\n  }\n\n  if(!uSpecular){\n    vLightWeighting =  ambientLightFactor + directionalLightFactor + pointLightFactor;\n  }else{\n    vLightWeighting = ambientLightFactor + directionalLightFactor + pointLightFactor2;\n  }\n\n}\n",lightTextureFrag:"precision mediump float;\n\nuniform vec4 uMaterialColor;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nvarying vec3 vLightWeighting;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  if(!isTexture){\n    gl_FragColor = vec4(vec3(uMaterialColor.rgb * vLightWeighting), uMaterialColor.a);\n  }else{\n    vec4 textureColor = texture2D(uSampler, vVertTexCoord);\n    if(vLightWeighting == vec3(0., 0., 0.)){\n      gl_FragColor = textureColor;\n    }else{\n      gl_FragColor = vec4(vec3(textureColor.rgb * vLightWeighting), textureColor.a); \n    }\n  }\n}"}},{}]},{},[28])(28)}),!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.SuperGif=t()}(this,function(){var e=function(e){return e.reduce(function(e,t){return 2*e+t},0)},t=function(e){for(var t=[],r=7;r>=0;r--)t.push(!!(e&1<<r));return t},r=function(e){this.data=e,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return e instanceof Uint8Array?e[this.pos++]:255&e.charCodeAt(this.pos++)},this.readBytes=function(e){for(var t=[],r=0;e>r;r++)t.push(this.readByte());return t},this.read=function(e){for(var t="",r=0;e>r;r++)t+=String.fromCharCode(this.readByte());return t},this.readUnsigned=function(){var e=this.readBytes(2);return(e[1]<<8)+e[0]}},n=function(e,t){for(var r,n,a=0,o=function(e){for(var r=0,n=0;e>n;n++)t.charCodeAt(a>>3)&1<<(7&a)&&(r|=1<<n),a++;return r},i=[],s=1<<e,l=s+1,u=e+1,c=[],p=function(){c=[],u=e+1;for(var t=0;s>t;t++)c[t]=[t];c[s]=[],c[l]=null};;)if(n=r,r=o(u),r!==s){if(r===l)break;if(r<c.length)n!==s&&c.push(c[n].concat(c[r][0]));else{if(r!==c.length)throw new Error("Invalid LZW code.");c.push(c[n].concat(c[n][0]))}i.push.apply(i,c[r]),c.length===1<<u&&12>u&&u++}else p();return i},a=function(r,a){a||(a={});var o=function(e){for(var t=[],n=0;e>n;n++)t.push(r.readBytes(3));return t},i=function(){var e,t;t="";do e=r.readByte(),t+=r.read(e);while(0!==e);return t},s=function(){var n={};if(n.sig=r.read(3),n.ver=r.read(3),"GIF"!==n.sig)throw new Error("Not a GIF file.");n.width=r.readUnsigned(),n.height=r.readUnsigned();var i=t(r.readByte());n.gctFlag=i.shift(),n.colorRes=e(i.splice(0,3)),n.sorted=i.shift(),n.gctSize=e(i.splice(0,3)),n.bgColor=r.readByte(),n.pixelAspectRatio=r.readByte(),n.gctFlag&&(n.gct=o(1<<n.gctSize+1)),a.hdr&&a.hdr(n)},l=function(n){var o=function(n){var o=(r.readByte(),t(r.readByte()));n.reserved=o.splice(0,3),n.disposalMethod=e(o.splice(0,3)),n.userInput=o.shift(),n.transparencyGiven=o.shift(),n.delayTime=r.readUnsigned(),n.transparencyIndex=r.readByte(),n.terminator=r.readByte(),a.gce&&a.gce(n)},s=function(e){e.comment=i(),a.com&&a.com(e)},l=function(e){r.readByte(),e.ptHeader=r.readBytes(12),e.ptData=i(),a.pte&&a.pte(e)},u=function(e){var t=function(e){r.readByte(),e.unknown=r.readByte(),e.iterations=r.readUnsigned(),e.terminator=r.readByte(),a.app&&a.app.NETSCAPE&&a.app.NETSCAPE(e)},n=function(e){e.appData=i(),a.app&&a.app[e.identifier]&&a.app[e.identifier](e)};switch(r.readByte(),e.identifier=r.read(8),e.authCode=r.read(3),e.identifier){case"NETSCAPE":t(e);break;default:n(e)}},c=function(e){e.data=i(),a.unknown&&a.unknown(e)};switch(n.label=r.readByte(),n.label){case 249:n.extType="gce",o(n);break;case 254:n.extType="com",s(n);break;case 1:n.extType="pte",l(n);break;case 255:n.extType="app",u(n);break;default:n.extType="unknown",c(n)}},u=function(s){var l=function(e,t){for(var r=new Array(e.length),n=e.length/t,a=function(n,a){var o=e.slice(a*t,(a+1)*t);r.splice.apply(r,[n*t,t].concat(o))},o=[0,4,2,1],i=[8,8,4,2],s=0,l=0;4>l;l++)for(var u=o[l];n>u;u+=i[l])a(u,s),s++;return r};s.leftPos=r.readUnsigned(),s.topPos=r.readUnsigned(),s.width=r.readUnsigned(),s.height=r.readUnsigned();var u=t(r.readByte());s.lctFlag=u.shift(),s.interlaced=u.shift(),s.sorted=u.shift(),s.reserved=u.splice(0,2),s.lctSize=e(u.splice(0,3)),s.lctFlag&&(s.lct=o(1<<s.lctSize+1)),s.lzwMinCodeSize=r.readByte();var c=i();s.pixels=n(s.lzwMinCodeSize,c),s.interlaced&&(s.pixels=l(s.pixels,s.width)),
a.img&&a.img(s)},c=function(){var e={};switch(e.sentinel=r.readByte(),String.fromCharCode(e.sentinel)){case"!":e.type="ext",l(e);break;case",":e.type="img",u(e);break;case";":e.type="eof",a.eof&&a.eof(e);break;default:throw new Error("Unknown block: 0x"+e.sentinel.toString(16))}"eof"!==e.type&&setTimeout(c,0)},p=function(){s(),setTimeout(c,0)};p()},o=function(e){var t={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null,auto_play:!0};for(var n in e)t[n]=e[n];t.vp_w&&t.vp_h&&(t.is_vp=!0);var o,i,s=null,l=!1,u=null,c=null,p=null,h=null,d=null,f=null,m=null,g=!0,y=!0,v=!1,w=[],x=[],b=document.createElement("img");b.src=t.gif;var _,S,C=t.hasOwnProperty("on_end")?t.on_end:null,T=t.hasOwnProperty("loop_delay")?t.loop_delay:0,E=t.hasOwnProperty("loop_mode")?t.loop_mode:"auto",R=function(){u=null,c=null,d=p,p=null,f=null},k=function(){try{a(o,F)}catch(e){I("parse")}},M=function(e,t){S.resize(e,t),S.width=e,S.height=t},A=function(e,t){return x[e]?("undefined"!=typeof t.x&&(x[e].x=t.x),void("undefined"!=typeof t.y&&(x[e].y=t.y))):void(x[e]=t)},I=function(e){s=e,w=[]},P=function(e){i=e,M(i.width,i.height)},N=function(e){L(),R(),u=e.transparencyGiven?e.transparencyIndex:null,c=e.delayTime,p=e.disposalMethod},L=function(){f&&(w.push({data:f.getImageData(0,0,i.width,i.height),delay:c}),x.push({x:0,y:0}))},O=function(e){f||(f=_.getContext("2d"));var t=w.length,r=e.lctFlag?e.lct:i.gct;t>0&&(3===d?null!==h?f.putImageData(w[h].data,0,0):f.clearRect(m.leftPos,m.topPos,m.width,m.height):h=t-1,2===d&&f.clearRect(m.leftPos,m.topPos,m.width,m.height));var n=f.getImageData(e.leftPos,e.topPos,e.width,e.height),a=n.data;e.pixels.forEach(function(e,t){e!==u&&(a[4*t+0]=r[e][0],a[4*t+1]=r[e][1],a[4*t+2]=r[e][2],a[4*t+3]=255)}),n.data.set(a),f.putImageData(n,e.leftPos,e.topPos),v||(v=!0),m=e},B=function(){var e=-1,r=0,n=function(){var t=y?1:-1;return(e+t+w.length)%w.length},a=function(t){e+=t,l()},o=function(){null!==C&&C(b),r++},i=function(){var t=!1,i=function(){if(t=g){a(1);var s=10*w[e].delay;s||(s=100);var l=n();0===l&&(s+=T,setTimeout(o,s-1)),(E!==!1||0!==l||0>r)&&setTimeout(i,s)}};return function(){t||setTimeout(i,0)}}(),l=function(){var t;e=parseInt(e,10),e>w.length-1&&(e=0),0>e&&(e=0),t=x[e],_.getContext("2d").putImageData(w[e].data,t.x,t.y)},u=function(){g=!0,i()},c=function(){g=!1};return{init:function(){s||(t.auto_play?i():(e=0,l()))},step:i,play:u,pause:c,playing:g,move_relative:a,current_frame:function(){return e},length:function(){return w.length},move_to:function(t){e=t,l()},get_frames:function(){return w},buffer:function(){return S},get_playing:function(){return g}}}(),D=function(){},U=function(e,t){return function(t){e(t)}},F={hdr:U(P),gce:U(N),com:U(D),app:{NETSCAPE:U(D)},img:U(O,!0),eof:function(e){L(),B.init(),l=!1,console.log("ok"),q&&q(b)}},z=function(){S=t.p5inst.createImage(0,0),_=S.canvas,H=!0},G=function(){var e;return e=t.max_width&&i&&i.width>t.max_width?t.max_width/i.width:1},H=!1,q=!1,V=function(e){return!l&&(q=!!e&&e,l=!0,w=[],R(),h=null,d=null,f=null,m=null,!0)};return{play:B.play,pause:B.pause,move_relative:B.move_relative,move_to:B.move_to,get_playing:B.get_playing,get_canvas:function(){return canvas},get_canvas_scale:function(){return G()},get_loading:function(){return l},get_auto_play:function(){return t.auto_play},get_length:function(){return B.length()},get_current_frame:function(){return B.current_frame()},get_frames:function(){return B.get_frames()},buffer:function(){return B.buffer()},load_url:function(e,t){if(V(t)){var n=new XMLHttpRequest;n.overrideMimeType("text/plain; charset=x-user-defined"),n.onloadstart=function(){H||z()},n.onload=function(e){o=new r(n.responseText),setTimeout(k,0)},n.onerror=function(){I("xhr")},n.open("GET",e,!0),n.send()}},load:function(e){this.load_url(b.src,e)},load_raw:function(e,t){V(t)&&(H||z(),o=new r(e),setTimeout(k,0))},set_frame_offset:A}};return o}),function(){p5.prototype.loadGif=function(e,t){var r=new SuperGif({gif:e,p5inst:this});r.load(t);var n=r.buffer();return n.play=r.play,n.pause=r.pause,n.playing=r.get_playing,n.frames=r.get_frames,n.totalFrames=r.get_length,n.loaded=function(){return!r.get_loading()},n.frame=function(e){return"number"!=typeof e?r.get_current_frame():void r.move_to(e)},n},p5.prototype.loadRawGif=function(e,t){var r=new SuperGif({gif:"",p5inst:this});r.load_raw(e,t);var n=r.buffer();return n.play=r.play,n.pause=r.pause,n.playing=r.get_playing,n.frames=r.get_frames,n.totalFrames=r.get_length,n.loaded=function(){return!r.get_loading()},n.frame=function(e){return"number"!=typeof e?r.get_current_frame():void r.move_to(e)},n}}(),/*! p5.dom.js v0.2.11 June 17, 2016 */
/**
 * <p>The web is much more than just canvas and p5.dom makes it easy to interact
 * with other HTML5 objects, including text, hyperlink, image, input, video,
 * audio, and webcam.</p>
 * <p>There is a set of creation methods, DOM manipulation methods, and
 * an extended p5.Element that supports a range of HTML elements. See the
 * <a href="https://github.com/processing/p5.js/wiki/Beyond-the-canvas">
 * beyond the canvas tutorial</a> for a full overview of how this addon works.
 *
 * <p>Methods and properties shown in black are part of the p5.js core, items in
 * blue are part of the p5.dom library. You will need to include an extra file
 * in order to access the blue functions. See the
 * <a href="http://p5js.org/libraries/#using-a-library">using a library</a>
 * section for information on how to include this library. p5.dom comes with
 * <a href="http://p5js.org/download">p5 complete</a> or you can download the single file
 * <a href="https://raw.githubusercontent.com/lmccart/p5.js/master/lib/addons/p5.dom.js">
 * here</a>.</p>
 * <p>See <a href="https://github.com/processing/p5.js/wiki/Beyond-the-canvas">tutorial: beyond the canvas</a>
 * for more info on how to use this libary.</a>
 *
 * @module p5.dom
 * @submodule p5.dom
 * @for p5.dom
 * @main
 */
function(e,t){"function"==typeof define&&define.amd?define("p5.dom",["p5"],function(e){t(e)}):t("object"==typeof exports?require("../p5"):e.p5)}(this,function(e){function t(t){var r=document;return"string"==typeof t&&"#"===t[0]?(t=t.slice(1),r=document.getElementById(t)||document):t instanceof e.Element?r=t.elt:t instanceof HTMLElement&&(r=t),r}function r(t){if("INPUT"===t.tagName&&"checkbox"===t.type){var r=new e.Element(t);return r.checked=function(){return 0===arguments.length?this.elt.checked:(arguments[0]?this.elt.checked=!0:this.elt.checked=!1,this)},r}return"VIDEO"===t.tagName||"AUDIO"===t.tagName?new e.MediaElement(t):new e.Element(t)}function n(t,r,n){var a=r._userNode?r._userNode:document.body;a.appendChild(t);var o=n?new e.MediaElement(t):new e.Element(t);return r._elements.push(o),o}function a(e,t,r,a){var o=document.createElement(t),r=r||"";"string"==typeof r&&(r=[r]);for(var i=0;i<r.length;i++){var s=document.createElement("source");s.src=r[i],o.appendChild(s)}if("undefined"!=typeof a){var l=function(){a(),o.removeEventListener("canplaythrough",l)};o.addEventListener("canplaythrough",l)}var u=n(o,e,!0);return u.loadedmetadata=!1,o.addEventListener("loadedmetadata",function(){u.width=o.videoWidth,u.height=o.videoHeight,0===u.elt.width&&(u.elt.width=o.videoWidth),0===u.elt.height&&(u.elt.height=o.videoHeight),u.loadedmetadata=!0}),u}e.prototype.select=function(e,n){var a=null,o=t(n);return"."===e[0]?(e=e.slice(1),a=o.getElementsByClassName(e),a=a.length?a[0]:null):"#"===e[0]?(e=e.slice(1),a=o.getElementById(e)):(a=o.getElementsByTagName(e),a=a.length?a[0]:null),a?r(a):null},e.prototype.selectAll=function(e,n){var a,o=[],i=t(n);if("."===e[0]?(e=e.slice(1),a=i.getElementsByClassName(e)):a=i.getElementsByTagName(e),a)for(var s=0;s<a.length;s++){var l=r(a[s]);o.push(l)}return o},e.prototype.removeElements=function(e){for(var t=0;t<this._elements.length;t++)this._elements[t].elt instanceof HTMLCanvasElement||this._elements[t].remove()};var o=["div","p","span"];o.forEach(function(t){var r="create"+t.charAt(0).toUpperCase()+t.slice(1);e.prototype[r]=function(e){var r=document.createElement(t);return r.innerHTML=void 0===typeof e?"":e,n(r,this)}}),e.prototype.createImg=function(){var e,t=document.createElement("img"),r=arguments,a=function(){e.width=t.offsetWidth,e.height=t.offsetHeight,r.length>1&&"function"==typeof r[1]?(e.fn=r[1],e.fn()):r.length>1&&"function"==typeof r[2]&&(e.fn=r[2],e.fn())};return t.src=r[0],r.length>1&&"string"==typeof r[1]&&(t.alt=r[1]),t.onload=function(){a()},e=n(t,this)},e.prototype.createA=function(e,t,r){var a=document.createElement("a");return a.href=e,a.innerHTML=t,r&&(a.target=r),n(a,this)},e.prototype.createSlider=function(e,t,r,a){var o=document.createElement("input");return o.type="range",o.min=e,o.max=t,a&&(o.step=a),"number"==typeof r&&(o.value=r),n(o,this)},e.prototype.createButton=function(e,t){var r=document.createElement("button");return r.innerHTML=e,r.value=t,t&&(r.value=t),n(r,this)},e.prototype.createCheckbox=function(){var e=document.createElement("div"),t=document.createElement("input");t.type="checkbox",e.appendChild(t);var r=n(e,this);if(r.checked=function(){var e=r.elt.getElementsByTagName("input")[0];if(e){if(0===arguments.length)return e.checked;arguments[0]?e.checked=!0:e.checked=!1}return r},this.value=function(e){return r.value=e,this},arguments[0]){var a=Math.random().toString(36).slice(2),o=document.createElement("label");t.setAttribute("id",a),o.htmlFor=a,r.value(arguments[0]),o.appendChild(document.createTextNode(arguments[0])),e.appendChild(o)}return arguments[1]&&(t.checked=!0),r},e.prototype.createSelect=function(e){var t=document.createElement("select");e&&t.setAttribute("multiple","true");var r=n(t,this);return r.option=function(e,r){var n=document.createElement("option");n.innerHTML=e,arguments.length>1?n.value=r:n.value=e,t.appendChild(n)},r.selected=function(t){var r=[];if(arguments.length>0){for(var n=0;n<this.elt.length;n++)t.toString()===this.elt[n].value&&(this.elt.selectedIndex=n);return this}if(e){for(var n=0;n<this.elt.selectedOptions.length;n++)r.push(this.elt.selectedOptions[n].value);return r}return this.elt.value},r},e.prototype.createRadio=function(){var e=document.querySelectorAll("input[type=radio]"),t=0;if(e.length>1){console.log(e,e[0].name);var r=e.length,a=e[0].name,o=e[1].name;t=1;for(var i=1;i<r;i++)o=e[i].name,a!=o&&t++,a=o}else 1==e.length&&(t=1);var s=document.createElement("div"),l=n(s,this),u=-1;return l.option=function(e,r){var n=document.createElement("input");if(n.type="radio",n.innerHTML=e,arguments.length>1?n.value=r:n.value=e,n.setAttribute("name","defaultradio"+t),s.appendChild(n),e){u++;var a=(Math.random().toString(36).slice(2),document.createElement("label"));n.setAttribute("id","defaultradio"+t+"-"+u),a.htmlFor="defaultradio"+t+"-"+u,a.appendChild(document.createTextNode(e)),s.appendChild(a)}return n},l.selected=function(){var e=this.elt.childNodes.length;if(arguments[0]){for(var t=0;t<e;t+=2)this.elt.childNodes[t].value==arguments[0]&&(this.elt.childNodes[t].checked=!0);return this}for(var t=0;t<e;t+=2)if(1==this.elt.childNodes[t].checked)return this.elt.childNodes[t].value},l.value=function(){var e=this.elt.childNodes.length;if(arguments[0]){for(var t=0;t<e;t+=2)this.elt.childNodes[t].value==arguments[0]&&(this.elt.childNodes[t].checked=!0);return this}for(var t=0;t<e;t+=2)if(1==this.elt.childNodes[t].checked)return this.elt.childNodes[t].value;return""},l},e.prototype.createInput=function(e){var t=document.createElement("input");return t.type="text",e&&(t.value=e),n(t,this)},e.prototype.createFileInput=function(t,r){function a(r){function n(r){var n=new e.File(r);return function(e){n.data=e.target.result,t(n)}}for(var a=r.target.files,o=0;o<a.length;o++){var i=a[o],s=new FileReader;s.onload=n(i),i.type.indexOf("text")>-1?s.readAsText(i):s.readAsDataURL(i)}}if(window.File&&window.FileReader&&window.FileList&&window.Blob){var o=document.createElement("input");return o.type="file",r&&(o.multiple="multiple"),o.addEventListener("change",a,!1),n(o,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")},e.prototype.createVideo=function(e,t){return a(this,"video",e,t)},e.prototype.createAudio=function(e,t){return a(this,"audio",e,t)},e.prototype.VIDEO="video",e.prototype.AUDIO="audio",navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,e.prototype.createCapture=function(){for(var t,r,a=!0,o=!0,i=0;i<arguments.length;i++)arguments[i]===e.prototype.VIDEO?o=!1:arguments[i]===e.prototype.AUDIO?a=!1:"object"==typeof arguments[i]?t=arguments[i]:"function"==typeof arguments[i]&&(r=arguments[i]);if(!navigator.getUserMedia)throw"getUserMedia not supported in this browser";var s=document.createElement("video");t||(t={video:a,audio:o}),navigator.getUserMedia(t,function(e){s.src=window.URL.createObjectURL(e),r&&r(e)},function(e){console.log(e)});var l=n(s,this,!0);return l.loadedmetadata=!1,s.addEventListener("loadedmetadata",function(){s.play(),l.width=s.videoWidth=s.width,l.height=s.videoHeight=s.height,l.loadedmetadata=!0}),l},e.prototype.createElement=function(e,t){var r=document.createElement(e);return"undefined"!=typeof t&&(r.innerHTML=t),n(r,this)},e.Element.prototype.addClass=function(e){return this.elt.className?this.elt.className=this.elt.className+" "+e:this.elt.className=e,this},e.Element.prototype.removeClass=function(e){var t=new RegExp("(?:^|\\s)"+e+"(?!\\S)");return this.elt.className=this.elt.className.replace(t,""),this.elt.className=this.elt.className.replace(/^\s+|\s+$/g,""),this},e.Element.prototype.child=function(t){return null===t?this.elt.childNodes:("string"==typeof t?("#"===t[0]&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof e.Element&&(t=t.elt),this.elt.appendChild(t),this)},e.Element.prototype.center=function(e){var t=this.elt.style.display,r="none"===this.elt.style.display,n="none"===this.parent().style.display,a={x:this.elt.offsetLeft,y:this.elt.offsetTop};r&&this.show(),this.elt.style.display="block",this.position(0,0),n&&(this.parent().style.display="block");var o=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),i=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight),s=a.y,l=a.x;return"both"===e||void 0===e?this.position(o/2,i/2):"horizontal"===e?this.position(o/2,s):"vertical"===e&&this.position(l,i/2),this.style("display",t),r&&this.hide(),n&&(this.parent().style.display="none"),this},e.Element.prototype.html=function(e){return"undefined"!=typeof e?(this.elt.innerHTML=e,this):this.elt.innerHTML},e.Element.prototype.position=function(){return 0===arguments.length?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="absolute",this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this)},e.Element.prototype._translate=function(){this.elt.style.position="absolute";var e="";return this.elt.style.transform&&(e=this.elt.style.transform.replace(/translate3d\(.*\)/g,""),e=e.replace(/translate[X-Z]?\(.*\)/g,"")),2===arguments.length?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":arguments.length>2&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",3===arguments.length?this.elt.parentElement.style.perspective="1000px":this.elt.parentElement.style.perspective=arguments[3]+"px"),this.elt.style.transform+=e,this},e.Element.prototype._rotate=function(){var e="";if(this.elt.style.transform){var e=this.elt.style.transform.replace(/rotate3d\(.*\)/g,"");e=e.replace(/rotate[X-Z]?\(.*\)/g,"")}return 1===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg)":2===arguments.length?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":3===arguments.length&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=e,this},e.Element.prototype.style=function(t,r){var n=this;if(r instanceof e.Color&&(r="rgba("+r.levels[0]+","+r.levels[1]+","+r.levels[2]+","+r.levels[3]/255+")"),"undefined"==typeof r){if(t.indexOf(":")===-1){var a=window.getComputedStyle(n.elt),o=a.getPropertyValue(t);return o}for(var i=t.split(";"),s=0;s<i.length;s++){var l=i[s].split(":");l[0]&&l[1]&&(this.elt.style[l[0].trim()]=l[1].trim())}}else if("rotate"===t||"translate"===t||"position"===t){var u=Array.prototype.shift.apply(arguments),c=this[u]||this["_"+u];c.apply(this,arguments)}else if(this.elt.style[t]=r,"width"===t||"height"===t||"left"===t||"top"===t){var p=r.replace(/\D+/g,"");this[t]=parseInt(p,10)}return this},e.Element.prototype.attribute=function(e,t){return"undefined"==typeof t?this.elt.getAttribute(e):(this.elt.setAttribute(e,t),this)},e.Element.prototype.value=function(){return arguments.length>0?(this.elt.value=arguments[0],this):"range"===this.elt.type?parseFloat(this.elt.value):this.elt.value},e.Element.prototype.show=function(){return this.elt.style.display="block",this},e.Element.prototype.hide=function(){return this.elt.style.display="none",this},e.Element.prototype.size=function(t,r){if(0===arguments.length)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var n=t,a=r,o=e.prototype.AUTO;if(n!==o||a!==o){if(n===o?n=r*this.width/this.height:a===o&&(a=t*this.height/this.width),this.elt instanceof HTMLCanvasElement){var i={},s=this.elt.getContext("2d");for(var l in s)i[l]=s[l];this.elt.setAttribute("width",n*this._pInst._pixelDensity),this.elt.setAttribute("height",a*this._pInst._pixelDensity),this.elt.setAttribute("style","width:"+n+"px; height:"+a+"px"),this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity);for(var l in i)this.elt.getContext("2d")[l]=i[l]}else this.elt.style.width=n+"px",this.elt.style.height=a+"px",this.elt.width=n,this.elt.height=a,this.width=n,this.height=a;this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this._pInst&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this},e.Element.prototype.remove=function(){for(var e in this._events)this.elt.removeEventListener(e,this._events[e]);this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt),delete this},e.MediaElement=function(t,r){e.Element.call(this,t,r);var n=this;this.elt.crossOrigin="anonymous",this._prevTime=0,this._cueIDCounter=0,this._cues=[],this._pixelDensity=1,Object.defineProperty(n,"src",{get:function(){var e=n.elt.children[0].src,t=n.elt.src===window.location.href?"":n.elt.src,r=e===window.location.href?t:e;return r},set:function(e){for(var r=0;r<n.elt.children.length;r++)n.elt.removeChild(n.elt.children[r]);var a=document.createElement("source");a.src=e,t.appendChild(a),n.elt.src=e}}),n._onended=function(){},n.elt.onended=function(){n._onended(n)}},e.MediaElement.prototype=Object.create(e.Element.prototype),e.MediaElement.prototype.play=function(){return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),this.elt.readyState>1?this.elt.play():(this.elt.load(),this.elt.play()),this},e.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this},e.MediaElement.prototype.pause=function(){return this.elt.pause(),this},e.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this},e.MediaElement.prototype.noLoop=function(){return this.elt.setAttribute("loop",!1),this},e.MediaElement.prototype.autoplay=function(e){return this.elt.setAttribute("autoplay",e),this},e.MediaElement.prototype.volume=function(e){return"undefined"==typeof e?this.elt.volume:void(this.elt.volume=e)},e.MediaElement.prototype.speed=function(e){return"undefined"==typeof e?this.elt.playbackRate:void(this.elt.playbackRate=e)},e.MediaElement.prototype.time=function(e){return"undefined"==typeof e?this.elt.currentTime:void(this.elt.currentTime=e)},e.MediaElement.prototype.duration=function(){return this.elt.duration},e.MediaElement.prototype.pixels=[],e.MediaElement.prototype.loadPixels=function(){return this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d")),this.loadedmetadata&&(this.canvas.width!==this.elt.width&&(this.canvas.width=this.elt.width,this.canvas.height=this.elt.height,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),e.Renderer2D.prototype.loadPixels.call(this)),this},e.MediaElement.prototype.updatePixels=function(t,r,n,a){return this.loadedmetadata&&e.Renderer2D.prototype.updatePixels.call(this,t,r,n,a),this},e.MediaElement.prototype.get=function(t,r,n,a){return this.loadedmetadata?e.Renderer2D.prototype.get.call(this,t,r,n,a):t?[0,0,0,255]:new e.Image(1,1)},e.MediaElement.prototype.set=function(t,r,n){this.loadedmetadata&&e.Renderer2D.prototype.set.call(this,t,r,n)},e.MediaElement.prototype.onended=function(e){return this._onended=e,this},e.MediaElement.prototype.connect=function(t){var r,n;if("function"==typeof e.prototype.getAudioContext)r=e.prototype.getAudioContext(),n=e.soundOut.input;else try{r=t.context,n=r.destination}catch(a){throw"connect() is meant to be used with Web Audio API or p5.sound.js"}this.audioSourceNode||(this.audioSourceNode=r.createMediaElementSource(this.elt),this.audioSourceNode.connect(n)),t?t.input?this.audioSourceNode.connect(t.input):this.audioSourceNode.connect(t):this.audioSourceNode.connect(n)},e.MediaElement.prototype.disconnect=function(){if(!this.audioSourceNode)throw"nothing to disconnect";this.audioSourceNode.disconnect()},e.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit",this.elt.controls=!0},e.MediaElement.prototype.hideControls=function(){this.elt.controls=!1},e.MediaElement.prototype.addCue=function(e,t,r){var n=this._cueIDCounter++,a=new i(t,e,n,r);return this._cues.push(a),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),n},e.MediaElement.prototype.removeCue=function(e){for(var t=0;t<this._cues.length;t++){var r=this._cues[t];r.id===e&&this.cues.splice(t,1)}0===this._cues.length&&(this.elt.ontimeupdate=null)},e.MediaElement.prototype.clearCues=function(){this._cues=[],this.elt.ontimeupdate=null},e.MediaElement.prototype._onTimeUpdate=function(){for(var e=this.time(),t=0;t<this._cues.length;t++){var r=this._cues[t].time,n=this._cues[t].val;this._prevTime<r&&r<=e&&this._cues[t].callback(n)}this._prevTime=e};
// Tone.js Transport Timeline Event, MIT License Yotam Mann 2015 tonejs.org
var i=function(e,t,r,n){this.callback=e,this.time=t,this.id=r,this.val=n};e.File=function(e,t){this.file=e,this._pInst=t;var r=e.type.split("/");this.type=r[0],this.subtype=r[1],this.name=e.name,this.size=e.size,this.data=void 0}}),angular.module("app").run(["$templateCache",function(e){e.put("app/wizard/account1.html",'<div class="animate" ng-class="animationRows[3][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][1]"><h4>{{payload.h4}}</h4></div><form name="email_form" class="animate" ng-class="animationRows[3][2]"><div class="inputDiv" layout="column" layout-align="center"><div class="inputContainer" layout="row" layout-align="start center"><div class="ss_input"><svg width="32px" height="38px" viewbox="33 27 24 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="email" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="28" font-weight="normal" line-spacing="38"><tspan x="30" y="60" fill="#717E83">email</tspan></text></svg></div><div flex="grow" class="md-box"><md-input-container class="md-block"><label>{{payload.input1}}</label> <input autofocus="" ng-model="given_email" ng-change="accountListener()" ng-model-options="{ debounce: 500 }" required="" type="text" name="given_email"><div ng-messages="email_form.given_email.$error"><div ng-message="required">{{payload.input1_error}}</div></div></md-input-container></div></div></div></form>'),e.put("app/wizard/ap_final.html",'<div class="animate" ng-class="animationRows[2][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[2][1]"><h4>{{payload.h4}}</h4></div>'),e.put("app/wizard/basic.html",'<div class="animate" ng-class="animationRows[2][0]"><h1>{{payload.h1}}</h1></div><div class="animate" ng-class="animationRows[2][1]"><h4>{{payload.h4}}</h4></div>'),e.put("app/wizard/basic2.html",'<div class="animate kitImage" ng-class="animationRows[3][0]"><img ng-src="{{payload.image}}" layout="center"></div><div class="animate" ng-class="animationRows[3][1]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][2]"><h4>{{payload.h4}}</h4></div>'),e.put("app/wizard/basic3.html",'<div class="animate" ng-class="animationRows[3][0]"><img ng-src="{{payload.image}}" class=""></div><div class="animate" ng-class="animationRows[3][1]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][2]"><h4>{{payload.h4}}</h4></div>'),e.put("app/wizard/casing.html",'<div class="kitBuildHolder animate" layout="column" layout-align="center center" flex="grow" ng-class="animationRows[3][0]"><img ng-src="{{payload.image}}" class="buildImage"></div><div class="animate" ng-class="animationRows[3][1]"><h2>{{payload.h2}}</h2></div><div class="buildInstructions animate" ng-class="animationRows[3][2]"><p>{{payload.text}}</p></div>'),e.put("app/wizard/collaborators.html",'<div layout="row" layout-align="center center" class="animate" ng-class="animationRows[3][0]"><img ng-src="{{payload.companyLogo}}" class="companyLogo" layout="center"></div><div class="animate" ng-class="animationRows[3][1]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][2]"><h4>{{payload.h4}}</h4></div>'),e.put("app/wizard/confirm.html",'<div layout="center" layout-align="center center" class="animate" ng-class="animationRows[3][0]"><div class="ss_thumbs"><svg width="65px" height="65px" viewbox="701 215 65 65" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M711.833333,278.645833 C711.833333,279.398148 711.231481,280 710.479167,280 L702.354167,280 C701.601852,280 701,279.398148 701,278.645833 L701,240.729167 C701,239.976852 701.601852,239.375 702.354167,239.375 L710.479167,239.375 C711.231481,239.375 711.833333,239.976852 711.833333,240.729167 L711.833333,278.645833 Z M762.689815,250.885417 C764.645833,251.938657 766,253.969907 766,256.302083 C766,259.16088 763.96875,261.643519 761.260417,262.24537 C761.711806,263.148148 761.9375,264.126157 761.9375,265.104167 C761.9375,268.188657 759.90625,270.746528 757.197917,271.574074 C757.649306,272.476852 757.875,273.530093 757.875,274.583333 C757.875,277.592593 755.467593,280 752.458333,280 L738.916667,280 C736.659722,280 733.199074,279.247685 731.167824,278.344907 L717.25,271.875 L717.25,243.4375 C733.5,232.604167 736.208333,227.1875 736.208333,219.0625 C736.208333,216.805556 738.013889,215 740.270833,215 C741.775463,215 743.430556,216.128472 744.709491,218.009259 C746.21412,220.115741 747.041667,222.899306 747.041667,225.833333 C747.041667,230.949074 744.483796,237.494213 744.408565,237.494213 C744.258102,237.945602 744.333333,238.396991 744.559028,238.773148 C744.784722,239.149306 745.236111,239.375 745.6875,239.375 L759.90625,239.375 C763.291667,239.375 766,242.083333 766,245.46875 C766,247.800926 764.645833,249.907407 762.689815,250.885417 L762.689815,250.885417 Z" id="like" stroke="none" fill="#FB7E00" fill-rule="evenodd"></path></svg></div></div><div class="animate" ng-class="animationRows[3][1]"><h1>{{payload.h1}}</h1></div><div class="animate" ng-class="animationRows[3][2]"><h4>{{payload.h4}}</h4></div>'),e.put("app/wizard/final.html",'<div class="animate" ng-class="animationRows[4][0]" layout="center" layout-align="center center"><svg width="91px" height="118px" viewbox="691 135 91 118" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="🎉" stroke="none" fill="none" font-family="AppleColorEmoji, Apple Color Emoji" font-size="90" font-weight="normal"><tspan x="691" y="225" fill="#FFFFFF">🎉</tspan></text></svg></div><div class="animate" ng-class="animationRows[4][1]"><h1>{{payload.h1}}</h1></div><div class="animate" ng-class="animationRows[4][2]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[4][3]"><h4>{{payload.h4}}</h4></div>'),e.put("app/wizard/handshake.html",'<div class="animate" ng-class="animationRows[3][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][1]"><h4>{{payload.h4}}</h4></div><div class="animate" ng-class="animationRows[3][2]" layout="column" layout-align="center center" flex="grow"><div layout-align="center center" layout="row" id="handShakeSpace" flex="" style="height: 35vw; width: 35vw; min-width: 480px; min-height: 480px; background-color:#4AA3DF; border-radius: 10vw;"><div style="display: block; width: 350px;"><h2 style="font-size: 35px; text-align: center;">{{payload.handshakeLabel}}</h2></div></div></div><div class="backgroundProgressLoader" ng-class="backgroundLoader"><md-progress-linear md-mode="determinate" value="{{ loadingPercentage }}"></md-progress-linear></div>'),e.put("app/wizard/kitbuild1.html",'<div class="kitBuildHolder animate" layout="column" layout-align="center center" flex="grow" ng-class="animationRows[3][0]"><img ng-src="app/images/connect0.png" class="buildImage"></div><div class="animate" ng-class="animationRows[3][1]"><h2>{{payload.h2}}</h2></div><div class="buildInstructions animate" ng-class="animationRows[3][2]"><p>{{payload.text}}</p></div>'),e.put("app/wizard/kitbuild2.html",'<div class="kitBuildHolder animate" layout="column" layout-align="center center" flex="grow" ng-class="animationRows[3][0]"><img ng-src="app/images/connect1.png" class="buildImage"></div><div class="animate" ng-class="animationRows[3][1]"><h2>{{payload.h2}}</h2></div><div class="buildInstructions animate" ng-class="animationRows[3][2]"><p>{{payload.text}}</p></div>'),e.put("app/wizard/kitbuild3.html",'<div class="kitBuildHolder animate" layout="column" layout-align="center center" flex="grow" ng-class="animationRows[3][0]"><img ng-src="app/images/connect2.png" class="buildImage"></div><div class="animate" ng-class="animationRows[3][1]"><h2>{{payload.h2}}</h2></div><div class="buildInstructions animate" ng-class="animationRows[3][2]"><p>{{payload.text}}</p></div>'),e.put("app/wizard/kitbuild4.html",'<div class="kitBuildHolder animate" layout="column" layout-align="center center" flex="grow" ng-class="animationRows[3][0]"><img ng-src="app/images/connect3.png" class="buildImage"></div><div class="animate" ng-class="animationRows[3][1]"><h2>{{payload.h2}}</h2></div><div class="buildInstructions animate" ng-class="animationRows[3][2]"><p>{{payload.text}}</p></div>'),e.put("app/wizard/landing.html",'<div layout="row" layout-align="center center" class="animate" ng-class="animationRows[4][0]"><img ng-src="app/images/MS LOGO.png" class="companyLogo" layout="center"></div><div class="animate" ng-class="animationRows[4][1]"><h1>{{payload.h1}}</h1></div><div class="animate" ng-class="animationRows[4][2]"><h4>{{payload.h4}}</h4></div><div class="animate" ng-class="animationRows[4][3]"><div class="languageSelector" layout="row" layout-align="center center"><button class="contextButton" ng-click="languageChangeSegue(0)">{{ payload.contextButton1 }}<svg id="nextSVG" width="10px" height="16px" viewbox="187 22 10 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><defs></defs><path d="M187.539062,22.0676084 L196.867188,29.7394834 C196.95573,29.8071921 197,29.8931287 197,29.9972959 C197,30.1170882 196.95573,30.2030248 196.867188,30.2551084 L187.539062,37.9269834 C187.434895,38.0051088 187.317709,38.0155254 187.1875,37.9582334 C187.062499,37.9009415 187,37.8019841 187,37.6613584 L187,22.3332334 C187,22.1926077 187.062499,22.0936504 187.1875,22.0363584 C187.317709,21.9790665 187.434895,21.989483 187.539062,22.0676084 L187.539062,22.0676084 Z" id="directright" stroke="none" fill="#FFFFFF" fill-rule="evenodd"></path></svg></button> <button class="contextButton" ng-click="languageChangeSegue(1)">{{ payload.contextButton2 }}<svg id="nextSVG" width="10px" height="16px" viewbox="187 22 10 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><defs></defs><path d="M187.539062,22.0676084 L196.867188,29.7394834 C196.95573,29.8071921 197,29.8931287 197,29.9972959 C197,30.1170882 196.95573,30.2030248 196.867188,30.2551084 L187.539062,37.9269834 C187.434895,38.0051088 187.317709,38.0155254 187.1875,37.9582334 C187.062499,37.9009415 187,37.8019841 187,37.6613584 L187,22.3332334 C187,22.1926077 187.062499,22.0936504 187.1875,22.0363584 C187.317709,21.9790665 187.434895,21.989483 187.539062,22.0676084 L187.539062,22.0676084 Z" id="directright" stroke="none" fill="#FFFFFF" fill-rule="evenodd"></path></svg></button></div></div>'),e.put("app/wizard/location_map.html",'<div class="animate" ng-class="animationRows[3][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][1]"><h4>{{payload.h4}}</h4></div><div class="animate" ng-class="animationRows[3][2]"><form name="location"><div class="inputDiv locationInput" layout="column" layout-align="center"><div class="inputContainer" layout="row" layout-align="start center"><div class="ss_input"><svg width="26px" height="40px" viewbox="33 27 24 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="location" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="28" font-weight="normal" line-spacing="38"><tspan x="33" y="57" fill="#717E83">location</tspan></text></svg></div><div flex="grow" class="md-box"><md-input-container class="md-block"><label>{{payload.input1}}</label> <input type="text" class="autoCompleteInput" g-places-autocomplete="" ng-change="autoCompleteListener()" ng-model="autocomplete"></md-input-container></div></div></div></form><ui-gmap-google-map ng-if="map.center" center="map.center" zoom="map.zoom"><ui-gmap-marker idkey="1" coords="map.marker.location" click="" options="{ draggable: true }" events="map.marker.events" control=""></ui-gmap-marker></ui-gmap-google-map></div>'),e.put("app/wizard/location_prep.html",'<div layout="center" layout-align="center center" class="animate" ng-class="animationRows[3][0]"><div class="ss_location"><svg width="80px" height="110px" viewbox="690 190 80 110" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><text id="location" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="80" font-weight="normal"><tspan x="690" y="275" fill="#FB7E00">location</tspan></text></svg></div></div><div class="animate" ng-class="animationRows[3][1]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][2]"><h4>{{payload.h4}}</h4></div>'),e.put("app/wizard/location_tags.html",'<div class="animate" ng-class="animationRows[3][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][1]"><h4>{{payload.h4}}</h4></div><div class="selectionRow animate" layout="row" layout-margin="" layout-wrap="" layout-align="center" ng-class="animationRows[3][2]"><button class="tag" ng-repeat="tags in locationTags" ng-click="tagToggle(tags)" ng-class="tagStates[locationTags.indexOf(tags)]"><svg width="23px" height="25px" viewbox="15 13 23 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="tag" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="18" font-weight="normal"><tspan x="17.5" y="36" fill="#FFFFFF">tag</tspan></text></svg>{{ tags }}</button></div>'),e.put("app/wizard/login.html",'<div class="animate" ng-class="animationRows[4][0]"><h2>{{payload.h2a}} {{submittedData.user.username}} {{payload.h2b}}</h2></div><div class="animate" ng-class="animationRows[4][1]"><h4>{{payload.h4}}</h4></div><form name="password_form" class="animate" ng-class="animationRows[4][2]"><div class="inputDiv" layout="column" layout-align="center"><div class="inputContainer" layout="row" layout-align="start center"><div class="ss_input"><svg width="38px" height="36" viewbox="33 27 24 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="lock" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="30" font-weight="normal" line-spacing="38"><tspan x="20" y="60" fill="#717E83">lock</tspan></text></svg></div><div flex="grow" class="md-box"><md-input-container ng-model-options="{ debounce: 1000 }" class="md-block"><label>{{payload.input1}}</label> <input ng-model="pass" ng-change="loginListener()" type="{{showPasswordToggle}}" name="pass"><div ng-messages="password_form.pass.$error"></div></md-input-container></div><div class="ss_input" ng-mouseenter="showPassword(true)" ng-mouseleave="showPassword(false)" ng-click="forceShowPassword()"><svg width="36px" height="38px" viewbox="438 32 36 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="eye" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="36" font-weight="normal" line-spacing="38"><tspan x="438" y="70" fill="#717E83">eye</tspan></text></svg></div></div></div></form>'),e.put("app/wizard/make_account1.html",'<div class="animate" ng-class="animationRows[4][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[4][1]"><h4>{{payload.h4}}</h4></div><form name="username_form" class="animate" ng-class="animationRows[4][2]"><div class="inputDiv" layout="column" layout-align="center"><div class="inputContainer" layout="row" layout-align="start center"><div class="ss_input"><svg width="38px" height="76px" viewbox="33 27 24 76" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="user" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="32" font-weight="normal" line-spacing="38"><tspan x="31" y="78" fill="#717E83">user</tspan></text></svg></div><div flex="grow" class="md-box"><md-input-container class="md-block"><label>{{payload.input1}}</label> <input ng-model-options="{ debounce: 500 }" autofocus="" ng-model="given_username" ng-change="usernameListener()" required="" type="text" name="given_username"><div ng-messages="email_form.given_username.$error"><div ng-message="required">{{payload.input1_error}}</div></div></md-input-container></div></div></div></form><div class="contextWrapper animate" layout="center" ng-class="animationRows[4][3]"><button class="contextButton" ng-click="generateName()"><svg width="23px" height="25px" viewbox="15 13 23 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="refresh" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="18" font-weight="normal"><tspan x="17.5" y="32" fill="#FFFFFF">refresh</tspan></text></svg>{{ payload.contextButton }}</button></div>'),e.put("app/wizard/make_account2.html",'<div class="animate" ng-class="animationRows[4][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[4][1]"><h4>{{payload.h4a}}</h4></div><form name="password_create" class="animate" ng-class="animationRows[4][2]"><div class="inputDiv" layout="column" layout-align="center"><div class="inputContainer" layout="row" layout-align="start center"><div class="ss_input"><svg width="38px" height="36" viewbox="33 27 24 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="lock" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="30" font-weight="normal" line-spacing="38"><tspan x="26" y="60" fill="#717E83">lock</tspan></text></svg></div><div flex="grow" class="md-box"><md-input-container class="md-block"><label>{{payload.input1}}</label> <input ng-model-options="{ debounce: 1000 }" ng-model="pass1" ng-change="passwordListener()" type="{{showPasswordToggle}}" name="pass1" minlength="5" required=""><div ng-messages="password_create.pass1.$error"><div ng-message="required">{{payload.input1_error2}}</div><div ng-message="minlength">{{payload.input1_error}}</div></div></md-input-container></div><div class="ss_input" ng-mouseenter="showPassword(true)" ng-mouseleave="showPassword(false)" ng-click="forceShowPassword()"><svg width="36px" height="38px" viewbox="438 32 36 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="eye" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="36" font-weight="normal" line-spacing="38"><tspan x="438" y="70" fill="#717E83">eye</tspan></text></svg></div></div></div><div class="inputDiv" layout="column" layout-align="center"><div class="inputContainer" layout="row" layout-align="start center"><div class="ss_input"><svg width="38px" height="36" viewbox="33 27 24 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="lock" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="30" font-weight="normal" line-spacing="38"><tspan x="26" y="60" fill="#717E83">lock</tspan></text></svg></div><div flex="grow" class="md-box"><md-input-container class="md-block"><label>{{payload.input1}}</label> <input ng-model-options="{ debounce: 1000 }" ng-model="pass2" ng-change="passwordListener()" type="{{showPasswordToggle}}" name="pass2" minlength="5" required=""><div ng-messages="password_create.pass2.$error"><div ng-message="required">{{payload.input1_error2}}</div><div ng-message="minlength">{{payload.input1_error}}</div></div></md-input-container></div><div class="ss_input" ng-mouseenter="showPassword(true)" ng-mouseleave="showPassword(false)" ng-click="forceShowPassword()"><svg width="36px" height="38px" viewbox="438 32 36 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="eye" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="36" font-weight="normal" line-spacing="38"><tspan x="438" y="70" fill="#717E83">eye</tspan></text></svg></div></div></div></form>'),e.put("app/wizard/pair1.html",'<div class="animate" ng-class="animationRows[2][0]"><h2>{{payload.h2}}</h2></div><div class="inputContainer animate" layout="row" layout-align="center none" ng-class="animationRows[2][1]"><md-input-container class="dropDown"><label>Select Your Wifi Network</label><md-select class="selectMenu" ng-model="size"><md-option class="selection" ng-repeat="network in networks" value="{{network}}">{{network}}</md-option></md-select></md-input-container></div>'),e.put("app/wizard/pair2.html",'<div class="animate" ng-class="animationRows[3][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][1]"><h4>{{payload.h4}}</h4></div><form name="handShakeCredentials" class="animate" ng-class="animationRows[3][2]"><div class="inputContainer password" layout="row" layout-align="center center"><div><svg width="48px" height="66px" viewbox="9 6 48 66" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><text id="key" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="48" font-weight="normal"><tspan x="9" y="57" fill="#FB7E00">key</tspan></text></svg></div><md-input-container class="md-block"><input required="" type="password" name="wifiCredentials"></md-input-container></div><div class="inputSpacer"></div></form>'),e.put("app/wizard/prompted_entry.html",'<div class="animate" ng-class="animationRows[3][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][1]" layout="column" layout-align="center center"><div class="promptedText"><h2>{{payload.promptedText}}</h2></div></div><div class="animate" ng-class="animationRows[3][2]"><h3 ng-bind-html="bindable">{{payload.h3}} h</h3><h4>{{payload.h4}}</h4></div>'),e.put("app/wizard/prompted_entry2_image.html",'<div class="animate" ng-class="animationRows[3][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][1]" layout="column" layout-align="center center"><img ng-src="app/images/accesspoint_mobile.png" class="buildImage"></div><div class="animate" ng-class="animationRows[3][2]"><h3 ng-bind-html="bindable">{{payload.h3}} h</h3><h4>{{payload.h4}}</h4></div>'),e.put("app/wizard/selectparts.html",'<div class="animate" ng-class="animationRows[3][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][1]"><h4>{{payload.h4}}</h4></div><div class="selectionRow animate" layout="row" layout-padding="" layout-margin="" layout-wrap="" ng-class="animationRows[3][2]" flex="noshrink"><button class="selection" flex="" flex-md="45" flex-sm="45" flex-xs="100" ng-click="selectPart(0)" ng-class="selectionButtons[0]" ng-mouseenter="infoImageOn(0)" ng-mouseleave="infoImageOff(0)"><div class="sectionContent"><div class="contentIcons" layout="row" layout-align="space-between"><div class="infoHolder" ng-click="infoClick(0)"><img class="info" ng-src="{{infoImages[0]}}" layout="center"></div><div class="checkHolder" layout="row" layout-align="end start"><img class="check" ng-src="app/images/check.png" layout="center"></div></div><div class="selectionImage"><img class="itemImage" ng-src="app/images/BOARDS-CUTOUT_0003_SENSOR-BOARD-BLUE.png"></div><h5 class="selectionText">{{payload.part1}}</h5></div></button> <button class="selection" flex="" flex-md="45" flex-sm="45" flex-xs="100" ng-click="selectPart(1)" ng-class="selectionButtons[1]" ng-mouseenter="infoImageOn(1)" ng-mouseleave="infoImageOff(1)"><div class="sectionContent"><div class="contentIcons" layout="row" layout-align="space-between"><div class="infoHolder" ng-click="infoClick(1)"><img class="info" ng-src="{{infoImages[1]}}" layout="center"></div><div class="checkHolder" layout="row" layout-align="end start"><img class="check" ng-src="app/images/check.png" layout="center"></div></div><div class="selectionImage"><img class="itemImage" ng-src="app/images/BOARDS-CUTOUT_0002_HARDWARE-BOARD-WHITE.png"></div><h5 class="selectionText">{{payload.part2}}</h5></div></button> <button class="selection" flex="" flex-md="45" flex-sm="45" flex-xs="100" ng-click="selectPart(2)" ng-class="selectionButtons[2]" ng-mouseenter="infoImageOn(2)" ng-mouseleave="infoImageOff(2)"><div class="sectionContent"><div class="contentIcons" layout="row" layout-align="space-between"><div class="infoHolder" ng-click="infoClick(2)"><img class="info" ng-src="{{infoImages[2]}}" layout="center"></div><div class="checkHolder" layout="row" layout-align="end start"><img class="check" ng-src="app/images/check.png" layout="center"></div></div><div class="selectionImage"><img class="itemImage" ng-src="app/images/BOARDS-CUTOUT_0006_BATTERY2.png"></div><h5 class="selectionText">{{payload.part3}}</h5></div></button> <button class="selection" flex="" flex-md="45" flex-sm="45" flex-xs="100" ng-click="selectPart(3)" ng-class="selectionButtons[3]" ng-mouseenter="infoImageOn(3)" ng-mouseleave="infoImageOff(3)"><div class="sectionContent"><div class="contentIcons" layout="row" layout-align="space-between"><div class="infoHolder" ng-click="infoClick(3)"><img class="info" ng-src="{{infoImages[3]}}" layout="center"></div><div class="checkHolder" layout="row" layout-align="end start"><img class="check" ng-src="app/images/check.png" layout="center"></div></div><div class="selectionImage"><img class="itemImage" ng-src="app/images/BOARDS-CUTOUT_0005_USB.png"></div><h5 class="selectionText">{{payload.part4}}</h5></div></button></div>'),e.put("app/wizard/selectparts2.html",'<div class="animate" ng-class="animationRows[3][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][1]"><h4>{{payload.h4}}</h4></div><div class="selectionRow animate" layout="row" layout-padding="" layout-margin="" layout-wrap="" ng-class="animationRows[3][2]" flex="noshrink"><button class="selection" flex="" flex-md="45" flex-sm="45" flex-xs="100" ng-click="selectPart(0)" ng-class="selectionButtons[0]" ng-mouseenter="infoImageOn(4)" ng-mouseleave="infoImageOff(4)"><div class="sectionContent"><div class="contentIcons" layout="row" layout-align="space-between"><div class="infoHolder" ng-click="infoClick(4)"><img class="info" ng-src="{{infoImages[4]}}" layout="center"></div><div class="checkHolder" layout="row" layout-align="end start"><img class="check" ng-src="app/images/check.png" layout="center"></div></div><div class="selectionImage"><img class="itemImage" ng-src="app/images/BOARDS-CUTOUT_0007_FRONT-eclosure-wShine.png"></div><h5 class="selectionText">{{payload.part5}}</h5></div></button> <button class="selection" flex="" flex-md="45" flex-sm="45" flex-xs="100" ng-click="selectPart(1)" ng-class="selectionButtons[1]" ng-mouseenter="infoImageOn(5)" ng-mouseleave="infoImageOff(5)"><div class="sectionContent"><div class="contentIcons" layout="row" layout-align="space-between"><div class="infoHolder" ng-click="infoClick(5)"><img class="info" ng-src="{{infoImages[5]}}" layout="center"></div><div class="checkHolder" layout="row" layout-align="end start"><img class="check" ng-src="app/images/check.png" layout="center"></div></div><div class="selectionImage"><img class="itemImage" ng-src="app/images/spacers.png"></div><h5 class="selectionText">{{payload.part6}}</h5></div></button> <button class="selection" flex="" flex-md="45" flex-sm="45" flex-xs="100" ng-click="selectPart(2)" ng-class="selectionButtons[2]" ng-mouseenter="infoImageOn(6)" ng-mouseleave="infoImageOff(6)"><div class="sectionContent"><div class="contentIcons" layout="row" layout-align="space-between"><div class="infoHolder" ng-click="infoClick(6)"><img class="info" ng-src="{{infoImages[6]}}" layout="center"></div><div class="checkHolder" layout="row" layout-align="end start"><img class="check" ng-src="app/images/check.png" layout="center"></div></div><div class="selectionImage"><img class="itemImage" ng-src="app/images/screen.png"></div><h5 class="selectionText">{{payload.part7}}</h5></div></button> <button class="selection" flex="" flex-md="45" flex-sm="45" flex-xs="100" ng-click="selectPart(3)" ng-class="selectionButtons[3]" ng-mouseenter="infoImageOn(7)" ng-mouseleave="infoImageOff(7)"><div class="sectionContent"><div class="contentIcons" layout="row" layout-align="space-between"><div class="infoHolder" ng-click="infoClick(7)"><img class="info" ng-src="{{infoImages[7]}}" layout="center"></div><div class="checkHolder" layout="row" layout-align="end start"><img class="check" ng-src="app/images/check.png" layout="center"></div></div><div class="selectionImage"><img class="itemImage" ng-src="app/images/plugs.png"></div><h5 class="selectionText">{{payload.part8}}</h5></div></button></div>'),e.put("app/wizard/sensorName.html",'<div class="animate" ng-class="animationRows[4][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[4][1]"><h4>{{payload.h4}}</h4></div><form name="sensor_name" class="animate" ng-class="animationRows[4][2]"><div class="inputDiv" layout="column" layout-align="center"><div class="inputContainer" layout="row" layout-align="start center"><div class="ss_wifi"><svg class="ss_input" width="28px" height="42px" viewbox="33 18 30 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="user" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="30" font-weight="normal" line-spacing="38"><tspan x="33" y="53" fill="#717E83">user</tspan></text></svg></div><div flex="grow" class="md-box"><md-input-container class="md-block"><label>{{payload.input1}}</label> <input ng-model-options="{ debounce: 500 }" autofocus="" ng-model="name" ng-change="listener()" required="" type="text" name="ssid"><div ng-messages="sensor_name.name.$error"><div ng-message="required">{{payload.input1_error}}</div></div></md-input-container></div></div></div></form><div class="contextWrapper animate" layout="center" ng-class="animationRows[4][3]"><button class="contextButton" ng-click="generateName()"><svg width="23px" height="25px" viewbox="15 13 23 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="refresh" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="18" font-weight="normal"><tspan x="17.5" y="32" fill="#FFFFFF">refresh</tspan></text></svg>{{ payload.contextButton }}</button></div>'),e.put("app/wizard/unavailable.html",'<div class="animate" ng-class="animationRows[4][0]" layout="center" layout-align="center center"><h1>Sorry, service unavailable</h1></div>'),e.put("app/wizard/wifi_check.html",'<div class="animate" ng-class="animationRows[4][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[4][1]"><h4>{{payload.h4}}</h4></div><form name="wifi_ssid" class="animate" ng-class="animationRows[4][2]"><div class="inputDiv" layout="column" layout-align="center"><div class="inputContainer" layout="row" layout-align="start center"><div class="ss_wifi"><svg class="ss_input" width="38px" height="36px" viewbox="160 179 24 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><defs></defs><path d="M183.8125,184.613281 L181.703125,186.734375 C181.640625,186.78125 181.582032,186.816406 181.527344,186.839844 C181.449218,186.878906 181.386719,186.898438 181.339844,186.898438 C181.199218,186.898438 181.085938,186.843751 181,186.734375 C179.773431,185.507806 178.365242,184.576175 176.775391,183.939453 C175.185539,183.302731 173.585946,182.984375 171.976562,182.984375 C170.367179,182.984375 168.767586,183.302731 167.177734,183.939453 C165.587883,184.576175 164.179694,185.507806 162.953125,186.734375 C162.867187,186.843751 162.753907,186.898438 162.613281,186.898438 C162.566406,186.898438 162.503907,186.878906 162.425781,186.839844 C162.371093,186.816406 162.3125,186.78125 162.25,186.734375 L160.140625,184.613281 C160.046875,184.519531 160,184.406251 160,184.273438 C160,184.140624 160.046875,184.023438 160.140625,183.921875 C161.742196,182.312492 163.585927,181.089848 165.671875,180.253906 C167.757823,179.417965 169.859364,179 171.976562,179 C174.093761,179 176.195302,179.417965 178.28125,180.253906 C180.367198,181.089848 182.210929,182.312492 183.8125,183.921875 C183.90625,184.023438 183.953125,184.140624 183.953125,184.273438 C183.953125,184.406251 183.90625,184.519531 183.8125,184.613281 L183.8125,184.613281 Z M179.230469,189.230469 L177.121094,191.339844 C177.097656,191.355469 177.039063,191.394531 176.945312,191.457031 C176.914062,191.472656 176.851563,191.480469 176.757812,191.480469 C176.609374,191.480469 176.488282,191.433594 176.394531,191.339844 C175.58984,190.542965 174.652349,190.001955 173.582031,189.716797 C172.511713,189.431639 171.441412,189.431639 170.371094,189.716797 C169.300776,190.001955 168.363285,190.542965 167.558594,191.339844 C167.441406,191.433594 167.320313,191.480469 167.195312,191.480469 C167.101562,191.480469 167.039063,191.472656 167.007812,191.457031 C166.914062,191.394531 166.855469,191.355469 166.832031,191.339844 L164.722656,189.230469 C164.628906,189.128906 164.582031,189.007813 164.582031,188.867188 C164.582031,188.726562 164.628906,188.605469 164.722656,188.503906 C165.707036,187.519526 166.837884,186.771487 168.115234,186.259766 C169.392585,185.748044 170.679681,185.492188 171.976562,185.492188 C173.273444,185.492188 174.56054,185.748044 175.837891,186.259766 C177.115241,186.771487 178.246089,187.519526 179.230469,188.503906 C179.324219,188.605469 179.371094,188.726562 179.371094,188.867188 C179.371094,189.007813 179.324219,189.128906 179.230469,189.230469 L179.230469,189.230469 Z M174.613281,193.8125 L172.339844,196.121094 C172.238281,196.214844 172.117188,196.261719 171.976562,196.261719 C171.835937,196.261719 171.714844,196.214844 171.613281,196.121094 L169.304688,193.8125 C169.210937,193.710937 169.164062,193.593751 169.164062,193.460938 C169.164062,193.328124 169.210937,193.214844 169.304688,193.121094 C169.789065,192.636716 170.355466,192.308595 171.003906,192.136719 C171.652347,191.964843 172.298825,191.964843 172.943359,192.136719 C173.587894,192.308595 174.144529,192.636716 174.613281,193.121094 C174.714844,193.214844 174.765625,193.328124 174.765625,193.460938 C174.765625,193.593751 174.714844,193.710937 174.613281,193.8125 L174.613281,193.8125 Z" id="wifi-copy" stroke="none" fill="#6E7E84" fill-rule="evenodd"></path></svg></div><div flex="grow" class="md-box"><md-input-container class="md-block"><label>Nombre del Wi-Fi</label> <input autofocus="" ng-model="ssid" ng-change="ssidListener()" required="" type="text" name="ssid"><div ng-messages="wifi_ssid.ssid.$error"><div ng-message="required">Tienes que introducir el nombre de tu red.</div></div></md-input-container></div></div></div><div class="inputDiv" layout="column" layout-align="center"><div class="inputContainer" layout="row" layout-align="start center"><div class="ss_input"><svg width="38px" height="36" viewbox="33 27 24 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="lock" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="30" font-weight="normal" line-spacing="38"><tspan x="32" y="60" fill="#717E83">lock</tspan></text></svg></div><div flex="grow" class="md-box"><md-input-container class="md-block"><label>Contraseña</label> <input ng-model="pass" ng-change="passwordListener()" type="{{showPasswordToggle}}" name="pass"><div ng-messages="wifi_ssid.pass.$error"></div></md-input-container></div><div class="ss_input" ng-mouseenter="showPassword(true)" ng-mouseleave="showPassword(false)" ng-click="forceShowPassword()"><svg width="36px" height="38px" viewbox="438 32 36 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="eye" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="36" font-weight="normal" line-spacing="38"><tspan x="438" y="70" fill="#717E83">eye</tspan></text></svg></div></div></div></form><div layout="row" layout-align="center center" layout-margin="" class="animate" ng-class="animationRows[4][3]"><div class="contextWrapper animate" layout="center"><button class="contextButton" ng-click="alternateSegue()"><svg width="23px" height="25px" viewbox="15 13 23 25" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="refresh" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="18" font-weight="normal"><tspan x="17.5" y="32" fill="#FFFFFF">refresh</tspan></text></svg>{{ payload.contextButton }}</button></div></div>'),
e.put("app/wizard/wifi_enter.html",'<div class="animate" ng-class="animationRows[3][0]"><h2>{{payload.h2}}</h2></div><div class="animate" ng-class="animationRows[3][1]"><h4>{{payload.h4}}</h4></div><form name="wifi_ssid" class="animate" ng-class="animationRows[3][2]"><div class="inputDiv" layout="column" layout-align="center"><div class="inputContainer" layout="row" layout-align="start center"><div class="ss_wifi"><svg class="ss_input" width="38px" height="36px" viewbox="160 179 24 21" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><defs></defs><path d="M183.8125,184.613281 L181.703125,186.734375 C181.640625,186.78125 181.582032,186.816406 181.527344,186.839844 C181.449218,186.878906 181.386719,186.898438 181.339844,186.898438 C181.199218,186.898438 181.085938,186.843751 181,186.734375 C179.773431,185.507806 178.365242,184.576175 176.775391,183.939453 C175.185539,183.302731 173.585946,182.984375 171.976562,182.984375 C170.367179,182.984375 168.767586,183.302731 167.177734,183.939453 C165.587883,184.576175 164.179694,185.507806 162.953125,186.734375 C162.867187,186.843751 162.753907,186.898438 162.613281,186.898438 C162.566406,186.898438 162.503907,186.878906 162.425781,186.839844 C162.371093,186.816406 162.3125,186.78125 162.25,186.734375 L160.140625,184.613281 C160.046875,184.519531 160,184.406251 160,184.273438 C160,184.140624 160.046875,184.023438 160.140625,183.921875 C161.742196,182.312492 163.585927,181.089848 165.671875,180.253906 C167.757823,179.417965 169.859364,179 171.976562,179 C174.093761,179 176.195302,179.417965 178.28125,180.253906 C180.367198,181.089848 182.210929,182.312492 183.8125,183.921875 C183.90625,184.023438 183.953125,184.140624 183.953125,184.273438 C183.953125,184.406251 183.90625,184.519531 183.8125,184.613281 L183.8125,184.613281 Z M179.230469,189.230469 L177.121094,191.339844 C177.097656,191.355469 177.039063,191.394531 176.945312,191.457031 C176.914062,191.472656 176.851563,191.480469 176.757812,191.480469 C176.609374,191.480469 176.488282,191.433594 176.394531,191.339844 C175.58984,190.542965 174.652349,190.001955 173.582031,189.716797 C172.511713,189.431639 171.441412,189.431639 170.371094,189.716797 C169.300776,190.001955 168.363285,190.542965 167.558594,191.339844 C167.441406,191.433594 167.320313,191.480469 167.195312,191.480469 C167.101562,191.480469 167.039063,191.472656 167.007812,191.457031 C166.914062,191.394531 166.855469,191.355469 166.832031,191.339844 L164.722656,189.230469 C164.628906,189.128906 164.582031,189.007813 164.582031,188.867188 C164.582031,188.726562 164.628906,188.605469 164.722656,188.503906 C165.707036,187.519526 166.837884,186.771487 168.115234,186.259766 C169.392585,185.748044 170.679681,185.492188 171.976562,185.492188 C173.273444,185.492188 174.56054,185.748044 175.837891,186.259766 C177.115241,186.771487 178.246089,187.519526 179.230469,188.503906 C179.324219,188.605469 179.371094,188.726562 179.371094,188.867188 C179.371094,189.007813 179.324219,189.128906 179.230469,189.230469 L179.230469,189.230469 Z M174.613281,193.8125 L172.339844,196.121094 C172.238281,196.214844 172.117188,196.261719 171.976562,196.261719 C171.835937,196.261719 171.714844,196.214844 171.613281,196.121094 L169.304688,193.8125 C169.210937,193.710937 169.164062,193.593751 169.164062,193.460938 C169.164062,193.328124 169.210937,193.214844 169.304688,193.121094 C169.789065,192.636716 170.355466,192.308595 171.003906,192.136719 C171.652347,191.964843 172.298825,191.964843 172.943359,192.136719 C173.587894,192.308595 174.144529,192.636716 174.613281,193.121094 C174.714844,193.214844 174.765625,193.328124 174.765625,193.460938 C174.765625,193.593751 174.714844,193.710937 174.613281,193.8125 L174.613281,193.8125 Z" id="wifi-copy" stroke="none" fill="#6E7E84" fill-rule="evenodd"></path></svg></div><div flex="grow" class="md-box"><md-input-container class="md-block"><label>{{payload.input1}}</label> <input autofocus="" ng-model="ssid" ng-change="ssidListener()" required="" type="text" name="ssid"><div ng-messages="wifi_ssid.ssid.$error"><div ng-message="required">{{payload.input1_error}}</div></div></md-input-container></div></div></div><div class="inputDiv" layout="column" layout-align="center"><div class="inputContainer" layout="row" layout-align="start center"><div class="ss_input"><svg width="38px" height="36" viewbox="33 27 24 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="lock" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="30" font-weight="normal" line-spacing="38"><tspan x="32" y="60" fill="#717E83">lock</tspan></text></svg></div><div flex="grow" class="md-box"><md-input-container class="md-block"><label>{{payload.input2}}</label> <input ng-model="pass" ng-change="passwordListener()" type="{{showPasswordToggle}}" name="pass"><div ng-messages="wifi_ssid.pass.$error"></div></md-input-container></div><div class="ss_input" ng-mouseenter="showPassword(true)" ng-mouseleave="showPassword(false)" ng-click="forceShowPassword()"><svg width="36px" height="38px" viewbox="438 32 36 38" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><text id="eye" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="36" font-weight="normal" line-spacing="38"><tspan x="438" y="70" fill="#717E83">eye</tspan></text></svg></div></div></div></form>'),e.put("app/wizard/wizard.html",'<div id="progress" layout="column" layout-align="center center" flex="none" ng-class="payload.progressShow"><md-progress-linear md-diameter="100" md-mode="determinate" bar-height="50px" value="{{payload.progressVal}}"></md-progress-linear><div id="progressLabels" layout="row" layout-align="space-between start"><p id="left">{{payload.progressLeftLabel}}</p><p id="right">{{payload.progressRightLabel}}</p></div></div><div id="wizardView" layout="column" layout-align="center none" ui-view="" flex=""></div><div class="bottomNav animate" layout="row" layout-align="space-around center" flex="none" ng-class="animationRows[0][0]"><div hide-xs=""><button class="backButton" ng-click="back()" ng-class="payload.backBlock"><svg width="10px" height="16px" viewbox="327 653 10 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><defs></defs><path d="M336.867188,660.739483 C336.95573,660.807192 337,660.893129 337,660.997296 C337,661.117088 336.95573,661.203025 336.867188,661.255108 L327.539062,668.926983 C327.434895,669.005109 327.317709,669.015525 327.1875,668.958233 C327.062499,668.900941 327,668.801984 327,668.661358 L327,653.333233 C327,653.192608 327.062499,653.09365 327.1875,653.036358 C327.317709,652.979066 327.434895,652.989483 327.539062,653.067608 L336.867188,660.739483 Z" id="directright" stroke="none" fill="#2A3F49" fill-rule="evenodd" transform="translate(332.000000, 660.997296) scale(-1, 1) translate(-332.000000, -660.997296)"></path></svg></button></div><div class="segueWrapper" layout="row" layout-align="space-between center" layout-margin="" flex="none"><button class="buttonClearfix" hide-xs="">X</button> <button class="buttonClearfix" hide-xs="">X</button> <button class="segueButton" ng-click="seque()" ng-class="segueControl"><svg id="closeSVG" width="36px" height="40px" viewbox="8 10 36 49" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><text id="close" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="30" font-weight="normal"><tspan x="8" y="48" fill="#ffffff">close</tspan></text></svg><span id="segueContent">{{ payload.segueButton }}</span><svg id="nextSVG" width="10px" height="16px" viewbox="187 22 10 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><desc>Created with Sketch.</desc><defs></defs><path d="M187.539062,22.0676084 L196.867188,29.7394834 C196.95573,29.8071921 197,29.8931287 197,29.9972959 C197,30.1170882 196.95573,30.2030248 196.867188,30.2551084 L187.539062,37.9269834 C187.434895,38.0051088 187.317709,38.0155254 187.1875,37.9582334 C187.062499,37.9009415 187,37.8019841 187,37.6613584 L187,22.3332334 C187,22.1926077 187.062499,22.0936504 187.1875,22.0363584 C187.317709,21.9790665 187.434895,21.989483 187.539062,22.0676084 L187.539062,22.0676084 Z" id="directright" stroke="none" fill="#FFFFFF" fill-rule="evenodd"></path></svg></button><div class="spinnerWrapper" ng-class="spinnerControl"><svg class="spinner" width="65px" height="65px" viewbox="0 0 66 66" xmlns="http://www.w3.org/2000/svg"><circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div><button class="yesButton errorButton" ng-click="yes()" ng-class="errorButton" hide-xs="">{{ payload.yesButton }}</button> <button class="noButton errorButton" ng-click="no()" ng-class="errorButton" hide-xs="">{{ payload.noButton }}</button></div><div hide-xs=""><button class="forwardButton" ng-click="forward()" ng-class="payload.forwardBlock" style="visibility: hidden;"><svg width="36px" height="49px" viewbox="8 10 36 49" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs></defs><text id="directright" stroke="none" fill="none" font-family="SSStandard, SS Standard" font-size="22" font-weight="normal"><tspan x="8" y="48">directright</tspan></text></svg></button></div></div><div id="modal" ng-class="modalClass" layout="column" layout-align="center center" flex="grow" ng-click="modalClick()"><div id="modalContent" layout="column" layout-align="center center" layout-padding="" layout-margin=""><div id="modalBox" ng-class="modalBox" layout-gt-sm="row" layout-align-sm="center center"><div><h2>{{modalContent.title}}</h2><h5>{{modalContent.body}}</h5></div><div ng-if="modalContent.image" id="partImage" flex="none" flex-sm-auto=""><img ng-src="{{modalContent.image}}"></div></div><div ng-if="modalContent.button" id="modalLink"><button id="modalButton" ng-click="modalButtonClick()" ng-class="modalButton">{{modalContent.button}}</button></div></div></div>')}]);